var gx=Object.defineProperty;var vx=(t,e,n)=>e in t?gx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Kt=(t,e,n)=>vx(t,typeof e!="symbol"?e+"":e,n);function yx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z_={exports:{}},yc={},eE={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),Ex=Symbol.for("react.portal"),wx=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),Ix=Symbol.for("react.profiler"),Sx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),xx=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),Px=Symbol.for("react.memo"),Cx=Symbol.for("react.lazy"),_v=Symbol.iterator;function Rx(t){return t===null||typeof t!="object"?null:(t=_v&&t[_v]||t["@@iterator"],typeof t=="function"?t:null)}var tE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nE=Object.assign,rE={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||tE}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iE(){}iE.prototype=Fs.prototype;function cp(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||tE}var dp=cp.prototype=new iE;dp.constructor=cp;nE(dp,Fs.prototype);dp.isPureReactComponent=!0;var Ev=Array.isArray,sE=Object.prototype.hasOwnProperty,hp={current:null},oE={key:!0,ref:!0,__self:!0,__source:!0};function aE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sE.call(e,r)&&!oE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ca,type:t,key:s,ref:o,props:i,_owner:hp.current}}function kx(t,e){return{$$typeof:Ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ca}function Nx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wv=/\/+/g;function kd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nx(""+t.key):e.toString(36)}function Ql(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ca:case Ex:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+kd(o,0):r,Ev(i)?(n="",t!=null&&(n=t.replace(wv,"$&/")+"/"),Ql(i,e,n,"",function(c){return c})):i!=null&&(fp(i)&&(i=kx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ev(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+kd(s,a);o+=Ql(s,e,n,l,i)}else if(l=Rx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+kd(s,a++),o+=Ql(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],i=0;return Ql(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ox(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Xl={transition:null},Dx={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:hp};function lE(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!fp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Fs;de.Fragment=wx;de.Profiler=Ix;de.PureComponent=cp;de.StrictMode=Tx;de.Suspense=bx;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx;de.act=lE;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sE.call(e,l)&&!oE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ca,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:Ax,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sx,_context:t},t.Consumer=t};de.createElement=aE;de.createFactory=function(t){var e=aE.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:xx,render:t}};de.isValidElement=fp;de.lazy=function(t){return{$$typeof:Cx,_payload:{_status:-1,_result:t},_init:Ox}};de.memo=function(t,e){return{$$typeof:Px,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Xl.transition;Xl.transition={};try{t()}finally{Xl.transition=e}};de.unstable_act=lE;de.useCallback=function(t,e){return Mt.current.useCallback(t,e)};de.useContext=function(t){return Mt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Mt.current.useEffect(t,e)};de.useId=function(){return Mt.current.useId()};de.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Mt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};de.useRef=function(t){return Mt.current.useRef(t)};de.useState=function(t){return Mt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Mt.current.useTransition()};de.version="18.3.1";eE.exports=de;var F=eE.exports;const uE=_x(F),Lx=yx({__proto__:null,default:uE},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=F,jx=Symbol.for("react.element"),Vx=Symbol.for("react.fragment"),Ux=Object.prototype.hasOwnProperty,Fx=Mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bx={key:!0,ref:!0,__self:!0,__source:!0};function cE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ux.call(e,r)&&!Bx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jx,type:t,key:s,ref:o,props:i,_owner:Fx.current}}yc.Fragment=Vx;yc.jsx=cE;yc.jsxs=cE;Z_.exports=yc;var y=Z_.exports,bh={},dE={exports:{}},nn={},hE={exports:{}},fE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,J){var Z=H.length;H.push(J);e:for(;0<Z;){var pe=Z-1>>>1,ce=H[pe];if(0<i(ce,J))H[pe]=J,H[Z]=ce,Z=pe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var J=H[0],Z=H.pop();if(Z!==J){H[0]=Z;e:for(var pe=0,ce=H.length,ae=ce>>>1;pe<ae;){var Ie=2*(pe+1)-1,Ct=H[Ie],K=Ie+1,Wt=H[K];if(0>i(Ct,Z))K<ce&&0>i(Wt,Ct)?(H[pe]=Wt,H[K]=Z,pe=K):(H[pe]=Ct,H[Ie]=Z,pe=Ie);else if(K<ce&&0>i(Wt,Z))H[pe]=Wt,H[K]=Z,pe=K;else break e}}return J}function i(H,J){var Z=H.sortIndex-J.sortIndex;return Z!==0?Z:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,g=!1,m=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=H)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function k(H){if(E=!1,I(H),!m)if(n(l)!==null)m=!0,oe(O);else{var J=n(c);J!==null&&be(k,J.startTime-H)}}function O(H,J){m=!1,E&&(E=!1,w(T),T=-1),g=!0;var Z=f;try{for(I(J),h=n(l);h!==null&&(!(h.expirationTime>J)||H&&!C());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var ce=pe(h.expirationTime<=J);J=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(l)&&r(l),I(J)}else r(l);h=n(l)}if(h!==null)var ae=!0;else{var Ie=n(c);Ie!==null&&be(k,Ie.startTime-J),ae=!1}return ae}finally{h=null,f=Z,g=!1}}var L=!1,S=null,T=-1,b=5,P=-1;function C(){return!(t.unstable_now()-P<b)}function N(){if(S!==null){var H=t.unstable_now();P=H;var J=!0;try{J=S(!0,H)}finally{J?R():(L=!1,S=null)}}else L=!1}var R;if(typeof _=="function")R=function(){_(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,W=$.port2;$.port1.onmessage=N,R=function(){W.postMessage(null)}}else R=function(){A(N,0)};function oe(H){S=H,L||(L=!0,R())}function be(H,J){T=A(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,oe(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Z=f;f=J;try{return H()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=f;f=H;try{return J()}finally{f=Z}},t.unstable_scheduleCallback=function(H,J,Z){var pe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Z+ce,H={id:d++,callback:J,priorityLevel:H,startTime:Z,expirationTime:ce,sortIndex:-1},Z>pe?(H.sortIndex=Z,e(c,H),n(l)===null&&H===n(c)&&(E?(w(T),T=-1):E=!0,be(k,Z-pe))):(H.sortIndex=ce,e(l,H),m||g||(m=!0,oe(O))),H},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(H){var J=f;return function(){var Z=f;f=J;try{return H.apply(this,arguments)}finally{f=Z}}}})(fE);hE.exports=fE;var zx=hE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=F,tn=zx;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,Jo={};function Oi(t,e){Ts(t,e),Ts(t+"Capture",e)}function Ts(t,e){for(Jo[t]=e,t=0;t<e.length;t++)pE.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=Object.prototype.hasOwnProperty,Hx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},Iv={};function qx(t){return Ph.call(Iv,t)?!0:Ph.call(Tv,t)?!1:Hx.test(t)?Iv[t]=!0:(Tv[t]=!0,!1)}function Wx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gx(t,e,n,r){if(e===null||typeof e>"u"||Wx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pp=/[\-:]([a-z])/g;function mp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pp,mp);ht[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pp,mp);ht[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pp,mp);ht[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function gp(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gx(e,n,i,r)&&(n=null),r||i===null?qx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=$x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),yp=Symbol.for("react.forward_ref"),Rh=Symbol.for("react.suspense"),kh=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),vE=Symbol.for("react.offscreen"),Sv=Symbol.iterator;function po(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Nd;function xo(t){if(Nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nd=e&&e[1]||""}return`
`+Nd+t}var Od=!1;function Dd(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function Kx(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=Dd(t.type,!1),t;case 11:return t=Dd(t.type.render,!1),t;case 1:return t=Dd(t.type,!0),t;default:return""}}function Nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ji:return"Fragment";case Yi:return"Portal";case Ch:return"Profiler";case vp:return"StrictMode";case Rh:return"Suspense";case kh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gE:return(t.displayName||"Context")+".Consumer";case mE:return(t._context.displayName||"Context")+".Provider";case yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _p:return e=t.displayName||null,e!==null?e:Nh(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return Nh(t(e))}catch{}}return null}function Qx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nh(e);case 8:return e===vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xx(t){var e=yE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=Xx(t))}function _E(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oh(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Av(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function EE(t,e){e=e.checked,e!=null&&gp(t,"checked",e,!1)}function Dh(t,e){EE(t,e);var n=Gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lh(t,e.type,Gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lh(t,e,n){(e!=="number"||wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function cs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(bo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gr(n)}}function wE(t,e){var n=Gr(e.value),r=Gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,IE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yx=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(t){Yx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Do[e]=Do[t]})});function SE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Do.hasOwnProperty(t)&&Do[t]?(""+e).trim():e+"px"}function AE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Jx=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(Jx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Uh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function Ep(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bh=null,ds=null,hs=null;function Cv(t){if(t=Na(t)){if(typeof Bh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ic(e),Bh(t.stateNode,t.type,e))}}function xE(t){ds?hs?hs.push(t):hs=[t]:ds=t}function bE(){if(ds){var t=ds,e=hs;if(hs=ds=null,Cv(t),e)for(t=0;t<e.length;t++)Cv(e[t])}}function PE(t,e){return t(e)}function CE(){}var Ld=!1;function RE(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return PE(t,e,n)}finally{Ld=!1,(ds!==null||hs!==null)&&(CE(),bE())}}function ea(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var zh=!1;if(er)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){zh=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{zh=!1}function Zx(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Lo=!1,Tu=null,Iu=!1,$h=null,eb={onError:function(t){Lo=!0,Tu=t}};function tb(t,e,n,r,i,s,o,a,l){Lo=!1,Tu=null,Zx.apply(eb,arguments)}function nb(t,e,n,r,i,s,o,a,l){if(tb.apply(this,arguments),Lo){if(Lo){var c=Tu;Lo=!1,Tu=null}else throw Error(z(198));Iu||(Iu=!0,$h=c)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rv(t){if(Di(t)!==t)throw Error(z(188))}function rb(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Rv(i),t;if(s===r)return Rv(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function NE(t){return t=rb(t),t!==null?OE(t):null}function OE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OE(t);if(e!==null)return e;t=t.sibling}return null}var DE=tn.unstable_scheduleCallback,kv=tn.unstable_cancelCallback,ib=tn.unstable_shouldYield,sb=tn.unstable_requestPaint,qe=tn.unstable_now,ob=tn.unstable_getCurrentPriorityLevel,wp=tn.unstable_ImmediatePriority,LE=tn.unstable_UserBlockingPriority,Su=tn.unstable_NormalPriority,ab=tn.unstable_LowPriority,ME=tn.unstable_IdlePriority,_c=null,kn=null;function lb(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(_c,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:db,ub=Math.log,cb=Math.LN2;function db(t){return t>>>=0,t===0?32:31-(ub(t)/cb|0)|0}var vl=64,yl=4194304;function Po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Au(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Po(a):(s&=o,s!==0&&(r=Po(s)))}else o=n&~i,o!==0?r=Po(o):s!==0&&(r=Po(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function hb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=hb(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Hh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=vl;return vl<<=1,!(vl&4194240)&&(vl=64),t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function pb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Tp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function VE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UE,Ip,FE,BE,zE,qh=!1,_l=[],Or=null,Dr=null,Lr=null,ta=new Map,na=new Map,Tr=[],mb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nv(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(e.pointerId)}}function go(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Na(e),e!==null&&Ip(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gb(t,e,n,r,i){switch(e){case"focusin":return Or=go(Or,t,e,n,r,i),!0;case"dragenter":return Dr=go(Dr,t,e,n,r,i),!0;case"mouseover":return Lr=go(Lr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ta.set(s,go(ta.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,na.set(s,go(na.get(s)||null,t,e,n,r,i)),!0}return!1}function $E(t){var e=di(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=kE(n),e!==null){t.blockedOn=e,zE(t.priority,function(){FE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fh=r,n.target.dispatchEvent(r),Fh=null}else return e=Na(n),e!==null&&Ip(e),t.blockedOn=n,!1;e.shift()}return!0}function Ov(t,e,n){Yl(t)&&n.delete(e)}function vb(){qh=!1,Or!==null&&Yl(Or)&&(Or=null),Dr!==null&&Yl(Dr)&&(Dr=null),Lr!==null&&Yl(Lr)&&(Lr=null),ta.forEach(Ov),na.forEach(Ov)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,vb)))}function ra(t){function e(i){return vo(i,t)}if(0<_l.length){vo(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&vo(Or,t),Dr!==null&&vo(Dr,t),Lr!==null&&vo(Lr,t),ta.forEach(e),na.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)$E(n),n.blockedOn===null&&Tr.shift()}var fs=lr.ReactCurrentBatchConfig,xu=!0;function yb(t,e,n,r){var i=Ee,s=fs.transition;fs.transition=null;try{Ee=1,Sp(t,e,n,r)}finally{Ee=i,fs.transition=s}}function _b(t,e,n,r){var i=Ee,s=fs.transition;fs.transition=null;try{Ee=4,Sp(t,e,n,r)}finally{Ee=i,fs.transition=s}}function Sp(t,e,n,r){if(xu){var i=Wh(t,e,n,r);if(i===null)Wd(t,e,r,bu,n),Nv(t,r);else if(gb(i,t,e,n,r))r.stopPropagation();else if(Nv(t,r),e&4&&-1<mb.indexOf(t)){for(;i!==null;){var s=Na(i);if(s!==null&&UE(s),s=Wh(t,e,n,r),s===null&&Wd(t,e,r,bu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wd(t,e,r,null,n)}}var bu=null;function Wh(t,e,n,r){if(bu=null,t=Ep(r),t=di(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function HE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ob()){case wp:return 1;case LE:return 4;case Su:case ab:return 16;case ME:return 536870912;default:return 16}default:return 16}}var br=null,Ap=null,Jl=null;function qE(){if(Jl)return Jl;var t,e=Ap,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Jl=i.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function El(){return!0}function Dv(){return!1}function rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?El:Dv,this.isPropagationStopped=Dv,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xp=rn(Bs),ka=Ue({},Bs,{view:0,detail:0}),Eb=rn(ka),jd,Vd,yo,Ec=Ue({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(jd=t.screenX-yo.screenX,Vd=t.screenY-yo.screenY):Vd=jd=0,yo=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:Vd}}),Lv=rn(Ec),wb=Ue({},Ec,{dataTransfer:0}),Tb=rn(wb),Ib=Ue({},ka,{relatedTarget:0}),Ud=rn(Ib),Sb=Ue({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ab=rn(Sb),xb=Ue({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bb=rn(xb),Pb=Ue({},Bs,{data:0}),Mv=rn(Pb),Cb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kb[t])?!!e[t]:!1}function bp(){return Nb}var Ob=Ue({},ka,{key:function(t){if(t.key){var e=Cb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bp,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Db=rn(Ob),Lb=Ue({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jv=rn(Lb),Mb=Ue({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bp}),jb=rn(Mb),Vb=Ue({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ub=rn(Vb),Fb=Ue({},Ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bb=rn(Fb),zb=[9,13,27,32],Pp=er&&"CompositionEvent"in window,Mo=null;er&&"documentMode"in document&&(Mo=document.documentMode);var $b=er&&"TextEvent"in window&&!Mo,WE=er&&(!Pp||Mo&&8<Mo&&11>=Mo),Vv=" ",Uv=!1;function GE(t,e){switch(t){case"keyup":return zb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zi=!1;function Hb(t,e){switch(t){case"compositionend":return KE(e);case"keypress":return e.which!==32?null:(Uv=!0,Vv);case"textInput":return t=e.data,t===Vv&&Uv?null:t;default:return null}}function qb(t,e){if(Zi)return t==="compositionend"||!Pp&&GE(t,e)?(t=qE(),Jl=Ap=br=null,Zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WE&&e.locale!=="ko"?null:e.data;default:return null}}var Wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wb[t.type]:e==="textarea"}function QE(t,e,n,r){xE(r),e=Pu(e,"onChange"),0<e.length&&(n=new xp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jo=null,ia=null;function Gb(t){ow(t,0)}function wc(t){var e=ns(t);if(_E(e))return t}function Kb(t,e){if(t==="change")return e}var XE=!1;if(er){var Fd;if(er){var Bd="oninput"in document;if(!Bd){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),Bd=typeof Bv.oninput=="function"}Fd=Bd}else Fd=!1;XE=Fd&&(!document.documentMode||9<document.documentMode)}function zv(){jo&&(jo.detachEvent("onpropertychange",YE),ia=jo=null)}function YE(t){if(t.propertyName==="value"&&wc(ia)){var e=[];QE(e,ia,t,Ep(t)),RE(Gb,e)}}function Qb(t,e,n){t==="focusin"?(zv(),jo=e,ia=n,jo.attachEvent("onpropertychange",YE)):t==="focusout"&&zv()}function Xb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(ia)}function Yb(t,e){if(t==="click")return wc(e)}function Jb(t,e){if(t==="input"||t==="change")return wc(e)}function Zb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:Zb;function sa(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ph.call(e,i)||!Sn(t[i],e[i]))return!1}return!0}function $v(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hv(t,e){var n=$v(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$v(n)}}function JE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZE(){for(var t=window,e=wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wu(t.document)}return e}function Cp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eP(t){var e=ZE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JE(n.ownerDocument.documentElement,n)){if(r!==null&&Cp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Hv(n,s);var o=Hv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tP=er&&"documentMode"in document&&11>=document.documentMode,es=null,Gh=null,Vo=null,Kh=!1;function qv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||es==null||es!==wu(r)||(r=es,"selectionStart"in r&&Cp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&sa(Vo,r)||(Vo=r,r=Pu(Gh,"onSelect"),0<r.length&&(e=new xp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=es)))}function wl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ts={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},zd={},ew={};er&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Tc(t){if(zd[t])return zd[t];if(!ts[t])return t;var e=ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ew)return zd[t]=e[n];return t}var tw=Tc("animationend"),nw=Tc("animationiteration"),rw=Tc("animationstart"),iw=Tc("transitionend"),sw=new Map,Wv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){sw.set(t,e),Oi(e,[t])}for(var $d=0;$d<Wv.length;$d++){var Hd=Wv[$d],nP=Hd.toLowerCase(),rP=Hd[0].toUpperCase()+Hd.slice(1);Jr(nP,"on"+rP)}Jr(tw,"onAnimationEnd");Jr(nw,"onAnimationIteration");Jr(rw,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(iw,"onTransitionEnd");Ts("onMouseEnter",["mouseout","mouseover"]);Ts("onMouseLeave",["mouseout","mouseover"]);Ts("onPointerEnter",["pointerout","pointerover"]);Ts("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function Gv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nb(r,e,void 0,t),t.currentTarget=null}function ow(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Gv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Gv(i,a,c),s=l}}}if(Iu)throw t=$h,Iu=!1,$h=null,t}function Ce(t,e){var n=e[Zh];n===void 0&&(n=e[Zh]=new Set);var r=t+"__bubble";n.has(r)||(aw(e,t,2,!1),n.add(r))}function qd(t,e,n){var r=0;e&&(r|=4),aw(n,t,r,e)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function oa(t){if(!t[Tl]){t[Tl]=!0,pE.forEach(function(n){n!=="selectionchange"&&(iP.has(n)||qd(n,!1,t),qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tl]||(e[Tl]=!0,qd("selectionchange",!1,e))}}function aw(t,e,n,r){switch(HE(e)){case 1:var i=yb;break;case 4:i=_b;break;default:i=Sp}n=i.bind(null,e,n,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=di(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RE(function(){var c=s,d=Ep(n),h=[];e:{var f=sw.get(t);if(f!==void 0){var g=xp,m=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":g=Db;break;case"focusin":m="focus",g=Ud;break;case"focusout":m="blur",g=Ud;break;case"beforeblur":case"afterblur":g=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jb;break;case tw:case nw:case rw:g=Ab;break;case iw:g=Ub;break;case"scroll":g=Eb;break;case"wheel":g=Bb;break;case"copy":case"cut":case"paste":g=bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=jv}var E=(e&4)!==0,A=!E&&t==="scroll",w=E?f!==null?f+"Capture":null:f;E=[];for(var _=c,I;_!==null;){I=_;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,w!==null&&(k=ea(_,w),k!=null&&E.push(aa(_,k,I)))),A)break;_=_.return}0<E.length&&(f=new g(f,m,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Fh&&(m=n.relatedTarget||n.fromElement)&&(di(m)||m[tr]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?di(m):null,m!==null&&(A=Di(m),m!==A||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(E=Lv,k="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=jv,k="onPointerLeave",w="onPointerEnter",_="pointer"),A=g==null?f:ns(g),I=m==null?f:ns(m),f=new E(k,_+"leave",g,n,d),f.target=A,f.relatedTarget=I,k=null,di(d)===c&&(E=new E(w,_+"enter",m,n,d),E.target=I,E.relatedTarget=A,k=E),A=k,g&&m)t:{for(E=g,w=m,_=0,I=E;I;I=$i(I))_++;for(I=0,k=w;k;k=$i(k))I++;for(;0<_-I;)E=$i(E),_--;for(;0<I-_;)w=$i(w),I--;for(;_--;){if(E===w||w!==null&&E===w.alternate)break t;E=$i(E),w=$i(w)}E=null}else E=null;g!==null&&Kv(h,f,g,E,!1),m!==null&&A!==null&&Kv(h,A,m,E,!0)}}e:{if(f=c?ns(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var O=Kb;else if(Fv(f))if(XE)O=Jb;else{O=Xb;var L=Qb}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=Yb);if(O&&(O=O(t,c))){QE(h,O,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Lh(f,"number",f.value)}switch(L=c?ns(c):window,t){case"focusin":(Fv(L)||L.contentEditable==="true")&&(es=L,Gh=c,Vo=null);break;case"focusout":Vo=Gh=es=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,qv(h,n,d);break;case"selectionchange":if(tP)break;case"keydown":case"keyup":qv(h,n,d)}var S;if(Pp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Zi?GE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(WE&&n.locale!=="ko"&&(Zi||T!=="onCompositionStart"?T==="onCompositionEnd"&&Zi&&(S=qE()):(br=d,Ap="value"in br?br.value:br.textContent,Zi=!0)),L=Pu(c,T),0<L.length&&(T=new Mv(T,t,null,n,d),h.push({event:T,listeners:L}),S?T.data=S:(S=KE(n),S!==null&&(T.data=S)))),(S=$b?Hb(t,n):qb(t,n))&&(c=Pu(c,"onBeforeInput"),0<c.length&&(d=new Mv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}ow(h,e)})}function aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ea(t,n),s!=null&&r.unshift(aa(t,s,i)),s=ea(t,e),s!=null&&r.push(aa(t,s,i))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ea(n,s),l!=null&&o.unshift(aa(n,l,a))):i||(l=ea(n,s),l!=null&&o.push(aa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sP=/\r\n?/g,oP=/\u0000|\uFFFD/g;function Qv(t){return(typeof t=="string"?t:""+t).replace(sP,`
`).replace(oP,"")}function Il(t,e,n){if(e=Qv(e),Qv(t)!==e&&n)throw Error(z(425))}function Cu(){}var Qh=null,Xh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,aP=typeof clearTimeout=="function"?clearTimeout:void 0,Xv=typeof Promise=="function"?Promise:void 0,lP=typeof queueMicrotask=="function"?queueMicrotask:typeof Xv<"u"?function(t){return Xv.resolve(null).then(t).catch(uP)}:Jh;function uP(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ra(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),Cn="__reactFiber$"+zs,la="__reactProps$"+zs,tr="__reactContainer$"+zs,Zh="__reactEvents$"+zs,cP="__reactListeners$"+zs,dP="__reactHandles$"+zs;function di(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yv(t);t!==null;){if(n=t[Cn])return n;t=Yv(t)}return e}t=n,n=t.parentNode}return null}function Na(t){return t=t[Cn]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ic(t){return t[la]||null}var ef=[],rs=-1;function Zr(t){return{current:t}}function Re(t){0>rs||(t.current=ef[rs],ef[rs]=null,rs--)}function Ae(t,e){rs++,ef[rs]=t.current,t.current=e}var Kr={},At=Zr(Kr),$t=Zr(!1),wi=Kr;function Is(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Ru(){Re($t),Re(At)}function Jv(t,e,n){if(At.current!==Kr)throw Error(z(168));Ae(At,e),Ae($t,n)}function lw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,Qx(t)||"Unknown",i));return Ue({},n,r)}function ku(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,wi=At.current,Ae(At,t),Ae($t,$t.current),!0}function Zv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=lw(t,e,wi),r.__reactInternalMemoizedMergedChildContext=t,Re($t),Re(At),Ae(At,t)):Re($t),Ae($t,n)}var qn=null,Sc=!1,Kd=!1;function uw(t){qn===null?qn=[t]:qn.push(t)}function hP(t){Sc=!0,uw(t)}function ei(){if(!Kd&&qn!==null){Kd=!0;var t=0,e=Ee;try{var n=qn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,Sc=!1}catch(i){throw qn!==null&&(qn=qn.slice(t+1)),DE(wp,ei),i}finally{Ee=e,Kd=!1}}return null}var is=[],ss=0,Nu=null,Ou=0,an=[],ln=0,Ti=null,Gn=1,Kn="";function li(t,e){is[ss++]=Ou,is[ss++]=Nu,Nu=t,Ou=e}function cw(t,e,n){an[ln++]=Gn,an[ln++]=Kn,an[ln++]=Ti,Ti=t;var r=Gn;t=Kn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-En(e)+i|n<<i|r,Kn=s+t}else Gn=1<<s|n<<i|r,Kn=t}function Rp(t){t.return!==null&&(li(t,1),cw(t,1,0))}function kp(t){for(;t===Nu;)Nu=is[--ss],is[ss]=null,Ou=is[--ss],is[ss]=null;for(;t===Ti;)Ti=an[--ln],an[ln]=null,Kn=an[--ln],an[ln]=null,Gn=an[--ln],an[ln]=null}var Zt=null,Yt=null,ke=!1,_n=null;function dw(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Yt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ti!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Yt=null,!0):!1;default:return!1}}function tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nf(t){if(ke){var e=Yt;if(e){var n=e;if(!ey(t,e)){if(tf(t))throw Error(z(418));e=Mr(n.nextSibling);var r=Zt;e&&ey(t,e)?dw(r,n):(t.flags=t.flags&-4097|2,ke=!1,Zt=t)}}else{if(tf(t))throw Error(z(418));t.flags=t.flags&-4097|2,ke=!1,Zt=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function Sl(t){if(t!==Zt)return!1;if(!ke)return ty(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Yt)){if(tf(t))throw hw(),Error(z(418));for(;e;)dw(t,e),e=Mr(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Zt?Mr(t.stateNode.nextSibling):null;return!0}function hw(){for(var t=Yt;t;)t=Mr(t.nextSibling)}function Ss(){Yt=Zt=null,ke=!1}function Np(t){_n===null?_n=[t]:_n.push(t)}var fP=lr.ReactCurrentBatchConfig;function _o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Al(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function fw(t){function e(w,_){if(t){var I=w.deletions;I===null?(w.deletions=[_],w.flags|=16):I.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Fr(w,_),w.index=0,w.sibling=null,w}function s(w,_,I){return w.index=I,t?(I=w.alternate,I!==null?(I=I.index,I<_?(w.flags|=2,_):I):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,I,k){return _===null||_.tag!==6?(_=th(I,w.mode,k),_.return=w,_):(_=i(_,I),_.return=w,_)}function l(w,_,I,k){var O=I.type;return O===Ji?d(w,_,I.props.children,k,I.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===_r&&ny(O)===_.type)?(k=i(_,I.props),k.ref=_o(w,_,I),k.return=w,k):(k=ou(I.type,I.key,I.props,null,w.mode,k),k.ref=_o(w,_,I),k.return=w,k)}function c(w,_,I,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=nh(I,w.mode,k),_.return=w,_):(_=i(_,I.children||[]),_.return=w,_)}function d(w,_,I,k,O){return _===null||_.tag!==7?(_=yi(I,w.mode,k,O),_.return=w,_):(_=i(_,I),_.return=w,_)}function h(w,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=th(""+_,w.mode,I),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pl:return I=ou(_.type,_.key,_.props,null,w.mode,I),I.ref=_o(w,null,_),I.return=w,I;case Yi:return _=nh(_,w.mode,I),_.return=w,_;case _r:var k=_._init;return h(w,k(_._payload),I)}if(bo(_)||po(_))return _=yi(_,w.mode,I,null),_.return=w,_;Al(w,_)}return null}function f(w,_,I,k){var O=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return O!==null?null:a(w,_,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case pl:return I.key===O?l(w,_,I,k):null;case Yi:return I.key===O?c(w,_,I,k):null;case _r:return O=I._init,f(w,_,O(I._payload),k)}if(bo(I)||po(I))return O!==null?null:d(w,_,I,k,null);Al(w,I)}return null}function g(w,_,I,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(I)||null,a(_,w,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pl:return w=w.get(k.key===null?I:k.key)||null,l(_,w,k,O);case Yi:return w=w.get(k.key===null?I:k.key)||null,c(_,w,k,O);case _r:var L=k._init;return g(w,_,I,L(k._payload),O)}if(bo(k)||po(k))return w=w.get(I)||null,d(_,w,k,O,null);Al(_,k)}return null}function m(w,_,I,k){for(var O=null,L=null,S=_,T=_=0,b=null;S!==null&&T<I.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var P=f(w,S,I[T],k);if(P===null){S===null&&(S=b);break}t&&S&&P.alternate===null&&e(w,S),_=s(P,_,T),L===null?O=P:L.sibling=P,L=P,S=b}if(T===I.length)return n(w,S),ke&&li(w,T),O;if(S===null){for(;T<I.length;T++)S=h(w,I[T],k),S!==null&&(_=s(S,_,T),L===null?O=S:L.sibling=S,L=S);return ke&&li(w,T),O}for(S=r(w,S);T<I.length;T++)b=g(S,w,T,I[T],k),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),_=s(b,_,T),L===null?O=b:L.sibling=b,L=b);return t&&S.forEach(function(C){return e(w,C)}),ke&&li(w,T),O}function E(w,_,I,k){var O=po(I);if(typeof O!="function")throw Error(z(150));if(I=O.call(I),I==null)throw Error(z(151));for(var L=O=null,S=_,T=_=0,b=null,P=I.next();S!==null&&!P.done;T++,P=I.next()){S.index>T?(b=S,S=null):b=S.sibling;var C=f(w,S,P.value,k);if(C===null){S===null&&(S=b);break}t&&S&&C.alternate===null&&e(w,S),_=s(C,_,T),L===null?O=C:L.sibling=C,L=C,S=b}if(P.done)return n(w,S),ke&&li(w,T),O;if(S===null){for(;!P.done;T++,P=I.next())P=h(w,P.value,k),P!==null&&(_=s(P,_,T),L===null?O=P:L.sibling=P,L=P);return ke&&li(w,T),O}for(S=r(w,S);!P.done;T++,P=I.next())P=g(S,w,T,P.value,k),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),_=s(P,_,T),L===null?O=P:L.sibling=P,L=P);return t&&S.forEach(function(N){return e(w,N)}),ke&&li(w,T),O}function A(w,_,I,k){if(typeof I=="object"&&I!==null&&I.type===Ji&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case pl:e:{for(var O=I.key,L=_;L!==null;){if(L.key===O){if(O=I.type,O===Ji){if(L.tag===7){n(w,L.sibling),_=i(L,I.props.children),_.return=w,w=_;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===_r&&ny(O)===L.type){n(w,L.sibling),_=i(L,I.props),_.ref=_o(w,L,I),_.return=w,w=_;break e}n(w,L);break}else e(w,L);L=L.sibling}I.type===Ji?(_=yi(I.props.children,w.mode,k,I.key),_.return=w,w=_):(k=ou(I.type,I.key,I.props,null,w.mode,k),k.ref=_o(w,_,I),k.return=w,w=k)}return o(w);case Yi:e:{for(L=I.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(w,_.sibling),_=i(_,I.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=nh(I,w.mode,k),_.return=w,w=_}return o(w);case _r:return L=I._init,A(w,_,L(I._payload),k)}if(bo(I))return m(w,_,I,k);if(po(I))return E(w,_,I,k);Al(w,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,I),_.return=w,w=_):(n(w,_),_=th(I,w.mode,k),_.return=w,w=_),o(w)):n(w,_)}return A}var As=fw(!0),pw=fw(!1),Du=Zr(null),Lu=null,os=null,Op=null;function Dp(){Op=os=Lu=null}function Lp(t){var e=Du.current;Re(Du),t._currentValue=e}function rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ps(t,e){Lu=t,Op=os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(Op!==t)if(t={context:t,memoizedValue:e,next:null},os===null){if(Lu===null)throw Error(z(308));os=t,Lu.dependencies={lanes:0,firstContext:t}}else os=os.next=t;return e}var hi=null;function Mp(t){hi===null?hi=[t]:hi.push(t)}function mw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Mp(e)):(n.next=i.next,i.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Er=!1;function jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nr(t,n)}return i=r.interleaved,i===null?(e.next=e,Mp(r)):(e.next=i.next,i.next=e),r.interleaved=e,nr(t,n)}function eu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tp(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mu(t,e,n,r){var i=t.updateQueue;Er=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,E=a;switch(f=e,g=n,E.tag){case 1:if(m=E.payload,typeof m=="function"){h=m.call(g,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=E.payload,f=typeof m=="function"?m.call(g,h,f):m,f==null)break e;h=Ue({},h,f);break e;case 2:Er=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Si|=o,t.lanes=o,t.memoizedState=h}}function iy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Oa={},Nn=Zr(Oa),ua=Zr(Oa),ca=Zr(Oa);function fi(t){if(t===Oa)throw Error(z(174));return t}function Vp(t,e){switch(Ae(ca,e),Ae(ua,t),Ae(Nn,Oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}Re(Nn),Ae(Nn,e)}function xs(){Re(Nn),Re(ua),Re(ca)}function vw(t){fi(ca.current);var e=fi(Nn.current),n=jh(e,t.type);e!==n&&(Ae(ua,t),Ae(Nn,n))}function Up(t){ua.current===t&&(Re(Nn),Re(ua))}var Me=Zr(0);function ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function Fp(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var tu=lr.ReactCurrentDispatcher,Xd=lr.ReactCurrentBatchConfig,Ii=0,je=null,Xe=null,rt=null,Vu=!1,Uo=!1,da=0,pP=0;function vt(){throw Error(z(321))}function Bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function zp(t,e,n,r,i,s){if(Ii=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tu.current=t===null||t.memoizedState===null?yP:_P,t=n(r,i),Uo){s=0;do{if(Uo=!1,da=0,25<=s)throw Error(z(301));s+=1,rt=Xe=null,e.updateQueue=null,tu.current=EP,t=n(r,i)}while(Uo)}if(tu.current=Uu,e=Xe!==null&&Xe.next!==null,Ii=0,rt=Xe=je=null,Vu=!1,e)throw Error(z(300));return t}function $p(){var t=da!==0;return da=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?je.memoizedState=rt=t:rt=rt.next=t,rt}function hn(){if(Xe===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?je.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(z(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?je.memoizedState=rt=t:rt=rt.next=t}return rt}function ha(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=hn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ii&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,je.lanes|=d,Si|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Sn(r,e.memoizedState)||(zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,Si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jd(t){var e=hn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yw(){}function _w(t,e){var n=je,r=hn(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,zt=!0),r=r.queue,Hp(Tw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,fa(9,ww.bind(null,n,r,i,e),void 0,null),it===null)throw Error(z(349));Ii&30||Ew(n,e,i)}return i}function Ew(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ww(t,e,n,r){e.value=n,e.getSnapshot=r,Iw(e)&&Sw(t)}function Tw(t,e,n){return n(function(){Iw(e)&&Sw(t)})}function Iw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Sw(t){var e=nr(t,1);e!==null&&wn(e,t,1,-1)}function sy(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:t},e.queue=t,t=t.dispatch=vP.bind(null,je,t),[e.memoizedState,t]}function fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Aw(){return hn().memoizedState}function nu(t,e,n,r){var i=bn();je.flags|=t,i.memoizedState=fa(1|e,n,void 0,r===void 0?null:r)}function Ac(t,e,n,r){var i=hn();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var o=Xe.memoizedState;if(s=o.destroy,r!==null&&Bp(r,o.deps)){i.memoizedState=fa(e,n,s,r);return}}je.flags|=t,i.memoizedState=fa(1|e,n,s,r)}function oy(t,e){return nu(8390656,8,t,e)}function Hp(t,e){return Ac(2048,8,t,e)}function xw(t,e){return Ac(4,2,t,e)}function bw(t,e){return Ac(4,4,t,e)}function Pw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cw(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4,4,Pw.bind(null,e,t),n)}function qp(){}function Rw(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kw(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nw(t,e,n){return Ii&21?(Sn(n,e)||(n=jE(),je.lanes|=n,Si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=n)}function mP(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Xd.transition;Xd.transition={};try{t(!1),e()}finally{Ee=n,Xd.transition=r}}function Ow(){return hn().memoizedState}function gP(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dw(t))Lw(e,n);else if(n=mw(t,e,n,r),n!==null){var i=Dt();wn(n,t,r,i),Mw(n,e,r)}}function vP(t,e,n){var r=Ur(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dw(t))Lw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Sn(a,o)){var l=e.interleaved;l===null?(i.next=i,Mp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mw(t,e,i,r),n!==null&&(i=Dt(),wn(n,t,r,i),Mw(n,e,r))}}function Dw(t){var e=t.alternate;return t===je||e!==null&&e===je}function Lw(t,e){Uo=Vu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tp(t,n)}}var Uu={readContext:dn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},yP={readContext:dn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:oy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nu(4194308,4,Pw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nu(4194308,4,t,e)},useInsertionEffect:function(t,e){return nu(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gP.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:qp,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=mP.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=bn();if(ke){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),it===null)throw Error(z(349));Ii&30||Ew(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,oy(Tw.bind(null,r,s,t),[t]),r.flags|=2048,fa(9,ww.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=it.identifierPrefix;if(ke){var n=Kn,r=Gn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=da++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_P={readContext:dn,useCallback:Rw,useContext:dn,useEffect:Hp,useImperativeHandle:Cw,useInsertionEffect:xw,useLayoutEffect:bw,useMemo:kw,useReducer:Yd,useRef:Aw,useState:function(){return Yd(ha)},useDebugValue:qp,useDeferredValue:function(t){var e=hn();return Nw(e,Xe.memoizedState,t)},useTransition:function(){var t=Yd(ha)[0],e=hn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:_w,useId:Ow,unstable_isNewReconciler:!1},EP={readContext:dn,useCallback:Rw,useContext:dn,useEffect:Hp,useImperativeHandle:Cw,useInsertionEffect:xw,useLayoutEffect:bw,useMemo:kw,useReducer:Jd,useRef:Aw,useState:function(){return Jd(ha)},useDebugValue:qp,useDeferredValue:function(t){var e=hn();return Xe===null?e.memoizedState=t:Nw(e,Xe.memoizedState,t)},useTransition:function(){var t=Jd(ha)[0],e=hn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:_w,useId:Ow,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xc={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=Ur(t),s=Zn(r,i);s.payload=e,n!=null&&(s.callback=n),e=jr(t,s,i),e!==null&&(wn(e,t,i,r),eu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=Ur(t),s=Zn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=jr(t,s,i),e!==null&&(wn(e,t,i,r),eu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=Ur(t),i=Zn(n,r);i.tag=2,e!=null&&(i.callback=e),e=jr(t,i,r),e!==null&&(wn(e,t,r,n),eu(e,t,r))}};function ay(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!sa(n,r)||!sa(i,s):!0}function jw(t,e,n){var r=!1,i=Kr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=Ht(e)?wi:At.current,r=e.contextTypes,s=(r=r!=null)?Is(t,i):Kr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ly(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xc.enqueueReplaceState(e,e.state,null)}function of(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=Ht(e)?wi:At.current,i.context=Is(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xc.enqueueReplaceState(i,i.state,null),Mu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bs(t,e){try{var n="",r=e;do n+=Kx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wP=typeof WeakMap=="function"?WeakMap:Map;function Vw(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bu||(Bu=!0,vf=r),af(t,e)},n}function Uw(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){af(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){af(t,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LP.bind(null,t,e,n),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var TP=lr.ReactCurrentOwner,zt=!1;function Ot(t,e,n,r){e.child=t===null?pw(e,null,n,r):As(e,t.child,n,r)}function hy(t,e,n,r,i){n=n.render;var s=e.ref;return ps(e,i),r=zp(t,e,n,r,s,i),n=$p(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(ke&&n&&Rp(e),e.flags|=1,Ot(t,e,r,i),e.child)}function fy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Zp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fw(t,e,s,r,i)):(t=ou(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sa,n(o,r)&&t.ref===e.ref)return rr(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Fw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(sa(s,r)&&t.ref===e.ref)if(zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,rr(t,e,i)}return lf(t,e,n,r,i)}function Bw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ls,Qt),Qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ls,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(ls,Qt),Qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(ls,Qt),Qt|=r;return Ot(t,e,i,n),e.child}function zw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lf(t,e,n,r,i){var s=Ht(n)?wi:At.current;return s=Is(e,s),ps(e,i),n=zp(t,e,n,r,s,i),r=$p(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(ke&&r&&Rp(e),e.flags|=1,Ot(t,e,n,i),e.child)}function py(t,e,n,r,i){if(Ht(n)){var s=!0;ku(e)}else s=!1;if(ps(e,i),e.stateNode===null)ru(t,e),jw(e,n,r),of(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=Ht(n)?wi:At.current,c=Is(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ly(e,o,r,c),Er=!1;var f=e.memoizedState;o.state=f,Mu(e,r,o,i),l=e.memoizedState,a!==r||f!==l||$t.current||Er?(typeof d=="function"&&(sf(e,n,d,r),l=e.memoizedState),(a=Er||ay(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dn(l):(l=Ht(n)?wi:At.current,l=Is(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ly(e,o,r,l),Er=!1,f=e.memoizedState,o.state=f,Mu(e,r,o,i);var m=e.memoizedState;a!==h||f!==m||$t.current||Er?(typeof g=="function"&&(sf(e,n,g,r),m=e.memoizedState),(c=Er||ay(e,n,c,r,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uf(t,e,n,r,s,i)}function uf(t,e,n,r,i,s){zw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zv(e,n,!1),rr(t,e,s);r=e.stateNode,TP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=As(e,t.child,null,s),e.child=As(e,null,a,s)):Ot(t,e,a,s),e.memoizedState=r.state,i&&Zv(e,n,!0),e.child}function $w(t){var e=t.stateNode;e.pendingContext?Jv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jv(t,e.context,!1),Vp(t,e.containerInfo)}function my(t,e,n,r,i){return Ss(),Np(i),e.flags|=256,Ot(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function df(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hw(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Me,i&1),t===null)return nf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cc(o,r,0,null),t=yi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=df(n),e.memoizedState=cf,t):Wp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fr(a,s):(s=yi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?df(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wp(t,e){return e=Cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xl(t,e,n,r){return r!==null&&Np(r),As(e,t.child,null,n),t=Wp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zd(Error(z(422))),xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cc({mode:"visible",children:r.children},i,0,null),s=yi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&As(e,t.child,null,o),e.child.memoizedState=df(o),e.memoizedState=cf,s);if(!(e.mode&1))return xl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Zd(s,r,void 0),xl(t,e,o,r)}if(a=(o&t.childLanes)!==0,zt||a){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nr(t,i),wn(r,t,i,-1))}return Jp(),r=Zd(Error(z(421))),xl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=MP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yt=Mr(i.nextSibling),Zt=e,ke=!0,_n=null,t!==null&&(an[ln++]=Gn,an[ln++]=Kn,an[ln++]=Ti,Gn=t.id,Kn=t.overflow,Ti=e),e=Wp(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rf(t.return,e,n)}function eh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ot(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ju(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),eh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ju(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}eh(e,!0,n,null,s);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SP(t,e,n){switch(e.tag){case 3:$w(e),Ss();break;case 5:vw(e);break;case 1:Ht(e.type)&&ku(e);break;case 4:Vp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(Du,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Hw(t,e,n):(Ae(Me,Me.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Ae(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,Bw(t,e,n)}return rr(t,e,n)}var Ww,hf,Gw,Kw;Ww=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};Gw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fi(Nn.current);var s=null;switch(n){case"input":i=Oh(t,i),r=Oh(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=Mh(t,i),r=Mh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cu)}Vh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Kw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eo(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AP(t,e,n){var r=e.pendingProps;switch(kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Ht(e.type)&&Ru(),yt(e),null;case 3:return r=e.stateNode,xs(),Re($t),Re(At),Fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Ef(_n),_n=null))),hf(t,e),yt(e),null;case 5:Up(e);var i=fi(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)Gw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return yt(e),null}if(t=fi(Nn.current),Sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cn]=e,r[la]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Co.length;i++)Ce(Co[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Av(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":bv(r,s),Ce("invalid",r)}Vh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",""+a]):Jo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":ml(r),xv(r,s,!0);break;case"textarea":ml(r),Pv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[la]=r,Ww(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uh(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Co.length;i++)Ce(Co[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Av(t,r),i=Oh(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":bv(t,r),i=Mh(t,r),Ce("invalid",t);break;default:i=r}Vh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zo(t,l):typeof l=="number"&&Zo(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jo.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&gp(t,s,l,o))}switch(n){case"input":ml(t),xv(t,r,!1);break;case"textarea":ml(t),Pv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cs(t,!!r.multiple,s,!1):r.defaultValue!=null&&cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Kw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=fi(ca.current),fi(Nn.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:Il(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return yt(e),null;case 13:if(Re(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Yt!==null&&e.mode&1&&!(e.flags&128))hw(),Ss(),e.flags|=98560,s=!1;else if(s=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Cn]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),s=!1}else _n!==null&&(Ef(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Je===0&&(Je=3):Jp())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return xs(),hf(t,e),t===null&&oa(e.stateNode.containerInfo),yt(e),null;case 10:return Lp(e.type._context),yt(e),null;case 17:return Ht(e.type)&&Ru(),yt(e),null;case 19:if(Re(Me),s=e.memoizedState,s===null)return yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Eo(s,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ju(t),o!==null){for(e.flags|=128,Eo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>Ps&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=ju(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return yt(e),null}else 2*qe()-s.renderingStartTime>Ps&&n!==1073741824&&(e.flags|=128,r=!0,Eo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=Me.current,Ae(Me,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return Yp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function xP(t,e){switch(kp(e),e.tag){case 1:return Ht(e.type)&&Ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),Re($t),Re(At),Fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Up(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return xs(),null;case 10:return Lp(e.type._context),null;case 22:case 23:return Yp(),null;case 24:return null;default:return null}}var bl=!1,Tt=!1,bP=typeof WeakSet=="function"?WeakSet:Set,Q=null;function as(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function ff(t,e,n){try{n()}catch(r){ze(t,e,r)}}var vy=!1;function PP(t,e){if(Qh=xu,t=ZE(),Cp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xh={focusedElem:t,selectionRange:n},xu=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var E=m.memoizedProps,A=m.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?E:vn(e.type,E),A);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){ze(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return m=vy,vy=!1,m}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ff(e,n,s)}i=i.next}while(i!==r)}}function bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qw(t){var e=t.alternate;e!==null&&(t.alternate=null,Qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[la],delete e[Zh],delete e[cP],delete e[dP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xw(t){return t.tag===5||t.tag===3||t.tag===4}function yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cu));else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}var ot=null,yn=!1;function vr(t,e,n){for(n=n.child;n!==null;)Yw(t,e,n),n=n.sibling}function Yw(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:Tt||as(n,e);case 6:var r=ot,i=yn;ot=null,vr(t,e,n),ot=r,yn=i,ot!==null&&(yn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(yn?(t=ot,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),ra(t)):Gd(ot,n.stateNode));break;case 4:r=ot,i=yn,ot=n.stateNode.containerInfo,yn=!0,vr(t,e,n),ot=r,yn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ff(n,e,o),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!Tt&&(as(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,vr(t,e,n),Tt=r):vr(t,e,n);break;default:vr(t,e,n)}}function _y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bP),e.forEach(function(r){var i=jP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,yn=!1;break e;case 3:ot=a.stateNode.containerInfo,yn=!0;break e;case 4:ot=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(ot===null)throw Error(z(160));Yw(s,o,i),ot=null,yn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jw(e,t),e=e.sibling}function Jw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),xn(t),r&4){try{Fo(3,t,t.return),bc(3,t)}catch(E){ze(t,t.return,E)}try{Fo(5,t,t.return)}catch(E){ze(t,t.return,E)}}break;case 1:mn(e,t),xn(t),r&512&&n!==null&&as(n,n.return);break;case 5:if(mn(e,t),xn(t),r&512&&n!==null&&as(n,n.return),t.flags&32){var i=t.stateNode;try{Zo(i,"")}catch(E){ze(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&EE(i,s),Uh(a,o);var c=Uh(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?AE(i,h):d==="dangerouslySetInnerHTML"?IE(i,h):d==="children"?Zo(i,h):gp(i,d,h,c)}switch(a){case"input":Dh(i,s);break;case"textarea":wE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?cs(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?cs(i,!!s.multiple,s.defaultValue,!0):cs(i,!!s.multiple,s.multiple?[]:"",!1))}i[la]=s}catch(E){ze(t,t.return,E)}}break;case 6:if(mn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ze(t,t.return,E)}}break;case 3:if(mn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ra(e.containerInfo)}catch(E){ze(t,t.return,E)}break;case 4:mn(e,t),xn(t);break;case 13:mn(e,t),xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qp=qe())),r&4&&_y(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||d,mn(e,t),Tt=c):mn(e,t),xn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:Fo(4,f,f.return);break;case 1:as(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(E){ze(r,n,E)}}break;case 5:as(f,f.return);break;case 22:if(f.memoizedState!==null){wy(h);continue}}g!==null?(g.return=f,Q=g):wy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SE("display",o))}catch(E){ze(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){ze(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mn(e,t),xn(t),r&4&&_y(t);break;case 21:break;default:mn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zo(i,""),r.flags&=-33);var s=yy(t);gf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yy(t);mf(t,a,o);break;default:throw Error(z(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CP(t,e,n){Q=t,Zw(t)}function Zw(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=bl;var c=Tt;if(bl=o,(Tt=l)&&!c)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Ty(i):l!==null?(l.return=o,Q=l):Ty(i);for(;s!==null;)Q=s,Zw(s),s=s.sibling;Q=i,bl=a,Tt=c}Ey(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Ey(t)}}function Ey(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ra(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Tt||e.flags&512&&pf(e)}catch(f){ze(e,e.return,f)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function wy(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ty(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bc(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ze(e,i,l)}}var s=e.return;try{pf(e)}catch(l){ze(e,s,l)}break;case 5:var o=e.return;try{pf(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var RP=Math.ceil,Fu=lr.ReactCurrentDispatcher,Gp=lr.ReactCurrentOwner,cn=lr.ReactCurrentBatchConfig,ve=0,it=null,Qe=null,ct=0,Qt=0,ls=Zr(0),Je=0,pa=null,Si=0,Pc=0,Kp=0,Bo=null,Ft=null,Qp=0,Ps=1/0,Hn=null,Bu=!1,vf=null,Vr=null,Pl=!1,Pr=null,zu=0,zo=0,yf=null,iu=-1,su=0;function Dt(){return ve&6?qe():iu!==-1?iu:iu=qe()}function Ur(t){return t.mode&1?ve&2&&ct!==0?ct&-ct:fP.transition!==null?(su===0&&(su=jE()),su):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:HE(t.type)),t):1}function wn(t,e,n,r){if(50<zo)throw zo=0,yf=null,Error(z(185));Ra(t,n,r),(!(ve&2)||t!==it)&&(t===it&&(!(ve&2)&&(Pc|=n),Je===4&&Ir(t,ct)),qt(t,r),n===1&&ve===0&&!(e.mode&1)&&(Ps=qe()+500,Sc&&ei()))}function qt(t,e){var n=t.callbackNode;fb(t,e);var r=Au(t,t===it?ct:0);if(r===0)n!==null&&kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kv(n),e===1)t.tag===0?hP(Iy.bind(null,t)):uw(Iy.bind(null,t)),lP(function(){!(ve&6)&&ei()}),n=null;else{switch(VE(r)){case 1:n=wp;break;case 4:n=LE;break;case 16:n=Su;break;case 536870912:n=ME;break;default:n=Su}n=aT(n,eT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eT(t,e){if(iu=-1,su=0,ve&6)throw Error(z(327));var n=t.callbackNode;if(ms()&&t.callbackNode!==n)return null;var r=Au(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$u(t,r);else{e=r;var i=ve;ve|=2;var s=nT();(it!==t||ct!==e)&&(Hn=null,Ps=qe()+500,vi(t,e));do try{OP();break}catch(a){tT(t,a)}while(!0);Dp(),Fu.current=s,ve=i,Qe!==null?e=0:(it=null,ct=0,e=Je)}if(e!==0){if(e===2&&(i=Hh(t),i!==0&&(r=i,e=_f(t,i))),e===1)throw n=pa,vi(t,0),Ir(t,r),qt(t,qe()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!kP(i)&&(e=$u(t,r),e===2&&(s=Hh(t),s!==0&&(r=s,e=_f(t,s))),e===1))throw n=pa,vi(t,0),Ir(t,r),qt(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ui(t,Ft,Hn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Qp+500-qe(),10<e)){if(Au(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jh(ui.bind(null,t,Ft,Hn),e);break}ui(t,Ft,Hn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RP(r/1960))-r,10<r){t.timeoutHandle=Jh(ui.bind(null,t,Ft,Hn),r);break}ui(t,Ft,Hn);break;case 5:ui(t,Ft,Hn);break;default:throw Error(z(329))}}}return qt(t,qe()),t.callbackNode===n?eT.bind(null,t):null}function _f(t,e){var n=Bo;return t.current.memoizedState.isDehydrated&&(vi(t,e).flags|=256),t=$u(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&Ef(e)),t}function Ef(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function kP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Kp,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function Iy(t){if(ve&6)throw Error(z(327));ms();var e=Au(t,0);if(!(e&1))return qt(t,qe()),null;var n=$u(t,e);if(t.tag!==0&&n===2){var r=Hh(t);r!==0&&(e=r,n=_f(t,r))}if(n===1)throw n=pa,vi(t,0),Ir(t,e),qt(t,qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ui(t,Ft,Hn),qt(t,qe()),null}function Xp(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Ps=qe()+500,Sc&&ei())}}function Ai(t){Pr!==null&&Pr.tag===0&&!(ve&6)&&ms();var e=ve;ve|=1;var n=cn.transition,r=Ee;try{if(cn.transition=null,Ee=1,t)return t()}finally{Ee=r,cn.transition=n,ve=e,!(ve&6)&&ei()}}function Yp(){Qt=ls.current,Re(ls)}function vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aP(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(kp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ru();break;case 3:xs(),Re($t),Re(At),Fp();break;case 5:Up(r);break;case 4:xs();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:Lp(r.type._context);break;case 22:case 23:Yp()}n=n.return}if(it=t,Qe=t=Fr(t.current,null),ct=Qt=e,Je=0,pa=null,Kp=Pc=Si=0,Ft=Bo=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}hi=null}return t}function tT(t,e){do{var n=Qe;try{if(Dp(),tu.current=Uu,Vu){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vu=!1}if(Ii=0,rt=Xe=je=null,Uo=!1,da=0,Gp.current=null,n===null||n.return===null){Je=1,pa=e,Qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=cy(o);if(g!==null){g.flags&=-257,dy(g,o,a,s,e),g.mode&1&&uy(s,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var E=new Set;E.add(l),e.updateQueue=E}else m.add(l);break e}else{if(!(e&1)){uy(s,c,e),Jp();break e}l=Error(z(426))}}else if(ke&&a.mode&1){var A=cy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),dy(A,o,a,s,e),Np(bs(l,a));break e}}s=l=bs(l,a),Je!==4&&(Je=2),Bo===null?Bo=[s]:Bo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Vw(s,l,e);ry(s,w);break e;case 1:a=l;var _=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Vr===null||!Vr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Uw(s,a,e);ry(s,k);break e}}s=s.return}while(s!==null)}iT(n)}catch(O){e=O,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function nT(){var t=Fu.current;return Fu.current=Uu,t===null?Uu:t}function Jp(){(Je===0||Je===3||Je===2)&&(Je=4),it===null||!(Si&268435455)&&!(Pc&268435455)||Ir(it,ct)}function $u(t,e){var n=ve;ve|=2;var r=nT();(it!==t||ct!==e)&&(Hn=null,vi(t,e));do try{NP();break}catch(i){tT(t,i)}while(!0);if(Dp(),ve=n,Fu.current=r,Qe!==null)throw Error(z(261));return it=null,ct=0,Je}function NP(){for(;Qe!==null;)rT(Qe)}function OP(){for(;Qe!==null&&!ib();)rT(Qe)}function rT(t){var e=oT(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?iT(t):Qe=e,Gp.current=null}function iT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xP(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Qe=null;return}}else if(n=AP(n,e,Qt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Je===0&&(Je=5)}function ui(t,e,n){var r=Ee,i=cn.transition;try{cn.transition=null,Ee=1,DP(t,e,n,r)}finally{cn.transition=i,Ee=r}return null}function DP(t,e,n,r){do ms();while(Pr!==null);if(ve&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(pb(t,s),t===it&&(Qe=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,aT(Su,function(){return ms(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=Ee;Ee=1;var a=ve;ve|=4,Gp.current=null,PP(t,n),Jw(n,t),eP(Xh),xu=!!Qh,Xh=Qh=null,t.current=n,CP(n),sb(),ve=a,Ee=o,cn.transition=s}else t.current=n;if(Pl&&(Pl=!1,Pr=t,zu=i),s=t.pendingLanes,s===0&&(Vr=null),lb(n.stateNode),qt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bu)throw Bu=!1,t=vf,vf=null,t;return zu&1&&t.tag!==0&&ms(),s=t.pendingLanes,s&1?t===yf?zo++:(zo=0,yf=t):zo=0,ei(),null}function ms(){if(Pr!==null){var t=VE(zu),e=cn.transition,n=Ee;try{if(cn.transition=null,Ee=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,zu=0,ve&6)throw Error(z(331));var i=ve;for(ve|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:Fo(8,d,s)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,g=d.return;if(Qw(d),d===c){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var m=s.alternate;if(m!==null){var E=m.child;if(E!==null){m.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fo(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Q=w;break e}Q=s.return}}var _=t.current;for(Q=_;Q!==null;){o=Q;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Q=I;else e:for(o=_;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bc(9,a)}}catch(O){ze(a,a.return,O)}if(a===o){Q=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Q=k;break e}Q=a.return}}if(ve=i,ei(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(_c,t)}catch{}r=!0}return r}finally{Ee=n,cn.transition=e}}return!1}function Sy(t,e,n){e=bs(n,e),e=Vw(t,e,1),t=jr(t,e,1),e=Dt(),t!==null&&(Ra(t,1,e),qt(t,e))}function ze(t,e,n){if(t.tag===3)Sy(t,t,n);else for(;e!==null;){if(e.tag===3){Sy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){t=bs(n,t),t=Uw(e,t,1),e=jr(e,t,1),t=Dt(),e!==null&&(Ra(e,1,t),qt(e,t));break}}e=e.return}}function LP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ct&n)===n&&(Je===4||Je===3&&(ct&130023424)===ct&&500>qe()-Qp?vi(t,0):Kp|=n),qt(t,e)}function sT(t,e){e===0&&(t.mode&1?(e=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):e=1);var n=Dt();t=nr(t,e),t!==null&&(Ra(t,e,n),qt(t,n))}function MP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sT(t,n)}function jP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),sT(t,n)}var oT;oT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zt=!1,SP(t,e,n);zt=!!(t.flags&131072)}else zt=!1,ke&&e.flags&1048576&&cw(e,Ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ru(t,e),t=e.pendingProps;var i=Is(e,At.current);ps(e,n),i=zp(null,e,r,t,i,n);var s=$p();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(s=!0,ku(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jp(e),i.updater=xc,e.stateNode=i,i._reactInternals=e,of(e,r,t,n),e=uf(null,e,r,!0,s,n)):(e.tag=0,ke&&s&&Rp(e),Ot(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=UP(r),t=vn(r,t),i){case 0:e=lf(null,e,r,t,n);break e;case 1:e=py(null,e,r,t,n);break e;case 11:e=hy(null,e,r,t,n);break e;case 14:e=fy(null,e,r,vn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),lf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),py(t,e,r,i,n);case 3:e:{if($w(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gw(t,e),Mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bs(Error(z(423)),e),e=my(t,e,r,n,i);break e}else if(r!==i){i=bs(Error(z(424)),e),e=my(t,e,r,n,i);break e}else for(Yt=Mr(e.stateNode.containerInfo.firstChild),Zt=e,ke=!0,_n=null,n=pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===i){e=rr(t,e,n);break e}Ot(t,e,r,n)}e=e.child}return e;case 5:return vw(e),t===null&&nf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yh(r,i)?o=null:s!==null&&Yh(r,s)&&(e.flags|=32),zw(t,e),Ot(t,e,o,n),e.child;case 6:return t===null&&nf(e),null;case 13:return Hw(t,e,n);case 4:return Vp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=As(e,null,r,n):Ot(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),hy(t,e,r,i,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(Du,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!$t.current){e=rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),rf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ot(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ps(e,n),i=dn(i),r=r(i),e.flags|=1,Ot(t,e,r,n),e.child;case 14:return r=e.type,i=vn(r,e.pendingProps),i=vn(r.type,i),fy(t,e,r,i,n);case 15:return Fw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),ru(t,e),e.tag=1,Ht(r)?(t=!0,ku(e)):t=!1,ps(e,n),jw(e,r,i),of(e,r,i,n),uf(null,e,r,!0,t,n);case 19:return qw(t,e,n);case 22:return Bw(t,e,n)}throw Error(z(156,e.tag))};function aT(t,e){return DE(t,e)}function VP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new VP(t,e,n,r)}function Zp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UP(t){if(typeof t=="function")return Zp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yp)return 11;if(t===_p)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ou(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Zp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ji:return yi(n.children,i,s,e);case vp:o=8,i|=8;break;case Ch:return t=un(12,n,e,i|2),t.elementType=Ch,t.lanes=s,t;case Rh:return t=un(13,n,e,i),t.elementType=Rh,t.lanes=s,t;case kh:return t=un(19,n,e,i),t.elementType=kh,t.lanes=s,t;case vE:return Cc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mE:o=10;break e;case gE:o=9;break e;case yp:o=11;break e;case _p:o=14;break e;case _r:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function yi(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function Cc(t,e,n,r){return t=un(22,t,r,e),t.elementType=vE,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function em(t,e,n,r,i,s,o,a,l){return t=new FP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(s),t}function BP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lT(t){if(!t)return Kr;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Ht(n))return lw(t,n,e)}return e}function uT(t,e,n,r,i,s,o,a,l){return t=em(n,r,!0,t,i,s,o,a,l),t.context=lT(null),n=t.current,r=Dt(),i=Ur(n),s=Zn(r,i),s.callback=e??null,jr(n,s,i),t.current.lanes=i,Ra(t,i,r),qt(t,r),t}function Rc(t,e,n,r){var i=e.current,s=Dt(),o=Ur(i);return n=lT(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(i,e,o),t!==null&&(wn(t,i,o,s),eu(t,i,o)),o}function Hu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tm(t,e){Ay(t,e),(t=t.alternate)&&Ay(t,e)}function zP(){return null}var cT=typeof reportError=="function"?reportError:function(t){console.error(t)};function nm(t){this._internalRoot=t}kc.prototype.render=nm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Rc(t,e,null,null)};kc.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){Rc(null,t,null,null)}),e[tr]=null}};function kc(t){this._internalRoot=t}kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=BE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&$E(t)}};function rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function $P(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Hu(o);s.call(c)}}var o=uT(e,r,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[tr]=o.current,oa(t.nodeType===8?t.parentNode:t),Ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Hu(l);a.call(c)}}var l=em(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=l,t[tr]=l.current,oa(t.nodeType===8?t.parentNode:t),Ai(function(){Rc(e,l,n,r)}),l}function Oc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Hu(o);a.call(l)}}Rc(e,o,t,i)}else o=$P(n,e,t,i,r);return Hu(o)}UE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Po(e.pendingLanes);n!==0&&(Tp(e,n|1),qt(e,qe()),!(ve&6)&&(Ps=qe()+500,ei()))}break;case 13:Ai(function(){var r=nr(t,1);if(r!==null){var i=Dt();wn(r,t,1,i)}}),tm(t,1)}};Ip=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Dt();wn(e,t,134217728,n)}tm(t,134217728)}};FE=function(t){if(t.tag===13){var e=Ur(t),n=nr(t,e);if(n!==null){var r=Dt();wn(n,t,e,r)}tm(t,e)}};BE=function(){return Ee};zE=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Bh=function(t,e,n){switch(e){case"input":if(Dh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ic(r);if(!i)throw Error(z(90));_E(r),Dh(r,i)}}}break;case"textarea":wE(t,n);break;case"select":e=n.value,e!=null&&cs(t,!!n.multiple,e,!1)}};PE=Xp;CE=Ai;var HP={usingClientEntryPoint:!1,Events:[Na,ns,Ic,xE,bE,Xp]},wo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qP={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NE(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||zP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{_c=Cl.inject(qP),kn=Cl}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HP;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rm(e))throw Error(z(200));return BP(t,e,null,n)};nn.createRoot=function(t,e){if(!rm(t))throw Error(z(299));var n=!1,r="",i=cT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=em(t,1,!1,null,null,n,!1,r,i),t[tr]=e.current,oa(t.nodeType===8?t.parentNode:t),new nm(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=NE(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return Ai(t)};nn.hydrate=function(t,e,n){if(!Nc(e))throw Error(z(200));return Oc(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!rm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uT(e,null,t,1,n??null,i,!1,s,o),t[tr]=e.current,oa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kc(e)};nn.render=function(t,e,n){if(!Nc(e))throw Error(z(200));return Oc(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Nc(t))throw Error(z(40));return t._reactRootContainer?(Ai(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};nn.unstable_batchedUpdates=Xp;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Oc(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function dT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dT)}catch(t){console.error(t)}}dT(),dE.exports=nn;var WP=dE.exports,by=WP;bh.createRoot=by.createRoot,bh.hydrateRoot=by.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ma.apply(this,arguments)}var Cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cr||(Cr={}));const Py="popstate";function GP(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Li(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wf("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:qu(s))}function r(i,s){im(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return QP(e,n,r,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function im(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KP(){return Math.random().toString(36).substr(2,8)}function Cy(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n,r){return n===void 0&&(n=null),ma({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Li(e):e,{state:n,key:e&&e.key||r||KP()})}function qu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Cr.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ma({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Cr.Pop;let A=d(),w=A==null?null:A-c;c=A,l&&l({action:a,location:E.location,delta:w})}function f(A,w){a=Cr.Push;let _=wf(E.location,A,w);n&&n(_,A),c=d()+1;let I=Cy(_,c),k=E.createHref(_);try{o.pushState(I,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(k)}s&&l&&l({action:a,location:E.location,delta:1})}function g(A,w){a=Cr.Replace;let _=wf(E.location,A,w);n&&n(_,A),c=d();let I=Cy(_,c),k=E.createHref(_);o.replaceState(I,"",k),s&&l&&l({action:a,location:E.location,delta:0})}function m(A){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof A=="string"?A:qu(A);return _=_.replace(/ $/,"%20"),Ve(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let E={get action(){return a},get location(){return t(i,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Py,h),l=A,()=>{i.removeEventListener(Py,h),l=null}},createHref(A){return e(i,A)},createURL:m,encodeLocation(A){let w=m(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:g,go(A){return o.go(A)}};return E}var Ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ry||(Ry={}));function XP(t,e,n){return n===void 0&&(n="/"),YP(t,e,n)}function YP(t,e,n,r){let i=typeof e=="string"?Li(e):e,s=Cs(i.pathname||"/",n);if(s==null)return null;let o=hT(t);JP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=uC(s);a=aC(o[l],c)}return a}function hT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Br([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ve(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),hT(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sC(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of fT(s.path))i(s,o,l)}),e}function fT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=fT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZP=/^:[\w-]+$/,eC=3,tC=2,nC=1,rC=10,iC=-2,ky=t=>t==="*";function sC(t,e){let n=t.split("/"),r=n.length;return n.some(ky)&&(r+=iC),e&&(r+=tC),n.filter(i=>!ky(i)).reduce((i,s)=>i+(ZP.test(s)?eC:s===""?nC:rC),r)}function oC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aC(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Tf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Br([s,h.pathname]),pathnameBase:fC(Br([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Br([s,h.pathnameBase]))}return o}function Tf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let E=a[h]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const m=a[h];return g&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function lC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),im(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return im(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Li(t):t;return{pathname:n?n.startsWith("/")?n:dC(n,e):e,search:pC(r),hash:mC(i)}}function dC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sm(t,e){let n=hC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function om(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Li(t):(i=ma({},t),Ve(!i.pathname||!i.pathname.includes("?"),rh("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),rh("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),rh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=cC(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Br=t=>t.join("/").replace(/\/\/+/g,"/"),fC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pT=["post","put","patch","delete"];new Set(pT);const vC=["get",...pT];new Set(vC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga.apply(this,arguments)}const Dc=F.createContext(null),mT=F.createContext(null),ur=F.createContext(null),Lc=F.createContext(null),cr=F.createContext({outlet:null,matches:[],isDataRoute:!1}),gT=F.createContext(null);function yC(t,e){let{relative:n}=e===void 0?{}:e;$s()||Ve(!1);let{basename:r,navigator:i}=F.useContext(ur),{hash:s,pathname:o,search:a}=Mc(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Br([r,o])),i.createHref({pathname:l,search:a,hash:s})}function $s(){return F.useContext(Lc)!=null}function Hs(){return $s()||Ve(!1),F.useContext(Lc).location}function vT(t){F.useContext(ur).static||F.useLayoutEffect(t)}function Mi(){let{isDataRoute:t}=F.useContext(cr);return t?kC():_C()}function _C(){$s()||Ve(!1);let t=F.useContext(Dc),{basename:e,future:n,navigator:r}=F.useContext(ur),{matches:i}=F.useContext(cr),{pathname:s}=Hs(),o=JSON.stringify(sm(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return vT(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=om(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Br([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function am(){let{matches:t}=F.useContext(cr),e=t[t.length-1];return e?e.params:{}}function Mc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(ur),{matches:i}=F.useContext(cr),{pathname:s}=Hs(),o=JSON.stringify(sm(i,r.v7_relativeSplatPath));return F.useMemo(()=>om(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function EC(t,e){return wC(t,e)}function wC(t,e,n,r){$s()||Ve(!1);let{navigator:i}=F.useContext(ur),{matches:s}=F.useContext(cr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hs(),d;if(e){var h;let A=typeof e=="string"?Li(e):e;l==="/"||(h=A.pathname)!=null&&h.startsWith(l)||Ve(!1),d=A}else d=c;let f=d.pathname||"/",g=f;if(l!=="/"){let A=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let m=XP(t,{pathname:g}),E=xC(m&&m.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Br([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Br([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&E?F.createElement(Lc.Provider,{value:{location:ga({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Cr.Pop}},E):E}function TC(){let t=RC(),e=gC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const IC=F.createElement(TC,null);class SC extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(cr.Provider,{value:this.props.routeContext},F.createElement(gT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AC(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Dc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(cr.Provider,{value:e},r)}function xC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ve(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:g}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,m=!1,E=null,A=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,E=h.route.errorElement||IC,l&&(c<0&&f===0?(NC("route-fallback"),m=!0,A=null):c===f&&(m=!0,A=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),_=()=>{let I;return g?I=E:m?I=A:h.route.Component?I=F.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,F.createElement(AC,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?F.createElement(SC,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var yT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yT||{}),_T=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_T||{});function bC(t){let e=F.useContext(Dc);return e||Ve(!1),e}function PC(t){let e=F.useContext(mT);return e||Ve(!1),e}function CC(t){let e=F.useContext(cr);return e||Ve(!1),e}function ET(t){let e=CC(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function RC(){var t;let e=F.useContext(gT),n=PC(),r=ET();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kC(){let{router:t}=bC(yT.UseNavigateStable),e=ET(_T.UseNavigateStable),n=F.useRef(!1);return vT(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ga({fromRouteId:e},s)))},[t,e])}const Ny={};function NC(t,e,n){Ny[t]||(Ny[t]=!0)}function OC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Oy(t){let{to:e,replace:n,state:r,relative:i}=t;$s()||Ve(!1);let{future:s,static:o}=F.useContext(ur),{matches:a}=F.useContext(cr),{pathname:l}=Hs(),c=Mi(),d=om(e,sm(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function gn(t){Ve(!1)}function DC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Cr.Pop,navigator:s,static:o=!1,future:a}=t;$s()&&Ve(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:ga({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Li(r));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:m="default"}=r,E=F.useMemo(()=>{let A=Cs(d,l);return A==null?null:{location:{pathname:A,search:h,hash:f,state:g,key:m},navigationType:i}},[l,d,h,f,g,m,i]);return E==null?null:F.createElement(ur.Provider,{value:c},F.createElement(Lc.Provider,{children:n,value:E}))}function LC(t){let{children:e,location:n}=t;return EC(If(e),n)}new Promise(()=>{});function If(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,If(r.props.children,s));return}r.type!==gn&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=If(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wu.apply(this,arguments)}function wT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function MC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jC(t,e){return t.button===0&&(!e||e==="_self")&&!MC(t)}const VC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],FC="6";try{window.__reactRouterVersion=FC}catch{}const BC=F.createContext({isTransitioning:!1}),zC="startTransition",Dy=Lx[zC];function $C(t){let{basename:e,children:n,future:r,window:i}=t,s=F.useRef();s.current==null&&(s.current=GP({window:i,v5Compat:!0}));let o=s.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=F.useCallback(h=>{c&&Dy?Dy(()=>l(h)):l(h)},[l,c]);return F.useLayoutEffect(()=>o.listen(d),[o,d]),F.useEffect(()=>OC(r),[r]),F.createElement(DC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WC=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=wT(e,VC),{basename:g}=F.useContext(ur),m,E=!1;if(typeof c=="string"&&qC.test(c)&&(m=c,HC))try{let I=new URL(window.location.href),k=c.startsWith("//")?new URL(I.protocol+c):new URL(c),O=Cs(k.pathname,g);k.origin===I.origin&&O!=null?c=O+k.search+k.hash:E=!0}catch{}let A=yC(c,{relative:i}),w=KC(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function _(I){r&&r(I),I.defaultPrevented||w(I)}return F.createElement("a",Wu({},f,{href:m||A,onClick:E||s?r:_,ref:n,target:l}))}),Ly=F.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=wT(e,UC),f=Mc(l,{relative:h.relative}),g=Hs(),m=F.useContext(mT),{navigator:E,basename:A}=F.useContext(ur),w=m!=null&&QC(f)&&c===!0,_=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,I=g.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(I=I.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&A&&(k=Cs(k,A)||k);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let L=I===_||!o&&I.startsWith(_)&&I.charAt(O)==="/",S=k!=null&&(k===_||!o&&k.startsWith(_)&&k.charAt(_.length)==="/"),T={isActive:L,isPending:S,isTransitioning:w},b=L?r:void 0,P;typeof s=="function"?P=s(T):P=[s,L?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(T):a;return F.createElement(WC,Wu({},h,{"aria-current":b,className:P,ref:n,style:C,to:l,viewTransition:c}),typeof d=="function"?d(T):d)});var Sf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Sf||(Sf={}));var My;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(My||(My={}));function GC(t){let e=F.useContext(Dc);return e||Ve(!1),e}function KC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Mi(),c=Hs(),d=Mc(t,{relative:o});return F.useCallback(h=>{if(jC(h,n)){h.preventDefault();let f=r!==void 0?r:qu(c)===qu(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}function QC(t,e){e===void 0&&(e={});let n=F.useContext(BC);n==null&&Ve(!1);let{basename:r}=GC(Sf.useViewTransitionState),i=Mc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Cs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Cs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tf(i.pathname,o)!=null||Tf(i.pathname,s)!=null}var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},IT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new YC;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JC=function(t){const e=TT(t);return IT.encodeByteArray(e,!0)},Gu=function(t){return JC(t).replace(/\./g,"")},ST=function(t){try{return IT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=()=>ZC().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof jy>"u")return;const t=jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ST(t[1]);return e&&JSON.parse(e)},jc=()=>{try{return eR()||tR()||nR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AT=t=>{var e,n;return(n=(e=jc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rR=t=>{const e=AT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xT=()=>{var t;return(t=jc())===null||t===void 0?void 0:t.config},bT=t=>{var e;return(e=jc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gu(JSON.stringify(n)),Gu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function aR(){var t;const e=(t=jc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hR(){return!aR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fR(){try{return typeof indexedDB=="object"}catch{return!1}}function pR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mR,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Da.prototype.create)}}class Da{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dr(i,a,r)}}function gR(t,e){return t.replace(vR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vR=/\{\$([^}]+)}/g;function yR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ku(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vy(s)&&Vy(o)){if(!Ku(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _R(t,e){const n=new ER(t,e);return n.subscribe.bind(n)}class ER{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ih),i.error===void 0&&(i.error=ih),i.complete===void 0&&(i.complete=ih);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ih(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SR(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IR(t){return t===ci?void 0:t}function SR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const xR={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},bR=fe.INFO,PR={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},CR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let lm=class{constructor(e){this.name=e,this._logLevel=bR,this._logHandler=CR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};const RR=(t,e)=>e.some(n=>t instanceof n);let Uy,Fy;function kR(){return Uy||(Uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PT=new WeakMap,Af=new WeakMap,CT=new WeakMap,sh=new WeakMap,um=new WeakMap;function OR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PT.set(n,t)}).catch(()=>{}),um.set(e,t),e}function DR(t){if(Af.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Af.set(t,e)}let xf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LR(t){xf=t(xf)}function MR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(oh(this),e,...n);return CT.set(r,e.sort?e.sort():[e]),zr(r)}:NR().includes(t)?function(...e){return t.apply(oh(this),e),zr(PT.get(this))}:function(...e){return zr(t.apply(oh(this),e))}}function jR(t){return typeof t=="function"?MR(t):(t instanceof IDBTransaction&&DR(t),RR(t,kR())?new Proxy(t,xf):t)}function zr(t){if(t instanceof IDBRequest)return OR(t);if(sh.has(t))return sh.get(t);const e=jR(t);return e!==t&&(sh.set(t,e),um.set(e,t)),e}const oh=t=>um.get(t);function VR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zr(o.result),l.oldVersion,l.newVersion,zr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],ah=new Map;function By(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ah.get(e))return ah.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ah.set(e,s),s}LR(t=>({...t,get:(e,n,r)=>By(e,n)||t.get(e,n,r),has:(e,n)=>!!By(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",zy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new lm("@firebase/app"),$R="@firebase/app-compat",HR="@firebase/analytics-compat",qR="@firebase/analytics",WR="@firebase/app-check-compat",GR="@firebase/app-check",KR="@firebase/auth",QR="@firebase/auth-compat",XR="@firebase/database",YR="@firebase/data-connect",JR="@firebase/database-compat",ZR="@firebase/functions",ek="@firebase/functions-compat",tk="@firebase/installations",nk="@firebase/installations-compat",rk="@firebase/messaging",ik="@firebase/messaging-compat",sk="@firebase/performance",ok="@firebase/performance-compat",ak="@firebase/remote-config",lk="@firebase/remote-config-compat",uk="@firebase/storage",ck="@firebase/storage-compat",dk="@firebase/firestore",hk="@firebase/vertexai-preview",fk="@firebase/firestore-compat",pk="firebase",mk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="[DEFAULT]",gk={[bf]:"fire-core",[$R]:"fire-core-compat",[qR]:"fire-analytics",[HR]:"fire-analytics-compat",[GR]:"fire-app-check",[WR]:"fire-app-check-compat",[KR]:"fire-auth",[QR]:"fire-auth-compat",[XR]:"fire-rtdb",[YR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[ek]:"fire-fn-compat",[tk]:"fire-iid",[nk]:"fire-iid-compat",[rk]:"fire-fcm",[ik]:"fire-fcm-compat",[sk]:"fire-perf",[ok]:"fire-perf-compat",[ak]:"fire-rc",[lk]:"fire-rc-compat",[uk]:"fire-gcs",[ck]:"fire-gcs-compat",[dk]:"fire-fst",[fk]:"fire-fst-compat",[hk]:"fire-vertex","fire-js":"fire-js",[pk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,vk=new Map,Cf=new Map;function $y(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(Cf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of Qu.values())$y(n,t);for(const n of vk.values())$y(n,t);return!0}function cm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Da("app","Firebase",yk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=mk;function RT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=xT()),!n)throw $r.create("no-options");const s=Qu.get(i);if(s){if(Ku(n,s.options)&&Ku(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}const o=new AR(i);for(const l of Cf.values())o.addComponent(l);const a=new _k(n,r,o);return Qu.set(i,a),a}function kT(t=Pf){const e=Qu.get(t);if(!e&&t===Pf&&xT())return RT();if(!e)throw $r.create("no-app",{appName:t});return e}function Hr(t,e,n){var r;let i=(r=gk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Rs(new xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="firebase-heartbeat-database",wk=1,va="firebase-heartbeat-store";let lh=null;function NT(){return lh||(lh=VR(Ek,wk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(va)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),lh}async function Tk(t){try{const n=(await NT()).transaction(va),r=await n.objectStore(va).get(OT(t));return await n.done,r}catch(e){if(e instanceof dr)ir.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Hy(t,e){try{const r=(await NT()).transaction(va,"readwrite");await r.objectStore(va).put(e,OT(t)),await r.done}catch(n){if(n instanceof dr)ir.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function OT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=1024,Sk=30*24*60*60*1e3;class Ak{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Sk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qy(),{heartbeatsToSend:r,unsentEntries:i}=xk(this._heartbeatsCache.heartbeats),s=Gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ir.warn(n),""}}}function qy(){return new Date().toISOString().substring(0,10)}function xk(t,e=Ik){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fR()?pR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wy(t){return Gu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){Rs(new xi("platform-logger",e=>new BR(e),"PRIVATE")),Rs(new xi("heartbeat",e=>new Ak(e),"PRIVATE")),Hr(bf,zy,t),Hr(bf,zy,"esm2017"),Hr("fire-js","")}Pk("");var Rf=function(t,e){return Rf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Rf(t,e)};function Vt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var G=function(){return G=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},G.apply(this,arguments)};function bi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function V(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function j(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ue(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function le(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function gs(t){return this instanceof gs?(this.v=t,this):new gs(t)}function Ck(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(m){return Promise.resolve(m).then(g,h)}}function a(g,m){r[g]&&(i[g]=function(E){return new Promise(function(A,w){s.push([g,E,A,w])>1||l(g,E)})},m&&(i[g]=m(i[g])))}function l(g,m){try{c(r[g](m))}catch(E){f(s[0][3],E)}}function c(g){g.value instanceof gs?Promise.resolve(g.value.v).then(d,h):f(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function f(g,m){g(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Rk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ue=="function"?ue(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function DT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kk=DT,LT=new Da("auth","Firebase",DT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new lm("@firebase/auth");function Nk(t,...e){Xu.logLevel<=fe.WARN&&Xu.warn(`Auth (${qs}): ${t}`,...e)}function au(t,...e){Xu.logLevel<=fe.ERROR&&Xu.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw hm(t,...e)}function Tn(t,...e){return hm(t,...e)}function dm(t,e,n){const r=Object.assign(Object.assign({},kk()),{[e]:n});return new Da("auth","Firebase",r).create(e,{appName:t.name})}function _i(t){return dm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ok(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jn(t,"argument-error"),dm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LT.create(t,...e)}function ne(t,e,...n){if(!t)throw hm(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw au(e),new Error(e)}function sr(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Dk(){return Gy()==="http:"||Gy()==="https:"}function Gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dk()||uR()||"connection"in navigator)?navigator.onLine:!0}function Mk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=oR()||cR()}get(){return Lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Ma(3e4,6e4);function pm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ws(t,e,n,r,i={}){return jT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=La(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return lR()||(c.referrerPolicy="no-referrer"),MT.fetch()(VT(t,t.config.apiHost,n,a),c)})}async function jT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jk),e);try{const i=new Fk(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dm(t,d,c);jn(t,d)}}catch(i){if(i instanceof dr)throw i;jn(t,"network-request-failed",{message:String(i)})}}async function Uk(t,e,n,r,i={}){const s=await Ws(t,e,n,r,i);return"mfaPendingCredential"in s&&jn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function VT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fm(t.config,i):`${t.config.apiScheme}://${i}`}class Fk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),Vk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return Ws(t,"POST","/v1/accounts:delete",e)}async function UT(t,e){return Ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zk(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=mm(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$o(uh(i.auth_time)),issuedAtTime:$o(uh(i.iat)),expirationTime:$o(uh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function uh(t){return Number(t)*1e3}function mm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return au("JWT malformed, contained fewer than 3 sections"),null;try{const i=ST(n);return i?JSON.parse(i):(au("Failed to decode base64 JWT payload"),null)}catch(i){return au("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ky(t){const e=mm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&$k(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $k({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ya(t,UT(n,{idToken:r}));ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?FT(s.providerUserInfo):[],a=Wk(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function qk(t){const e=Lt(t);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FT(t){return t.map(e=>{var{providerId:n}=e,r=bi(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e){const n=await jT(t,{},async()=>{const r=La({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=VT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kk(t,e){return Ws(t,"POST","/v2/accounts:revokeToken",pm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Ky(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Gk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new vs;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vs,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ya(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zk(this,e)}reload(){return qk(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await ya(this,Bk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:k,isAnonymous:O,providerData:L,stsTokenManager:S}=n;ne(I&&S,e,"internal-error");const T=vs.fromJSON(this.name,S);ne(typeof I=="string",e,"internal-error"),yr(h,e.name),yr(f,e.name),ne(typeof k=="boolean",e,"internal-error"),ne(typeof O=="boolean",e,"internal-error"),yr(g,e.name),yr(m,e.name),yr(E,e.name),yr(A,e.name),yr(w,e.name),yr(_,e.name);const b=new Yn({uid:I,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:O,photoURL:m,phoneNumber:g,tenantId:E,stsTokenManager:T,createdAt:w,lastLoginAt:_});return L&&Array.isArray(L)&&(b.providerData=L.map(P=>Object.assign({},P))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new vs;i.updateFromServerResponse(n);const s=new Yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?FT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new vs;a.updateFromIdToken(r);const l=new Yn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;function Jn(t){sr(t instanceof Function,"Expected a class definition");let e=Qy.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BT.type="NONE";const Xy=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t,e,n){return`firebase:${t}:${e}:${n}`}class ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=lu(this.userKey,i.apiKey,s),this.fullPersistenceKey=lu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ys(Jn(Xy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Jn(Xy);const o=lu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Yn._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ys(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ys(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GT(e))return"Blackberry";if(KT(e))return"Webos";if($T(e))return"Safari";if((e.includes("chrome/")||HT(e))&&!e.includes("edge/"))return"Chrome";if(WT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zT(t=xt()){return/firefox\//i.test(t)}function $T(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HT(t=xt()){return/crios\//i.test(t)}function qT(t=xt()){return/iemobile/i.test(t)}function WT(t=xt()){return/android/i.test(t)}function GT(t=xt()){return/blackberry/i.test(t)}function KT(t=xt()){return/webos/i.test(t)}function gm(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qk(t=xt()){var e;return gm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xk(){return dR()&&document.documentMode===10}function QT(t=xt()){return gm(t)||WT(t)||KT(t)||GT(t)||/windows phone/i.test(t)||qT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e=[]){let n;switch(t){case"Browser":n=Yy(xt());break;case"Worker":n=`${Yy(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e={}){return Ws(t,"GET","/v2/passwordPolicy",pm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=6;class e1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Zk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jy(this),this.idTokenSubscription=new Jy(this),this.beforeStateQueue=new Yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UT(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(_i(this));const n=e?Lt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Jk(this),n=new e1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Da("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await ys.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Nk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vc(t){return Lt(t)}let Jy=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n1(t){vm=t}function r1(t){return vm.loadJS(t)}function i1(){return vm.gapiScript}function s1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e){const n=cm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ku(s,e??{}))return i;jn(i,"already-initialized")}return n.initialize({options:e})}function a1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function l1(t,e,n){const r=Vc(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=YT(e),{host:o,port:a}=u1(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),c1()}function YT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u1(t){const e=YT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Zy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Zy(o)}}}function Zy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t,e){return Uk(t,"POST","/v1/accounts:signInWithIdp",pm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="http://localhost";class Pi extends JT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bi(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Pi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _s(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_s(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_s(e,n)}buildRequest(){const e={requestUri:d1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=La(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends ja{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Pi._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wn.credential(n,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends ja{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends ja{constructor(){super("twitter.com")}static credential(e,n){return Pi._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Yn._fromIdTokenResponse(e,r,i),o=e0(r);return new ks({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=e0(r);return new ks({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function e0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends dr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ju(e,n,r,i)}}function ZT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(t,s,e,r):s})}async function h1(t,e,n=!1){const r=await ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ks._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(_i(r));const i="reauthenticate";try{const s=await ya(t,ZT(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=mm(s.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),ks._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(t,e,n=!1){if(Qn(t.app))return Promise.reject(_i(t));const r="signIn",i=await ZT(t,r,e),s=await ks._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function m1(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function g1(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function v1(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function y1(t){return Lt(t).signOut()}const Zu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=1e3,E1=10;class tI extends eI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,E1):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tI.type="LOCAL";const w1=tI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI extends eI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nI.type="SESSION";const rI=nI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await T1(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_m("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function S1(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function A1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function x1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function b1(){return iI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebaseLocalStorageDb",P1=1,ec="firebaseLocalStorage",oI="fbase_key";class Va{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fc(t,e){return t.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function C1(){const t=indexedDB.deleteDatabase(sI);return new Va(t).toPromise()}function Of(){const t=indexedDB.open(sI,P1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ec,{keyPath:oI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ec)?e(r):(r.close(),await C1(),e(await Of()))})})}async function t0(t,e,n){const r=Fc(t,!0).put({[oI]:e,value:n});return new Va(r).toPromise()}async function R1(t,e){const n=Fc(t,!1).get(e),r=await new Va(n).toPromise();return r===void 0?null:r.value}function n0(t,e){const n=Fc(t,!0).delete(e);return new Va(n).toPromise()}const k1=800,N1=3;class aI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>N1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance(b1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await A1(),!this.activeServiceWorker)return;this.sender=new I1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||x1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Of();return await t0(e,Zu,"1"),await n0(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>R1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fc(i,!1).getAll();return new Va(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aI.type="LOCAL";const O1=aI;new Ma(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){return e?Jn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends JT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _s(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _s(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _s(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D1(t){return p1(t.auth,new Em(t),t.bypassAuthState)}function L1(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),f1(n,new Em(t),t.bypassAuthState)}async function M1(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),h1(n,new Em(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D1;case"linkViaPopup":case"linkViaRedirect":return M1;case"reauthViaPopup":case"reauthViaRedirect":return L1;default:jn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Ma(2e3,1e4);async function V1(t,e,n){if(Qn(t.app))return Promise.reject(Tn(t,"operation-not-supported-in-this-environment"));const r=Vc(t);Ok(t,e,ym);const i=lI(r,n);return new pi(r,"signInViaPopup",e,i).executeNotNull()}class pi extends uI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=_m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j1.get())};e()}}pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="pendingRedirect",uu=new Map;class F1 extends uI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uu.get(this.auth._key());if(!e){try{const r=await B1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uu.set(this.auth._key(),e)}return this.bypassAuthState||uu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B1(t,e){const n=H1(e),r=$1(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function z1(t,e){uu.set(t._key(),e)}function $1(t){return Jn(t._redirectPersistence)}function H1(t){return lu(U1,t.config.apiKey,t.name)}async function q1(t,e,n=!1){if(Qn(t.app))return Promise.reject(_i(t));const r=Vc(t),i=lI(r,e),o=await new F1(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=10*60*1e3;class G1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W1&&this.cachedEventUids.clear(),this.cachedEventUids.has(r0(e))}saveEventToCache(e){this.cachedEventUids.add(r0(e)),this.lastProcessedEventTime=Date.now()}}function r0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(t,e={}){return Ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y1=/^https?/;async function J1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Q1(t);for(const n of e)try{if(Z1(n))return}catch{}jn(t,"unauthorized-domain")}function Z1(t){const e=kf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y1.test(n))return!1;if(X1.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new Ma(3e4,6e4);function i0(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tN(t){return new Promise((e,n)=>{var r,i,s;function o(){i0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i0(),n(Tn(t,"network-request-failed"))},timeout:eN.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{const a=s1("iframefcb");return On()[a]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},r1(`${i1()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cu=null,e})}let cu=null;function nN(t){return cu=cu||tN(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Ma(5e3,15e3),iN="__/auth/iframe",sN="emulator/auth/iframe",oN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lN(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fm(e,sN):`https://${t.config.authDomain}/${iN}`,r={apiKey:e.apiKey,appName:t.name,v:qs},i=aN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${La(r).slice(1)}`}async function uN(t){const e=await nN(t),n=On().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:lN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),a=On().setTimeout(()=>{s(o)},rN.get());function l(){On().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dN=500,hN=600,fN="_blank",pN="http://localhost";class s0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mN(t,e,n,r=dN,i=hN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},cN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=xt().toLowerCase();n&&(a=HT(c)?fN:n),zT(c)&&(e=e||pN,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,m])=>`${f}${g}=${m},`,"");if(Qk(c)&&a!=="_self")return gN(e||"",a),new s0(null);const h=window.open(e||"",a,d);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new s0(h)}function gN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__/auth/handler",yN="emulator/auth/handler",_N=encodeURIComponent("fac");async function o0(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:i};if(e instanceof ym){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ja){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${_N}=${encodeURIComponent(l)}`:"";return`${EN(t)}?${La(a).slice(1)}${c}`}function EN({config:t}){return t.emulator?fm(t,yN):`https://${t.authDomain}/${vN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="webStorageSupport";class wN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rI,this._completeRedirectFn=q1,this._overrideRedirectResult=z1}async _openPopup(e,n,r,i){var s;sr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await o0(e,n,r,kf(),i);return mN(e,o,_m())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await o0(e,n,r,kf(),i);return S1(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(sr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uN(e),r=new G1(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ch,{type:ch},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ch];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=J1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QT()||$T()||gm()}}const TN=wN;var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AN(t){Rs(new xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XT(t)},c=new t1(r,i,s,l);return a1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new xi("auth-internal",e=>{const n=Vc(e.getProvider("auth").getImmediate());return(r=>new IN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(a0,l0,SN(t)),Hr(a0,l0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=5*60,bN=bT("authIdTokenMaxAge")||xN;let u0=null;const PN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bN)return;const i=n==null?void 0:n.token;u0!==i&&(u0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CN(t=kT()){const e=cm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=o1(t,{popupRedirectResolver:TN,persistence:[O1,w1,rI]}),r=bT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=PN(s.toString());g1(n,o,()=>o(n.currentUser)),m1(n,a=>o(a))}}const i=AT("auth");return i&&l1(n,`http://${i}`),n}function RN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}n1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Tn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",RN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AN("Browser");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,dI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.D=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(P,C,N){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return T.prototype[C].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,b){b||(b=0);var P=Array(16);if(typeof T=="string")for(var C=0;16>C;++C)P[C]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(C=0;16>C;++C)P[C]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],C=S.g[2];var N=S.g[3],R=T+(N^b&(C^N))+P[0]+3614090360&4294967295;T=b+(R<<7&4294967295|R>>>25),R=N+(C^T&(b^C))+P[1]+3905402710&4294967295,N=T+(R<<12&4294967295|R>>>20),R=C+(b^N&(T^b))+P[2]+606105819&4294967295,C=N+(R<<17&4294967295|R>>>15),R=b+(T^C&(N^T))+P[3]+3250441966&4294967295,b=C+(R<<22&4294967295|R>>>10),R=T+(N^b&(C^N))+P[4]+4118548399&4294967295,T=b+(R<<7&4294967295|R>>>25),R=N+(C^T&(b^C))+P[5]+1200080426&4294967295,N=T+(R<<12&4294967295|R>>>20),R=C+(b^N&(T^b))+P[6]+2821735955&4294967295,C=N+(R<<17&4294967295|R>>>15),R=b+(T^C&(N^T))+P[7]+4249261313&4294967295,b=C+(R<<22&4294967295|R>>>10),R=T+(N^b&(C^N))+P[8]+1770035416&4294967295,T=b+(R<<7&4294967295|R>>>25),R=N+(C^T&(b^C))+P[9]+2336552879&4294967295,N=T+(R<<12&4294967295|R>>>20),R=C+(b^N&(T^b))+P[10]+4294925233&4294967295,C=N+(R<<17&4294967295|R>>>15),R=b+(T^C&(N^T))+P[11]+2304563134&4294967295,b=C+(R<<22&4294967295|R>>>10),R=T+(N^b&(C^N))+P[12]+1804603682&4294967295,T=b+(R<<7&4294967295|R>>>25),R=N+(C^T&(b^C))+P[13]+4254626195&4294967295,N=T+(R<<12&4294967295|R>>>20),R=C+(b^N&(T^b))+P[14]+2792965006&4294967295,C=N+(R<<17&4294967295|R>>>15),R=b+(T^C&(N^T))+P[15]+1236535329&4294967295,b=C+(R<<22&4294967295|R>>>10),R=T+(C^N&(b^C))+P[1]+4129170786&4294967295,T=b+(R<<5&4294967295|R>>>27),R=N+(b^C&(T^b))+P[6]+3225465664&4294967295,N=T+(R<<9&4294967295|R>>>23),R=C+(T^b&(N^T))+P[11]+643717713&4294967295,C=N+(R<<14&4294967295|R>>>18),R=b+(N^T&(C^N))+P[0]+3921069994&4294967295,b=C+(R<<20&4294967295|R>>>12),R=T+(C^N&(b^C))+P[5]+3593408605&4294967295,T=b+(R<<5&4294967295|R>>>27),R=N+(b^C&(T^b))+P[10]+38016083&4294967295,N=T+(R<<9&4294967295|R>>>23),R=C+(T^b&(N^T))+P[15]+3634488961&4294967295,C=N+(R<<14&4294967295|R>>>18),R=b+(N^T&(C^N))+P[4]+3889429448&4294967295,b=C+(R<<20&4294967295|R>>>12),R=T+(C^N&(b^C))+P[9]+568446438&4294967295,T=b+(R<<5&4294967295|R>>>27),R=N+(b^C&(T^b))+P[14]+3275163606&4294967295,N=T+(R<<9&4294967295|R>>>23),R=C+(T^b&(N^T))+P[3]+4107603335&4294967295,C=N+(R<<14&4294967295|R>>>18),R=b+(N^T&(C^N))+P[8]+1163531501&4294967295,b=C+(R<<20&4294967295|R>>>12),R=T+(C^N&(b^C))+P[13]+2850285829&4294967295,T=b+(R<<5&4294967295|R>>>27),R=N+(b^C&(T^b))+P[2]+4243563512&4294967295,N=T+(R<<9&4294967295|R>>>23),R=C+(T^b&(N^T))+P[7]+1735328473&4294967295,C=N+(R<<14&4294967295|R>>>18),R=b+(N^T&(C^N))+P[12]+2368359562&4294967295,b=C+(R<<20&4294967295|R>>>12),R=T+(b^C^N)+P[5]+4294588738&4294967295,T=b+(R<<4&4294967295|R>>>28),R=N+(T^b^C)+P[8]+2272392833&4294967295,N=T+(R<<11&4294967295|R>>>21),R=C+(N^T^b)+P[11]+1839030562&4294967295,C=N+(R<<16&4294967295|R>>>16),R=b+(C^N^T)+P[14]+4259657740&4294967295,b=C+(R<<23&4294967295|R>>>9),R=T+(b^C^N)+P[1]+2763975236&4294967295,T=b+(R<<4&4294967295|R>>>28),R=N+(T^b^C)+P[4]+1272893353&4294967295,N=T+(R<<11&4294967295|R>>>21),R=C+(N^T^b)+P[7]+4139469664&4294967295,C=N+(R<<16&4294967295|R>>>16),R=b+(C^N^T)+P[10]+3200236656&4294967295,b=C+(R<<23&4294967295|R>>>9),R=T+(b^C^N)+P[13]+681279174&4294967295,T=b+(R<<4&4294967295|R>>>28),R=N+(T^b^C)+P[0]+3936430074&4294967295,N=T+(R<<11&4294967295|R>>>21),R=C+(N^T^b)+P[3]+3572445317&4294967295,C=N+(R<<16&4294967295|R>>>16),R=b+(C^N^T)+P[6]+76029189&4294967295,b=C+(R<<23&4294967295|R>>>9),R=T+(b^C^N)+P[9]+3654602809&4294967295,T=b+(R<<4&4294967295|R>>>28),R=N+(T^b^C)+P[12]+3873151461&4294967295,N=T+(R<<11&4294967295|R>>>21),R=C+(N^T^b)+P[15]+530742520&4294967295,C=N+(R<<16&4294967295|R>>>16),R=b+(C^N^T)+P[2]+3299628645&4294967295,b=C+(R<<23&4294967295|R>>>9),R=T+(C^(b|~N))+P[0]+4096336452&4294967295,T=b+(R<<6&4294967295|R>>>26),R=N+(b^(T|~C))+P[7]+1126891415&4294967295,N=T+(R<<10&4294967295|R>>>22),R=C+(T^(N|~b))+P[14]+2878612391&4294967295,C=N+(R<<15&4294967295|R>>>17),R=b+(N^(C|~T))+P[5]+4237533241&4294967295,b=C+(R<<21&4294967295|R>>>11),R=T+(C^(b|~N))+P[12]+1700485571&4294967295,T=b+(R<<6&4294967295|R>>>26),R=N+(b^(T|~C))+P[3]+2399980690&4294967295,N=T+(R<<10&4294967295|R>>>22),R=C+(T^(N|~b))+P[10]+4293915773&4294967295,C=N+(R<<15&4294967295|R>>>17),R=b+(N^(C|~T))+P[1]+2240044497&4294967295,b=C+(R<<21&4294967295|R>>>11),R=T+(C^(b|~N))+P[8]+1873313359&4294967295,T=b+(R<<6&4294967295|R>>>26),R=N+(b^(T|~C))+P[15]+4264355552&4294967295,N=T+(R<<10&4294967295|R>>>22),R=C+(T^(N|~b))+P[6]+2734768916&4294967295,C=N+(R<<15&4294967295|R>>>17),R=b+(N^(C|~T))+P[13]+1309151649&4294967295,b=C+(R<<21&4294967295|R>>>11),R=T+(C^(b|~N))+P[4]+4149444226&4294967295,T=b+(R<<6&4294967295|R>>>26),R=N+(b^(T|~C))+P[11]+3174756917&4294967295,N=T+(R<<10&4294967295|R>>>22),R=C+(T^(N|~b))+P[2]+718787259&4294967295,C=N+(R<<15&4294967295|R>>>17),R=b+(N^(C|~T))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var b=T-this.blockSize,P=this.B,C=this.h,N=0;N<T;){if(C==0)for(;N<=b;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(P[C++]=S.charCodeAt(N++),C==this.blockSize){i(this,P),C=0;break}}else for(;N<T;)if(P[C++]=S[N++],C==this.blockSize){i(this,P),C=0;break}}this.h=C,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var b=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=b&255,b/=256;for(this.u(S),S=Array(16),T=b=0;4>T;++T)for(var P=0;32>P;P+=8)S[b++]=this.g[T]>>>P&255;return S};function s(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;for(var b=[],P=!0,C=S.length-1;0<=C;C--){var N=S[C]|0;P&&N==T||(b[C]=N,P=!1)}this.g=b}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return A(c(-S));for(var T=[],b=1,P=0;S>=b;P++)T[P]=S/b|0,b*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return A(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),P=h,C=0;C<S.length;C+=8){var N=Math.min(8,S.length-C),R=parseInt(S.substring(C,C+N),T);8>N?(N=c(Math.pow(T,N)),P=P.j(N).add(c(R))):(P=P.j(b),P=P.add(c(R)))}return P}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var S=0,T=1,b=0;b<this.g.length;b++){var P=this.i(b);S+=(0<=P?P:4294967296+P)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(m(this))return"0";if(E(this))return"-"+A(this).toString(S);for(var T=c(Math.pow(S,6)),b=this,P="";;){var C=k(b,T).g;b=w(b,C.j(T));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=C,m(b))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function m(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=w(this,S),E(S)?-1:m(S)?0:1};function A(S){for(var T=S.g.length,b=[],P=0;P<T;P++)b[P]=~S.g[P];return new o(b,~S.h).add(f)}t.abs=function(){return E(this)?A(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],P=0,C=0;C<=T;C++){var N=P+(this.i(C)&65535)+(S.i(C)&65535),R=(N>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);P=R>>>16,N&=65535,R&=65535,b[C]=R<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(S,T){return S.add(A(T))}t.j=function(S){if(m(this)||m(S))return h;if(E(this))return E(S)?A(this).j(A(S)):A(A(this).j(S));if(E(S))return A(this.j(A(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,b=[],P=0;P<2*T;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var C=0;C<S.g.length;C++){var N=this.i(P)>>>16,R=this.i(P)&65535,$=S.i(C)>>>16,W=S.i(C)&65535;b[2*P+2*C]+=R*W,_(b,2*P+2*C),b[2*P+2*C+1]+=N*W,_(b,2*P+2*C+1),b[2*P+2*C+1]+=R*$,_(b,2*P+2*C+1),b[2*P+2*C+2]+=N*$,_(b,2*P+2*C+2)}for(P=0;P<T;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=T;P<2*T;P++)b[P]=0;return new o(b,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function I(S,T){this.g=S,this.h=T}function k(S,T){if(m(T))throw Error("division by zero");if(m(S))return new I(h,h);if(E(S))return T=k(A(S),T),new I(A(T.g),A(T.h));if(E(T))return T=k(S,A(T)),new I(A(T.g),T.h);if(30<S.g.length){if(E(S)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var b=f,P=T;0>=P.l(S);)b=O(b),P=O(P);var C=L(b,1),N=L(P,1);for(P=L(P,2),b=L(b,2);!m(P);){var R=N.add(P);0>=R.l(S)&&(C=C.add(b),N=R),P=L(P,1),b=L(b,1)}return T=w(S,C.j(T)),new I(C,T)}for(C=h;0<=S.l(T);){for(b=Math.max(1,Math.floor(S.m()/T.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(b),R=N.j(T);E(R)||0<R.l(S);)b-=P,N=c(b),R=N.j(T);m(N)&&(N=f),C=C.add(N),S=w(S,R)}return new I(C,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],P=0;P<T;P++)b[P]=this.i(P)&S.i(P);return new o(b,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],P=0;P<T;P++)b[P]=this.i(P)|S.i(P);return new o(b,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],P=0;P<T;P++)b[P]=this.i(P)^S.i(P);return new o(b,this.h^S.h)};function O(S){for(var T=S.g.length+1,b=[],P=0;P<T;P++)b[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(b,S.h)}function L(S,T){var b=T>>5;T%=32;for(var P=S.g.length-b,C=[],N=0;N<P;N++)C[N]=0<T?S.i(N+b)>>>T|S.i(N+b+1)<<32-T:S.i(N+b);return new o(C,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ei=o}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,Ro,fI,du,Df,pI,mI,gI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var v=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var D=u[x];if(!(D in v))break e;v=v[D]}u=u[u.length-1],x=v[u],p=p(x),p!=x&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var v=0,x=!1,D={next:function(){if(!x&&v<u.length){var M=v++;return{value:p(M,u[M]),done:!1}}return x=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,v){return u.call.apply(u.bind,arguments)}function h(u,p,v){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,x),u.apply(p,D)}}return function(){return u.apply(p,arguments)}}function f(u,p,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function m(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(x,D,M){for(var q=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)q[Te-2]=arguments[Te];return p.prototype[D].apply(x,q)}}function E(u){const p=u.length;if(0<p){const v=Array(p);for(let x=0;x<p;x++)v[x]=u[x];return v}return[]}function A(u,p){for(let v=1;v<arguments.length;v++){const x=arguments[v];if(l(x)){const D=u.length||0,M=x.length||0;u.length=D+M;for(let q=0;q<M;q++)u[D+q]=x[q]}else u.push(x)}}class w{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var O=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function L(u,p,v){for(const x in u)p.call(v,u[x],x,u)}function S(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function T(u){const p={};for(const v in u)p[v]=u[v];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let v,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(v in x)u[v]=x[v];for(let M=0;M<b.length;M++)v=b[M],Object.prototype.hasOwnProperty.call(x,v)&&(u[v]=x[v])}}function C(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=J;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ${constructor(){this.h=this.g=null}add(p,v){const x=W.get();x.set(p,v),this.h?this.h.next=x:this.g=x,this.h=x}}var W=new w(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let be,H=!1,J=new $,Z=()=>{const u=a.Promise.resolve(void 0);be=()=>{u.then(pe)}};var pe=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){N(v)}var p=W;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}H=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return u}();function Ct(u,p){if(ae.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(O){e:{try{k(p.nodeName);var D=!0;break e}catch{}D=!1}D||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:K[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}m(Ct,ae);var K={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),Js=0;function Zs(u,p,v,x,D){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!x,this.ha=D,this.key=++Js,this.da=this.fa=!1}function hr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fr(u){this.src=u,this.g={},this.h=0}fr.prototype.add=function(u,p,v,x,D){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var q=ud(u,p,x,D);return-1<q?(p=u[q],v||(p.fa=!1)):(p=new Zs(p,this.src,M,!!x,D),p.fa=v,u.push(p)),p};function fn(u,p){var v=p.type;if(v in u.g){var x=u.g[v],D=Array.prototype.indexOf.call(x,p,void 0),M;(M=0<=D)&&Array.prototype.splice.call(x,D,1),M&&(hr(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ud(u,p,v,x){for(var D=0;D<u.length;++D){var M=u[D];if(!M.da&&M.listener==p&&M.capture==!!v&&M.ha==x)return D}return-1}var cd="closure_lm_"+(1e6*Math.random()|0),dd={};function Eg(u,p,v,x,D){if(Array.isArray(p)){for(var M=0;M<p.length;M++)Eg(u,p[M],v,x,D);return null}return v=Ig(v),u&&u[Wt]?u.K(p,v,c(x)?!!x.capture:!1,D):BA(u,p,v,!1,x,D)}function BA(u,p,v,x,D,M){if(!p)throw Error("Invalid event type");var q=c(D)?!!D.capture:!!D,Te=fd(u);if(Te||(u[cd]=Te=new fr(u)),v=Te.add(p,v,x,q,M),v.proxy)return v;if(x=zA(),v.proxy=x,x.src=u,x.listener=v,u.addEventListener)Ie||(D=q),D===void 0&&(D=!1),u.addEventListener(p.toString(),x,D);else if(u.attachEvent)u.attachEvent(Tg(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function zA(){function u(v){return p.call(u.src,u.listener,v)}const p=$A;return u}function wg(u,p,v,x,D){if(Array.isArray(p))for(var M=0;M<p.length;M++)wg(u,p[M],v,x,D);else x=c(x)?!!x.capture:!!x,v=Ig(v),u&&u[Wt]?(u=u.i,p=String(p).toString(),p in u.g&&(M=u.g[p],v=ud(M,v,x,D),-1<v&&(hr(M[v]),Array.prototype.splice.call(M,v,1),M.length==0&&(delete u.g[p],u.h--)))):u&&(u=fd(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ud(p,v,x,D)),(v=-1<u?p[u]:null)&&hd(v))}function hd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Wt])fn(p.i,u);else{var v=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(v,x,u.capture):p.detachEvent?p.detachEvent(Tg(v),x):p.addListener&&p.removeListener&&p.removeListener(x),(v=fd(p))?(fn(v,u),v.h==0&&(v.src=null,p[cd]=null)):hr(u)}}}function Tg(u){return u in dd?dd[u]:dd[u]="on"+u}function $A(u,p){if(u.da)u=!0;else{p=new Ct(p,this);var v=u.listener,x=u.ha||u.src;u.fa&&hd(u),u=v.call(x,p)}return u}function fd(u){return u=u[cd],u instanceof fr?u:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ig(u){return typeof u=="function"?u:(u[pd]||(u[pd]=function(p){return u.handleEvent(p)}),u[pd])}function pt(){ce.call(this),this.i=new fr(this),this.M=this,this.F=null}m(pt,ce),pt.prototype[Wt]=!0,pt.prototype.removeEventListener=function(u,p,v,x){wg(this,u,p,v,x)};function Rt(u,p){var v,x=u.F;if(x)for(v=[];x;x=x.F)v.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new ae(p,u);else if(p instanceof ae)p.target=p.target||u;else{var D=p;p=new ae(x,u),P(p,D)}if(D=!0,v)for(var M=v.length-1;0<=M;M--){var q=p.g=v[M];D=Ya(q,x,!0,p)&&D}if(q=p.g=u,D=Ya(q,x,!0,p)&&D,D=Ya(q,x,!1,p)&&D,v)for(M=0;M<v.length;M++)q=p.g=v[M],D=Ya(q,x,!1,p)&&D}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],x=0;x<v.length;x++)hr(v[x]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,v,x){return this.i.add(String(u),p,!1,v,x)},pt.prototype.L=function(u,p,v,x){return this.i.add(String(u),p,!0,v,x)};function Ya(u,p,v,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var D=!0,M=0;M<p.length;++M){var q=p[M];if(q&&!q.da&&q.capture==v){var Te=q.listener,st=q.ha||q.src;q.fa&&fn(u.i,q),D=Te.call(st,x)!==!1&&D}}return D&&!x.defaultPrevented}function Sg(u,p,v){if(typeof u=="function")v&&(u=f(u,v));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Ag(u){u.g=Sg(()=>{u.g=null,u.i&&(u.i=!1,Ag(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class HA extends ce{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ag(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(u){ce.call(this),this.h=u,this.g={}}m(eo,ce);var xg=[];function bg(u){L(u.g,function(p,v){this.g.hasOwnProperty(v)&&hd(p)},u),u.g={}}eo.prototype.N=function(){eo.aa.N.call(this),bg(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=a.JSON.stringify,qA=a.JSON.parse,WA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gd(){}gd.prototype.h=null;function Pg(u){return u.h||(u.h=u.i())}function Cg(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vd(){ae.call(this,"d")}m(vd,ae);function yd(){ae.call(this,"c")}m(yd,ae);var ii={},Rg=null;function Ja(){return Rg=Rg||new pt}ii.La="serverreachability";function kg(u){ae.call(this,ii.La,u)}m(kg,ae);function no(u){const p=Ja();Rt(p,new kg(p))}ii.STAT_EVENT="statevent";function Ng(u,p){ae.call(this,ii.STAT_EVENT,u),this.stat=p}m(Ng,ae);function kt(u){const p=Ja();Rt(p,new Ng(p,u))}ii.Ma="timingevent";function Og(u,p){ae.call(this,ii.Ma,u),this.size=p}m(Og,ae);function ro(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function GA(u,p,v,x,D,M){u.info(function(){if(u.g)if(M)for(var q="",Te=M.split("&"),st=0;st<Te.length;st++){var ye=Te[st].split("=");if(1<ye.length){var mt=ye[0];ye=ye[1];var gt=mt.split("_");q=2<=gt.length&&gt[1]=="type"?q+(mt+"="+ye+"&"):q+(mt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+p+`
`+v+`
`+q})}function KA(u,p,v,x,D,M,q){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+p+`
`+v+`
`+M+" "+q})}function Ui(u,p,v,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+XA(u,v)+(x?" "+x:"")})}function QA(u,p){u.info(function(){return"TIMEOUT: "+p})}io.prototype.info=function(){};function XA(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var x=v[u];if(!(2>x.length)){var D=x[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<D.length;q++)D[q]=""}}}}return md(v)}catch{return p}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function el(){}m(el,gd),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},_d=new el;function pr(u,p,v,x){this.j=u,this.i=p,this.l=v,this.R=x||1,this.U=new eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lg}function Lg(){this.i=null,this.g="",this.h=!1}var Mg={},Ed={};function wd(u,p,v){u.L=1,u.v=il(zn(p)),u.m=v,u.P=!0,jg(u,null)}function jg(u,p){u.F=Date.now(),tl(u),u.A=zn(u.v);var v=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),Yg(v.i,"t",x),u.C=0,v=u.j.J,u.h=new Lg,u.g=mv(u.j,v?p:null,!u.m),0<u.O&&(u.M=new HA(f(u.Y,u,u.g),u.O)),p=u.U,v=u.g,x=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(xg[0]=D.toString()),D=xg);for(var M=0;M<D.length;M++){var q=Eg(v,D[M],x||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),no(),GA(u.i,u.u,u.A,u.l,u.R,u.m)}pr.prototype.ca=function(u){u=u.target;const p=this.M;p&&$n(u)==3?p.j():this.Y(u)},pr.prototype.Y=function(u){try{if(u==this.g)e:{const gt=$n(this.g);var p=this.g.Ba();const zi=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||iv(this.g)))){this.J||gt!=4||p==7||(p==8||0>=zi?no(3):no(2)),Td(this);var v=this.g.Z();this.X=v;t:if(Vg(this)){var x=iv(this.g);u="";var D=x.length,M=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),so(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<D;p++)this.h.h=!0,u+=this.h.i.decode(x[p],{stream:!(M&&p==D-1)});x.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=v==200,KA(this.i,this.u,this.A,this.l,this.R,gt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,st=this.g;if((Te=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Te)){var ye=Te;break t}}ye=null}if(v=ye)Ui(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Id(this,v);else{this.o=!1,this.s=3,kt(12),si(this),so(this);break e}}if(this.P){v=!0;let pn;for(;!this.J&&this.C<q.length;)if(pn=YA(this,q),pn==Ed){gt==4&&(this.s=4,kt(14),v=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Mg){this.s=4,kt(15),Ui(this.i,this.l,q,"[Invalid Chunk]"),v=!1;break}else Ui(this.i,this.l,pn,null),Id(this,pn);if(Vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||q.length!=0||this.h.h||(this.s=1,kt(16),v=!1),this.o=this.o&&v,!v)Ui(this.i,this.l,q,"[Invalid Chunked Response]"),si(this),so(this);else if(0<q.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Cd(mt),mt.M=!0,kt(11))}}else Ui(this.i,this.l,q,null),Id(this,q);gt==4&&si(this),this.o&&!this.J&&(gt==4?dv(this.j,this):(this.o=!1,tl(this)))}else px(this.g),v==400&&0<q.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),si(this),so(this)}}}catch{}finally{}};function Vg(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function YA(u,p){var v=u.C,x=p.indexOf(`
`,v);return x==-1?Ed:(v=Number(p.substring(v,x)),isNaN(v)?Mg:(x+=1,x+v>p.length?Ed:(p=p.slice(x,x+v),u.C=x+v,p)))}pr.prototype.cancel=function(){this.J=!0,si(this)};function tl(u){u.S=Date.now()+u.I,Ug(u,u.I)}function Ug(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ro(f(u.ba,u),p)}function Td(u){u.B&&(a.clearTimeout(u.B),u.B=null)}pr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(QA(this.i,this.A),this.L!=2&&(no(),kt(17)),si(this),this.s=2,so(this)):Ug(this,this.S-u)};function so(u){u.j.G==0||u.J||dv(u.j,u)}function si(u){Td(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,bg(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Id(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||Sd(v.h,u))){if(!u.K&&Sd(v.h,u)&&v.G==3){try{var x=v.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)cl(v),ll(v);else break e;Pd(v),kt(18)}}else v.za=D[1],0<v.za-v.T&&37500>D[2]&&v.F&&v.v==0&&!v.C&&(v.C=ro(f(v.Za,v),6e3));if(1>=zg(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ai(v,11)}else if((u.K||v.g==u)&&cl(v),!_(p))for(D=v.Da.g.parse(p),p=0;p<D.length;p++){let ye=D[p];if(v.T=ye[0],ye=ye[1],v.G==2)if(ye[0]=="c"){v.K=ye[1],v.ia=ye[2];const mt=ye[3];mt!=null&&(v.la=mt,v.j.info("VER="+v.la));const gt=ye[4];gt!=null&&(v.Aa=gt,v.j.info("SVER="+v.Aa));const zi=ye[5];zi!=null&&typeof zi=="number"&&0<zi&&(x=1.5*zi,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const pn=u.g;if(pn){const hl=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var M=x.h;M.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ad(M,M.h),M.h=null))}if(x.D){const Rd=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(x.ya=Rd,Pe(x.I,x.D,Rd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var q=u;if(x.qa=pv(x,x.J?x.ia:null,x.W),q.K){$g(x.h,q);var Te=q,st=x.L;st&&(Te.I=st),Te.B&&(Td(Te),tl(Te)),x.g=q}else uv(x);0<v.i.length&&ul(v)}else ye[0]!="stop"&&ye[0]!="close"||ai(v,7);else v.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ai(v,7):bd(v):ye[0]!="noop"&&v.l&&v.l.ta(ye),v.v=0)}}no(4)}catch{}}var JA=class{constructor(u,p){this.g=u,this.map=p}};function Fg(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bg(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zg(u){return u.h?1:u.g?u.g.size:0}function Sd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ad(u,p){u.g?u.g.add(p):u.h=p}function $g(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Fg.prototype.cancel=function(){if(this.i=Hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Hg(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return E(u.i)}function ZA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],v=u.length,x=0;x<v;x++)p.push(u[x]);return p}p=[],v=0;for(x in u)p[v++]=u[x];return p}function ex(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const x in u)p[v++]=x;return p}}}function qg(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=ex(u),x=ZA(u),D=x.length,M=0;M<D;M++)p.call(void 0,x[M],v&&v[M],u)}var Wg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tx(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var x=u[v].indexOf("="),D=null;if(0<=x){var M=u[v].substring(0,x);D=u[v].substring(x+1)}else M=u[v];p(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function oi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof oi){this.h=u.h,nl(this,u.j),this.o=u.o,this.g=u.g,rl(this,u.s),this.l=u.l;var p=u.i,v=new lo;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Gg(this,v),this.m=u.m}else u&&(p=String(u).match(Wg))?(this.h=!1,nl(this,p[1]||"",!0),this.o=oo(p[2]||""),this.g=oo(p[3]||"",!0),rl(this,p[4]),this.l=oo(p[5]||"",!0),Gg(this,p[6]||"",!0),this.m=oo(p[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}oi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ao(p,Kg,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ao(p,Kg,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ao(v,v.charAt(0)=="/"?ix:rx,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ao(v,ox)),u.join("")};function zn(u){return new oi(u)}function nl(u,p,v){u.j=v?oo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function rl(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Gg(u,p,v){p instanceof lo?(u.i=p,ax(u.i,u.h)):(v||(p=ao(p,sx)),u.i=new lo(p,u.h))}function Pe(u,p,v){u.i.set(p,v)}function il(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function oo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ao(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,nx),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Kg=/[#\/\?@]/g,rx=/[#\?:]/g,ix=/[#\?]/g,sx=/[#\?@]/g,ox=/#/g;function lo(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&tx(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=lo.prototype,t.add=function(u,p){mr(this),this.i=null,u=Fi(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Qg(u,p){mr(u),p=Fi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Xg(u,p){return mr(u),p=Fi(u,p),u.g.has(p)}t.forEach=function(u,p){mr(this),this.g.forEach(function(v,x){v.forEach(function(D){u.call(p,D,x,this)},this)},this)},t.na=function(){mr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let x=0;x<p.length;x++){const D=u[x];for(let M=0;M<D.length;M++)v.push(p[x])}return v},t.V=function(u){mr(this);let p=[];if(typeof u=="string")Xg(this,u)&&(p=p.concat(this.g.get(Fi(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},t.set=function(u,p){return mr(this),this.i=null,u=Fi(this,u),Xg(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Yg(u,p,v){Qg(u,p),0<v.length&&(u.i=null,u.g.set(Fi(u,p),E(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var x=p[v];const M=encodeURIComponent(String(x)),q=this.V(x);for(x=0;x<q.length;x++){var D=M;q[x]!==""&&(D+="="+encodeURIComponent(String(q[x]))),u.push(D)}}return this.i=u.join("&")};function Fi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function ax(u,p){p&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(v,x){var D=x.toLowerCase();x!=D&&(Qg(this,x),Yg(this,D,v))},u)),u.j=p}function lx(u,p){const v=new io;if(a.Image){const x=new Image;x.onload=g(gr,v,"TestLoadImage: loaded",!0,p,x),x.onerror=g(gr,v,"TestLoadImage: error",!1,p,x),x.onabort=g(gr,v,"TestLoadImage: abort",!1,p,x),x.ontimeout=g(gr,v,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function ux(u,p){const v=new io,x=new AbortController,D=setTimeout(()=>{x.abort(),gr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(M=>{clearTimeout(D),M.ok?gr(v,"TestPingServer: ok",!0,p):gr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(D),gr(v,"TestPingServer: error",!1,p)})}function gr(u,p,v,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(v)}catch{}}function cx(){this.g=new WA}function dx(u,p,v){const x=v||"";try{qg(u,function(D,M){let q=D;c(D)&&(q=md(D)),p.push(x+M+"="+encodeURIComponent(q))})}catch(D){throw p.push(x+"type="+encodeURIComponent("_badmap")),D}}function sl(u){this.l=u.Ub||null,this.j=u.eb||!1}m(sl,gd),sl.prototype.g=function(){return new ol(this.l,this.j)},sl.prototype.i=function(u){return function(){return u}}({});function ol(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(ol,pt),t=ol.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,co(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?uo(this):co(this),this.readyState==3&&Jg(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,uo(this))},t.Qa=function(u){this.g&&(this.response=u,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,co(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function co(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Zg(u){let p="";return L(u,function(v,x){p+=x,p+=":",p+=v,p+=`\r
`}),p}function xd(u,p,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=Zg(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Pe(u,p,v))}function Be(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Be,pt);var hx=/^https?$/i,fx=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?Pg(this.o):Pg(_d),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(M){ev(this,M);return}if(u=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)v.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const M of x.keys())v.set(M,x.get(M));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(M=>M.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fx,p,void 0))||x||D||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of v)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rv(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){ev(this,M)}};function ev(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,tv(u),al(u)}function tv(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Rt(this,"complete"),Rt(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nv(this):this.bb())},t.bb=function(){nv(this)};function nv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)Sg(u.Ea,0,u);else if(Rt(u,"readystatechange"),$n(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var x;if(x=q===0){var D=String(u.D).match(Wg)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),x=!hx.test(D?D.toLowerCase():"")}v=x}if(v)Rt(u,"complete"),Rt(u,"success");else{u.m=6;try{var M=2<$n(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",tv(u)}}finally{al(u)}}}}function al(u,p){if(u.g){rv(u);const v=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Rt(u,"ready");try{v.onreadystatechange=x}catch{}}}function rv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),qA(p)}};function iv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function px(u){const p={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(_(u[x]))continue;var v=C(u[x]);const D=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const M=p[D]||[];p[D]=M,M.push(v)}S(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function sv(u){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,u),this.cb=ho("retryDelaySeedMs",1e4,u),this.Wa=ho("forwardChannelMaxRetries",2,u),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fg(u&&u.concurrentRequestLimit),this.Da=new cx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sv.prototype,t.la=8,t.G=1,t.connect=function(u,p,v,x){kt(0),this.W=u,this.H=p||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=pv(this,null,this.W),ul(this)};function bd(u){if(ov(u),u.G==3){var p=u.U++,v=zn(u.I);if(Pe(v,"SID",u.K),Pe(v,"RID",p),Pe(v,"TYPE","terminate"),fo(u,v),p=new pr(u,u.j,p),p.L=2,p.v=il(zn(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=mv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),tl(p)}fv(u)}function ll(u){u.g&&(Cd(u),u.g.cancel(),u.g=null)}function ov(u){ll(u),u.u&&(a.clearTimeout(u.u),u.u=null),cl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ul(u){if(!Bg(u.h)&&!u.s){u.s=!0;var p=u.Ga;be||Z(),H||(be(),H=!0),J.add(p,u),u.B=0}}function mx(u,p){return zg(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ro(f(u.Ga,u,p),hv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new pr(this,this.j,u);let M=this.o;if(this.S&&(M?(M=T(M),P(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=lv(this,D,p),v=zn(this.I),Pe(v,"RID",u),Pe(v,"CVER",22),this.D&&Pe(v,"X-HTTP-Session-Id",this.D),fo(this,v),M&&(this.O?p="headers="+encodeURIComponent(String(Zg(M)))+"&"+p:this.m&&xd(v,this.m,M)),Ad(this.h,D),this.Ua&&Pe(v,"TYPE","init"),this.P?(Pe(v,"$req",p),Pe(v,"SID","null"),D.T=!0,wd(D,v,null)):wd(D,v,p),this.G=2}}else this.G==3&&(u?av(this,u):this.i.length==0||Bg(this.h)||av(this))};function av(u,p){var v;p?v=p.l:v=u.U++;const x=zn(u.I);Pe(x,"SID",u.K),Pe(x,"RID",v),Pe(x,"AID",u.T),fo(u,x),u.m&&u.o&&xd(x,u.m,u.o),v=new pr(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=lv(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ad(u.h,v),wd(v,x,p)}function fo(u,p){u.H&&L(u.H,function(v,x){Pe(p,x,v)}),u.l&&qg({},function(v,x){Pe(p,x,v)})}function lv(u,p,v){v=Math.min(u.i.length,v);var x=u.l?f(u.l.Na,u.l,u):null;e:{var D=u.i;let M=-1;for(;;){const q=["count="+v];M==-1?0<v?(M=D[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Te=!0;for(let st=0;st<v;st++){let ye=D[st].g;const mt=D[st].map;if(ye-=M,0>ye)M=Math.max(0,D[st].g-100),Te=!1;else try{dx(mt,q,"req"+ye+"_")}catch{x&&x(mt)}}if(Te){x=q.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,x}function uv(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;be||Z(),H||(be(),H=!0),J.add(p,u),u.v=0}}function Pd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ro(f(u.Fa,u),hv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,cv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ro(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),ll(this),cv(this))};function Cd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function cv(u){u.g=new pr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=zn(u.qa);Pe(p,"RID","rpc"),Pe(p,"SID",u.K),Pe(p,"AID",u.T),Pe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(p,"TO",u.ja),Pe(p,"TYPE","xmlhttp"),fo(u,p),u.m&&u.o&&xd(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=il(zn(p)),v.m=null,v.P=!0,jg(v,u)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),Pd(this),kt(19))};function cl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function dv(u,p){var v=null;if(u.g==p){cl(u),Cd(u),u.g=null;var x=2}else if(Sd(u.h,p))v=p.D,$g(u.h,p),x=1;else return;if(u.G!=0){if(p.o)if(x==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var D=u.B;x=Ja(),Rt(x,new Og(x,v)),ul(u)}else uv(u);else if(D=p.s,D==3||D==0&&0<p.X||!(x==1&&mx(u,p)||x==2&&Pd(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),D){case 1:ai(u,5);break;case 4:ai(u,10);break;case 3:ai(u,6);break;default:ai(u,2)}}}function hv(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function ai(u,p){if(u.j.info("Error code "+p),p==2){var v=f(u.fb,u),x=u.Xa;const D=!x;x=new oi(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nl(x,"https"),il(x),D?lx(x.toString(),v):ux(x.toString(),v)}else kt(2);u.G=0,u.l&&u.l.sa(p),fv(u),ov(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function fv(u){if(u.G=0,u.ka=[],u.l){const p=Hg(u.h);(p.length!=0||u.i.length!=0)&&(A(u.ka,p),A(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function pv(u,p,v){var x=v instanceof oi?zn(v):new oi(v);if(x.g!="")p&&(x.g=p+"."+x.g),rl(x,x.s);else{var D=a.location;x=D.protocol,p=p?p+"."+D.hostname:D.hostname,D=+D.port;var M=new oi(null);x&&nl(M,x),p&&(M.g=p),D&&rl(M,D),v&&(M.l=v),x=M}return v=u.D,p=u.ya,v&&p&&Pe(x,v,p),Pe(x,"VER",u.la),fo(u,x),x}function mv(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Be(new sl({eb:v})):new Be(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gv(){}t=gv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(u,p){return new Gt(u,p)};function Gt(u,p){pt.call(this),this.g=new sv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Bi(this)}m(Gt,pt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){bd(this.g)},Gt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=md(u),u=v);p.i.push(new JA(p.Ya++,u)),p.G==3&&ul(p)},Gt.prototype.N=function(){this.g.l=null,delete this.j,bd(this.g),delete this.g,Gt.aa.N.call(this)};function vv(u){vd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}m(vv,vd);function yv(){yd.call(this),this.status=1}m(yv,yd);function Bi(u){this.g=u}m(Bi,gv),Bi.prototype.ua=function(){Rt(this.g,"a")},Bi.prototype.ta=function(u){Rt(this.g,new vv(u))},Bi.prototype.sa=function(u){Rt(this.g,new yv)},Bi.prototype.ra=function(){Rt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,gI=function(){return new dl},mI=function(){return Ja()},pI=ii,Df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,du=Za,Dg.COMPLETE="complete",fI=Dg,Cg.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ro=Cg,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,hI=Be}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new lm("@firebase/firestore");function To(){return Ci.logLevel}function X(t,...e){if(Ci.logLevel<=fe.DEBUG){const n=e.map(wm);Ci.debug(`Firestore (${Gs}): ${t}`,...n)}}function or(t,...e){if(Ci.logLevel<=fe.ERROR){const n=e.map(wm);Ci.error(`Firestore (${Gs}): ${t}`,...n)}}function Ns(t,...e){if(Ci.logLevel<=fe.WARN){const n=e.map(wm);Ci.warn(`Firestore (${Gs}): ${t}`,...n)}}function wm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function we(t,e){t||re()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class NN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new wt(e)}}class DN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new MN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Os(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ze(0,0))}static max(){return new ie(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends _a{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const UN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends _a{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return UN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te($e.fromString(e))}static fromName(e){return new te($e.fromString(e).popFirst(5))}static empty(){return new te($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new $e(e.slice()))}}function FN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new Qr(i,te.empty(),e)}function BN(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(ie.min(),te.empty(),-1)}static max(){return new Qr(ie.max(),te.empty(),-1)}}function zN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==$N)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function qN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tm.oe=-1;function Bc(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function WN(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=s??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new at(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new dt(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new EI("Invalid base64 string: "+s):s}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(we(!!t),typeof t=="string"){let e=0;const n=GN.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sm(t){const e=t.mapValue.fields.__previous_value__;return Im(e)?Sm(e):e}function Ea(t){const e=Xr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol={mapValue:{}};function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Im(t)?4:XN(t)?9007199254740991:QN(t)?10:11:re()}function Vn(t,e){if(t===e)return!0;const n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ea(t).isEqual(Ea(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xr(i.timestampValue),a=Xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ri(i.bytesValue).isEqual(Ri(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?tc(o)===tc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(h0(o)!==h0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vn(o[l],a[l])))return!1;return!0}(t,e);default:return re()}}function Ta(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function Ds(t,e){if(t===e)return 0;const n=ki(t),r=ki(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return p0(t.timestampValue,e.timestampValue);case 4:return p0(Ea(t),Ea(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ri(s),l=Ri(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=_e(a[c],l[c]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(He(s.latitude),He(o.latitude));return a!==0?a:_e(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},f=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,E=_e(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:m0(g,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ol.mapValue&&o===Ol.mapValue)return 0;if(s===Ol.mapValue)return 1;if(o===Ol.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=_e(l[h],d[h]);if(f!==0)return f;const g=Ds(a[l[h]],c[d[h]]);if(g!==0)return g}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw re()}}function p0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Xr(t),r=Xr(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function m0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ds(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function Ls(t){return Lf(t)}function Lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Lf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Lf(n.fields[o])}`;return i+"}"}(t.mapValue):re()}function Mf(t){return!!t&&"integerValue"in t}function Am(t){return!!t&&"arrayValue"in t}function g0(t){return!!t&&"nullValue"in t}function v0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hu(t){return!!t&&"mapValue"in t}function QN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ho(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ho(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ho(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ho(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ji(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bt(Ho(this.value))}}function wI(t){const e=[];return ji(t.fields,(n,r)=>{const i=new lt([n]);if(hu(r)){const s=wI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,ie.min(),ie.min(),ie.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,ie.min(),ie.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,ie.min(),ie.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.position=e,this.inclusive=n}}function y0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Ds(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function YN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class Ye extends TI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZN(e,n,r):n==="array-contains"?new n2(e,r):n==="in"?new r2(e,r):n==="not-in"?new i2(e,r):n==="array-contains-any"?new s2(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new e2(e,r):new t2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ds(n,this.value)):n!==null&&ki(this.value)===ki(n)&&this.matchesComparison(Ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends TI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Un(e,n)}matches(e){return II(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function II(t){return t.op==="and"}function SI(t){return JN(t)&&II(t)}function JN(t){for(const e of t.filters)if(e instanceof Un)return!1;return!0}function jf(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Ls(t.value);if(SI(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(n=>jf(n)).join(",");return`${t.op}(${e})`}}function AI(t,e){return t instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&AI(o,i.filters[a]),!0):!1}(t,e):void re()}function xI(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Ls(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(xI).join(" ,")+"}"}(t):"Filter"}class ZN extends Ye{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class e2 extends Ye{constructor(e,n){super(e,"in",n),this.keys=bI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t2 extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=bI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class n2 extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Am(n)&&Ta(n.arrayValue,this.value)}}class r2 extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ta(this.value.arrayValue,n)}}class i2 extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ta(this.value.arrayValue,n)}}class s2 extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Am(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function E0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new o2(t,e,n,r,i,s,o)}function xm(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ls(r)).join(",")),e.ue=n}return e.ue}function bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_0(t.startAt,e.startAt)&&_0(t.endAt,e.endAt)}function Vf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function a2(t,e,n,r,i,s,o,a){return new zc(t,e,n,r,i,s,o,a)}function Pm(t){return new zc(t)}function w0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l2(t){return t.collectionGroup!==null}function qo(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new rc(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new rc(lt.keyField(),r))}return e.ce}function Dn(t){const e=se(t);return e.le||(e.le=u2(e,qo(t))),e.le}function u2(t,e){if(t.limitType==="F")return E0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new rc(i.field,s)});const n=t.endAt?new nc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nc(t.startAt.position,t.startAt.inclusive):null;return E0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uf(t,e,n){return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $c(t,e){return bm(Dn(t),Dn(e))&&t.limitType===e.limitType}function PI(t){return`${xm(Dn(t))}|lt:${t.limitType}`}function Ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xI(i)).join(", ")}]`),Bc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ls(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Hc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of qo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=y0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,qo(r),i)||r.endAt&&!function(o,a,l){const c=y0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,qo(r),i))}(t,e)}function c2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CI(t){return(e,n)=>{let r=!1;for(const i of qo(t)){const s=d2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function d2(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ds(l,c):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new Fe(te.comparator);function ar(){return h2}const RI=new Fe(te.comparator);function ko(...t){let e=RI;for(const n of t)e=e.insert(n.key,n);return e}function kI(t){let e=RI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return Wo()}function NI(){return Wo()}function Wo(){return new Ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const f2=new Fe(te.comparator),p2=new dt(te.comparator);function he(...t){let e=p2;for(const n of t)e=e.add(n);return e}const m2=new dt(_e);function g2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function OI(t){return{integerValue:""+t}}function v2(t,e){return WN(e)?OI(e):Cm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function y2(t,e,n){return t instanceof ic?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Im(s)&&(s=Sm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ia?LI(t,e):t instanceof Sa?MI(t,e):function(i,s){const o=DI(i,s),a=T0(o)+T0(i.Pe);return Mf(o)&&Mf(i.Pe)?OI(a):Cm(i.serializer,a)}(t,e)}function _2(t,e,n){return t instanceof Ia?LI(t,e):t instanceof Sa?MI(t,e):n}function DI(t,e){return t instanceof sc?function(r){return Mf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ic extends qc{}class Ia extends qc{constructor(e){super(),this.elements=e}}function LI(t,e){const n=jI(e);for(const r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends qc{constructor(e){super(),this.elements=e}}function MI(t,e){let n=jI(e);for(const r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}class sc extends qc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function T0(t){return He(t.integerValue||t.doubleValue)}function jI(t){return Am(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function E2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ia&&i instanceof Ia||r instanceof Sa&&i instanceof Sa?Os(r.elements,i.elements,Vn):r instanceof sc&&i instanceof sc?Vn(r.Pe,i.Pe):r instanceof ic&&i instanceof ic}(t.transform,e.transform)}class w2{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wc{}function VI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FI(t.key,Ln.none()):new Ba(t.key,t.data,Ln.none());{const n=t.data,r=Bt.empty();let i=new dt(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ti(t.key,r,new Jt(i.toArray()),Ln.none())}}function T2(t,e,n){t instanceof Ba?function(i,s,o){const a=i.value.clone(),l=S0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ti?function(i,s,o){if(!fu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=S0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(UI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Go(t,e,n,r){return t instanceof Ba?function(s,o,a,l){if(!fu(s.precondition,o))return a;const c=s.value.clone(),d=A0(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ti?function(s,o,a,l){if(!fu(s.precondition,o))return a;const c=A0(s.fieldTransforms,l,o),d=o.data;return d.setAll(UI(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return fu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function I2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=DI(r.transform,i||null);s!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,s))}return n||null}function I0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Os(r,i,(s,o)=>E2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ba extends Wc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends Wc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function UI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function S0(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_2(o,a,n[i]))}return r}function A0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,y2(s,o,e))}return r}class FI extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S2 extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&T2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=VI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(n,r)=>I0(n,r))&&Os(this.baseMutations,e.baseMutations,(n,r)=>I0(n,r))}}class Rm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return f2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Rm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,me;function P2(t){switch(t){default:return re();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function BI(t){if(t===void 0)return or("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ge.OK:return B.OK;case Ge.CANCELLED:return B.CANCELLED;case Ge.UNKNOWN:return B.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return B.INTERNAL;case Ge.UNAVAILABLE:return B.UNAVAILABLE;case Ge.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ge.NOT_FOUND:return B.NOT_FOUND;case Ge.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ge.ABORTED:return B.ABORTED;case Ge.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ge.DATA_LOSS:return B.DATA_LOSS;default:return re()}}(me=Ge||(Ge={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Ei([4294967295,4294967295],0);function x0(t){const e=C2().encode(t),n=new dI;return n.update(e),new Uint8Array(n.digest())}function b0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ei([n,r],0),new Ei([i,s],0)]}class km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new No(`Invalid padding: ${n}`);if(r<0)throw new No(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new No(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new No(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ei.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ei.fromNumber(r)));return i.compare(R2)===1&&(i=new Ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=x0(e),[r,i]=b0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new km(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=x0(e),[r,i]=b0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class No extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gc(ie.min(),i,new Fe(_e),ar(),he())}}class za{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new za(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class zI{constructor(e,n){this.targetId=e,this.me=n}}class $I{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class P0{constructor(){this.fe=0,this.ge=R0(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new za(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=R0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class k2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=C0(),this.Qe=new Fe(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Vf(s))if(r===0){const o=new te(s.path);this.Ue(n,o,It.newNoDocument(o,ie.min()))}else we(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ri(r).toUint8Array()}catch(l){if(l instanceof EI)return Ns("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new km(o,i,s)}catch(l){return Ns(l instanceof No?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Vf(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,It.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Gc(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=C0(),this.Qe=new Fe(_e),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new P0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new P0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function C0(){return new Fe(te.comparator)}function R0(){return new Fe(te.comparator)}const N2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D2={and:"AND",or:"OR"};class L2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ff(t,e){return t.useProto3Json||Bc(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M2(t,e){return oc(t,e.toTimestamp())}function Mn(t){return we(!!t),ie.fromTimestamp(function(n){const r=Xr(n);return new Ze(r.seconds,r.nanos)}(t))}function Nm(t,e){return Bf(t,e).canonicalString()}function Bf(t,e){const n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qI(t){const e=$e.fromString(t);return we(XI(e)),e}function zf(t,e){return Nm(t.databaseId,e.path)}function dh(t,e){const n=qI(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(GI(n))}function WI(t,e){return Nm(t.databaseId,e)}function j2(t){const e=qI(t);return e.length===4?$e.emptyPath():GI(e)}function $f(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GI(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k0(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function V2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(we(d===void 0||typeof d=="string"),ft.fromBase64String(d||"")):(we(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:BI(c.code);return new ee(d,c.message||"")}(o);n=new $I(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(t,r.document.name),s=Mn(r.document.updateTime),o=r.document.createTime?Mn(r.document.createTime):ie.min(),a=new Bt({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new pu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dh(t,r.document),s=r.readTime?Mn(r.readTime):ie.min(),o=It.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dh(t,r.document),s=r.removedTargetIds||[];n=new pu([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new b2(i,s),a=r.targetId;n=new zI(a,o)}}return n}function U2(t,e){let n;if(e instanceof Ba)n={update:k0(t,e.key,e.value)};else if(e instanceof FI)n={delete:zf(t,e.key)};else if(e instanceof ti)n={update:k0(t,e.key,e.data),updateMask:K2(e.fieldMask)};else{if(!(e instanceof S2))return re();n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ia)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:M2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function F2(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Mn(i.updateTime):Mn(s);return o.isEqual(ie.min())&&(o=Mn(s)),new w2(o,i.transformResults||[])}(n,e))):[]}function B2(t,e){return{documents:[WI(t,e.path)]}}function z2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WI(t,i);const s=function(c){if(c.length!==0)return QI(Un.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Qi(f.field),direction:q2(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ff(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function $2(t){let e=j2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=KI(h);return f instanceof Un&&SI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(m){return new rc(Xi(m.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Bc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new nc(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new nc(g,f)}(n.endAt)),a2(e,i,o,s,a,"F",l,c)}function H2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xi(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xi(n.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xi(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(Xi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>KI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function q2(t){return N2[t]}function W2(t){return O2[t]}function G2(t){return D2[t]}function Qi(t){return{fieldPath:t.canonicalString()}}function Xi(t){return lt.fromServerFormat(t.fieldPath)}function QI(t){return t instanceof Ye?function(n){if(n.op==="=="){if(v0(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NAN"}};if(g0(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v0(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NAN"}};if(g0(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(n.field),op:W2(n.op),value:n.value}}}(t):t instanceof Un?function(n){const r=n.getFilters().map(i=>QI(i));return r.length===1?r[0]:{compositeFilter:{op:G2(n.op),filters:r}}}(t):re()}function K2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,i,s=ie.min(),o=ie.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.ct=e}}function X2(t){const e=$2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.un=new J2}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Qr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class J2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ms(0)}static kn(){return new Ms(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.changes=new Ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Go(r.mutation,i,Jt.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ko();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ar();const o=Wo(),a=function(){return Wo()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ti)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Go(d.mutation,c,d.mutation.getFieldMask(),Ze.now())):o.set(c.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new eO(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wo();let i=new Fe((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Jt.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||he()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=NI();d.forEach(f=>{if(!s.has(f)){const g=VI(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(mi());let a=-1,l=s;return o.next(c=>U.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,he())).next(d=>({batchId:a,changes:kI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=ko();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ko();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(h,f){return new zc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,It.newInvalidDocument(d)))});let a=ko();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Go(d.mutation,c,Jt.empty(),Ze.now()),Hc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Mn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:X2(i.bundledQuery),readTime:Mn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.overlays=new Fe(te.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=mi(),s=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=mi(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=mi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x2(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.Tr=new dt(nt.Er),this.dr=new dt(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new $e([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new $e([])),r=new nt(n,e),i=new nt(n,e+1);let s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dt(nt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(_e);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new nt(new te(s),0);let a=new dt(_e);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.Mr=e,this.docs=function(){return new Fe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||zN(BN(d),r)<=0||(i.has(d.key)||Hc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aO(this)}getSize(e){return U.resolve(this.size)}}class aO extends Z2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.persistence=e,this.Nr=new Ks(n=>xm(n),bm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Om,this.targetCount=0,this.kr=Ms.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ms(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Tm(0),this.Kr=!1,this.Kr=!0,this.$r=new iO,this.referenceDelegate=e(this),this.Ur=new lO(this),this.indexManager=new Y2,this.remoteDocumentCache=function(i){return new oO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Q2(n),this.Gr=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new cO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class cO extends HN{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Jr=new Om,this.Yr=null}static Zr(e){return new Dm(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hR()?8:qN(xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(To()<=fe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(To()<=fe.DEBUG&&X("QueryEngine","Query:",Ki(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(To()<=fe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):U.resolve())}Yi(e,n){if(w0(n))return U.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Uf(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Uf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return w0(n)||i.isEqual(ie.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(To()<=fe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(n)),this.rs(e,o,n,FN(i,-1)).next(a=>a))})}ts(e,n){let r=new dt(CI(e));return n.forEach((i,s)=>{Hc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return To()<=fe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ki(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fe(_e),this._s=new Ks(s=>xm(s),bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pO(t,e,n,r){return new fO(t,e,n,r)}async function YI(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=he();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function mO(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let g=U.resolve();return f.forEach(m=>{g=g.next(()=>d.getEntry(l,m)).next(E=>{const A=c.docVersions.get(m);we(A!==null),E.version.compareTo(A)<0&&(h.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JI(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gO(t,e){const n=se(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ft.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(E,A,w){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,d)&&a.push(n.Ur.updateTargetData(s,g))});let l=ar(),c=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(vO(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function vO(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function yO(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _O(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Hf(t,e,n){const r=se(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fa(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function N0(t,e,n){const r=se(t);let i=ie.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=se(l),f=h._s.get(d);return f!==void 0?U.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,o,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:he())).next(a=>(EO(r,c2(e),a),{documents:a,Ts:s})))}function EO(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class O0{constructor(){this.activeTargetIds=g2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wO{constructor(){this.so=new O0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new O0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl=null;function hh(){return Dl===null?Dl=function(){return 268435456+Math.round(2147483648*Math.random())}():Dl++,"0x"+Dl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class AO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=hh(),l=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ns("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=IO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=hh();return new Promise((o,a)=>{const l=new hI;l.setWithCredentials(!0),l.listenOnce(fI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case du.NO_ERROR:const d=l.getResponseJson();X(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case du.TIMEOUT:X(_t,`RPC '${e}' ${s} timed out`),a(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case du.HTTP_ERROR:const h=l.getStatus();if(X(_t,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const m=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(g.status);a(new ee(m,g.message))}else a(new ee(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(B.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(_t,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);X(_t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=hh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gI(),a=mI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");X(_t,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,g=!1;const m=new SO({Io:A=>{g?X(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(f||(X(_t,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),X(_t,`RPC '${e}' stream ${i} sending:`,A),h.send(A))},To:()=>h.close()}),E=(A,w,_)=>{A.listen(w,I=>{try{_(I)}catch(k){setTimeout(()=>{throw k},0)}})};return E(h,Ro.EventType.OPEN,()=>{g||(X(_t,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),E(h,Ro.EventType.CLOSE,()=>{g||(g=!0,X(_t,`RPC '${e}' stream ${i} transport closed`),m.So())}),E(h,Ro.EventType.ERROR,A=>{g||(g=!0,Ns(_t,`RPC '${e}' stream ${i} transport errored:`,A),m.So(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),E(h,Ro.EventType.MESSAGE,A=>{var w;if(!g){const _=A.data[0];we(!!_);const I=_,k=I.error||((w=I[0])===null||w===void 0?void 0:w.error);if(k){X(_t,`RPC '${e}' stream ${i} received error:`,k);const O=k.status;let L=function(b){const P=Ge[b];if(P!==void 0)return BI(P)}(O),S=k.message;L===void 0&&(L=B.INTERNAL,S="Unknown error status: "+O+" with message "+k.message),g=!0,m.So(new ee(L,S)),h.close()}else X(_t,`RPC '${e}' stream ${i} received:`,_),m.bo(_)}}),E(a,pI.STAT_EVENT,A=>{A.stat===Df.PROXY?X(_t,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Df.NOPROXY&&X(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new L2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ee(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xO extends eS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=V2(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Mn(o.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Vf(l)?{documents:B2(s,l)}:{query:z2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HI(s,o.resumeToken);const c=Ff(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=oc(s,o.snapshotVersion.toTimestamp());const c=Ff(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=H2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.a_(n)}}class bO extends eS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=F2(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>U2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Bf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Bf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Vi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=se(l);c.L_.add(4),await $a(c),c.q_.set("Unknown"),c.L_.delete(4),await Qc(c)}(this))})}),this.q_=new CO(r,i)}}async function Qc(t){if(Vi(t))for(const e of t.B_)await e(!0)}async function $a(t){for(const e of t.B_)await e(!1)}function tS(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Um(n)?Vm(n):Qs(n).r_()&&jm(n,e))}function Mm(t,e){const n=se(t),r=Qs(n);n.N_.delete(e),r.r_()&&nS(n,e),n.N_.size===0&&(r.r_()?r.o_():Vi(n)&&n.q_.set("Unknown"))}function jm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qs(t).A_(e)}function nS(t,e){t.Q_.xe(e),Qs(t).R_(e)}function Vm(t){t.Q_=new k2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qs(t).start(),t.q_.v_()}function Um(t){return Vi(t)&&!Qs(t).n_()&&t.N_.size>0}function Vi(t){return se(t).L_.size===0}function rS(t){t.Q_=void 0}async function kO(t){t.q_.set("Online")}async function NO(t){t.N_.forEach((e,n)=>{jm(t,e)})}async function OO(t,e){rS(t),Um(t)?(t.q_.M_(e),Vm(t)):t.q_.set("Unknown")}async function DO(t,e,n){if(t.q_.set("Online"),e instanceof $I&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ac(t,r)}else if(e instanceof pu?t.Q_.Ke(e):e instanceof zI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await JI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(ft.EMPTY_BYTE_STRING,d.snapshotVersion)),nS(s,l);const h=new Rr(d.target,l,c,d.sequenceNumber);jm(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await ac(t,r)}}async function ac(t,e,n){if(!Fa(e))throw e;t.L_.add(1),await $a(t),t.q_.set("Offline"),n||(n=()=>JI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qc(t)})}function iS(t,e){return e().catch(n=>ac(t,n,e))}async function Xc(t){const e=se(t),n=Yr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LO(e);)try{const i=await yO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,MO(e,i)}catch(i){await ac(e,i)}sS(e)&&oS(e)}function LO(t){return Vi(t)&&t.O_.length<10}function MO(t,e){t.O_.push(e);const n=Yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sS(t){return Vi(t)&&!Yr(t).n_()&&t.O_.length>0}function oS(t){Yr(t).start()}async function jO(t){Yr(t).p_()}async function VO(t){const e=Yr(t);for(const n of t.O_)e.m_(n.mutations)}async function UO(t,e,n){const r=t.O_.shift(),i=Rm.from(r,e,n);await iS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Xc(t)}async function FO(t,e){e&&Yr(t).V_&&await async function(r,i){if(function(o){return P2(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Yr(r).s_(),await iS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Xc(r)}}(t,e),sS(t)&&oS(t)}async function L0(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Vi(n);n.L_.add(3),await $a(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qc(n)}async function BO(t,e){const n=se(t);e?(n.L_.delete(2),await Qc(n)):e||(n.L_.add(2),await $a(n),n.q_.set("Unknown"))}function Qs(t){return t.K_||(t.K_=function(n,r,i){const s=se(n);return s.w_(),new xO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:kO.bind(null,t),Ro:NO.bind(null,t),mo:OO.bind(null,t),d_:DO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Um(t)?Vm(t):t.q_.set("Unknown")):(await t.K_.stop(),rS(t))})),t.K_}function Yr(t){return t.U_||(t.U_=function(n,r,i){const s=se(n);return s.w_(),new bO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jO.bind(null,t),mo:FO.bind(null,t),f_:VO.bind(null,t),g_:UO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xc(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Fm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(t,e){if(or("AsyncQueue",`${e}: ${t}`),Fa(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ko(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Es(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Es)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Es;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.W_=new Fe(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class js{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new js(e,n,Es.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $O{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=j0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function j0(){return new Ks(t=>PI(t),$c)}async function HO(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new zO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Bm(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zm(n)}async function qO(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WO(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zm(n)}function GO(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function zm(t){t.Y_.forEach(e=>{e.next()})}var qf,V0;(V0=qf||(qf={})).ea="default",V0.Cache="cache";class KO{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class lS{constructor(e){this.key=e}}class QO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=CI(e),this.Ra=new Es(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new M0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=Hc(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;f&&g?f.data.isEqual(g.data)?m!==E&&(r.track({type:3,doc:g}),A=!0):this.ga(f,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),A=!0):f&&!g&&(r.track({type:1,doc:f}),A=!0,(l||c)&&(a=!0)),A&&(g?(o=o.add(g),s=E?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,m){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return E(g)-E(m)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new js(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aS(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return js.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YO{constructor(e){this.key=e,this.va=!1}}class JO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ks(a=>PI(a),$c),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(te.comparator),this.Na=new Map,this.La=new Om,this.Ba={},this.ka=new Map,this.qa=Ms.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ZO(t,e,n=!0){const r=pS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await uS(r,e,n,!0),i}async function eD(t,e){const n=pS(t);await uS(n,e,!0,!1)}async function uS(t,e,n,r){const i=await _O(t.localStore,Dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await tD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tS(t.remoteStore,i),a}async function tD(t,e,n,r,i){t.Ka=(h,f,g)=>async function(E,A,w,_){let I=A.view.ma(w);I.ns&&(I=await N0(E.localStore,A.query,!1).then(({documents:S})=>A.view.ma(S,I)));const k=_&&_.targetChanges.get(A.targetId),O=_&&_.targetMismatches.get(A.targetId)!=null,L=A.view.applyChanges(I,E.isPrimaryClient,k,O);return F0(E,A.targetId,L.wa),L.snapshot}(t,h,f,g);const s=await N0(t.localStore,e,!0),o=new QO(e,s.Ts),a=o.ma(s.documents),l=za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);F0(t,n,c.wa);const d=new XO(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function nD(t,e,n){const r=se(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$c(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Hf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mm(r.remoteStore,i.targetId),Wf(r,i.targetId)}).catch(Ua)):(Wf(r,i.targetId),await Hf(r.localStore,i.targetId,!0))}async function rD(t,e){const n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mm(n.remoteStore,r.targetId))}async function iD(t,e,n){const r=dD(t);try{const i=await function(o,a){const l=se(o),c=Ze.now(),d=a.reduce((g,m)=>g.add(m.key),he());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let m=ar(),E=he();return l.cs.getEntries(g,d).next(A=>{m=A,m.forEach((w,_)=>{_.isValidDocument()||(E=E.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,m)).next(A=>{h=A;const w=[];for(const _ of a){const I=I2(_,h.get(_.key).overlayedDocument);I!=null&&w.push(new ti(_.key,I,wI(I.value.mapValue),Ln.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(A=>{f=A;const w=A.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(g,A.batchId,w)})}).then(()=>({batchId:f.batchId,changes:kI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Fe(_e)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ha(r,i.changes),await Xc(r.remoteStore)}catch(i){const s=Bm(i,"Failed to persist write");n.reject(s)}}async function cS(t,e){const n=se(t);try{const r=await gO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await Ha(n,r,e)}catch(r){await Ua(r)}}function U0(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=se(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&zm(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sD(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Fe(te.comparator);o=o.insert(s,It.newNoDocument(s,ie.min()));const a=he().add(s),l=new Gc(ie.min(),new Map,new Fe(_e),o,a);await cS(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),$m(r)}else await Hf(r.localStore,e,!1).then(()=>Wf(r,e,n)).catch(Ua)}async function oD(t,e){const n=se(t),r=e.batch.batchId;try{const i=await mO(n.localStore,e);hS(n,r,null),dS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ha(n,i)}catch(i){await Ua(i)}}async function aD(t,e,n){const r=se(t);try{const i=await function(o,a){const l=se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(we(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);hS(r,e,n),dS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ha(r,i)}catch(i){await Ua(i)}}function dS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hS(t,e,n){const r=se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fS(t,r)})}function fS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Mm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$m(t))}function F0(t,e,n){for(const r of n)r instanceof aS?(t.La.addReference(r.key,e),lD(t,r)):r instanceof lS?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fS(t,r.key)):re()}function lD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),$m(t))}function $m(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te($e.fromString(e)),r=t.qa.next();t.Na.set(r,new YO(n)),t.Oa=t.Oa.insert(n,r),tS(t.remoteStore,new Rr(Dn(Pm(n.path)),r,"TargetPurposeLimboResolution",Tm.oe))}}async function Ha(t,e,n){const r=se(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Lm.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=se(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,f=>U.forEach(f.$i,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>U.forEach(f.Ui,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!Fa(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=d.os.get(f),m=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,E)}}}(r.localStore,s))}async function uD(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await YI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ha(n,r.hs)}}function cD(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function pS(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sD.bind(null,e),e.Ca.d_=WO.bind(null,e.eventManager),e.Ca.$a=GO.bind(null,e.eventManager),e}function dD(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aD.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return pO(this.persistence,new hO,e.initialUser,this.serializer)}Ga(e){return new uO(Dm.Zr,this.serializer)}Wa(e){return new wO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class Gf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>U0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uD.bind(null,this.syncEngine),await BO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $O}()}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),r=function(s){return new AO(s)}(e.databaseInfo);return function(s,o,a,l){return new PO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new RO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>U0(this.syncEngine,n,0),function(){return D0.D()?new D0:new TO}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new JO(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await $a(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gf.provider={build:()=>new Gf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=yI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ph(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function B0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pD(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>L0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>L0(e.remoteStore,i)),t._onlineComponents=e}async function pD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ns("Error using user provided cache. Falling back to memory cache: "+n),await ph(t,new lc)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await ph(t,new lc);return t._offlineComponents}async function mS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await B0(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await B0(t,new Gf))),t._onlineComponents}function mD(t){return mS(t).then(e=>e.syncEngine)}async function gD(t){const e=await mS(t),n=e.eventManager;return n.onListen=ZO.bind(null,e.syncEngine),n.onUnlisten=nD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rD.bind(null,e.syncEngine),n}function vD(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new hD({next:f=>{d.Za(),o.enqueueAndForget(()=>qO(s,h));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new KO(Pm(a.path),d,{includeMetadataChanges:!0,_a:!0});return HO(s,h)}(await gD(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _D(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $0(t){if(!te.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kN;switch(r.type){case"firstParty":return new LN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=z0.get(n);r&&(X("ComponentProvider","Removing Datastore"),z0.delete(n),r.terminate())}(this),Promise.resolve()}}function ED(t,e,n,r={}){var i;const s=(t=Ni(t,qm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=wt.MOCK_USER;else{a=sR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new wt(c)}t._authCredentials=new NN(new vI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wm(this.firestore,e,this._query)}}class en{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Aa extends Wm{constructor(e,n,r){super(e,n,Pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new te(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function Ll(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=yI.newId()),yD("doc","path",e),t instanceof qm){const r=$e.fromString(e,...n);return $0(r),new en(t,null,new te(r))}{if(!(t instanceof en||t instanceof Aa))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return $0(r),new en(t.firestore,t instanceof Aa?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZI(this,"async_queue_retry"),this.Vu=()=>{const r=fh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fa(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Fm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Yc extends qm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q0(e),this._firestoreClient=void 0,await e}}}function wD(t,e){const n=typeof t=="object"?t:kT(),r=typeof t=="string"?t:"(default)",i=cm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=rR("firestore");s&&ED(i,...s)}return i}function vS(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TD(t),t._firestoreClient}function TD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new KN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vs(ft.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vs(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=/^__.*__$/;class SD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ba(e,this.data,n,this.fieldTransforms)}}class yS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _S(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Xm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_S(this.Cu)&&ID.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kc(e)}Qu(e,n,r,i=!1){return new Xm({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ES(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new AD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ym("Data must be an object, but it was:",o,r);const a=wS(r,o);let l,c;if(s.merge)l=new Jt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Kf(e,h,n);if(!o.contains(f))throw new ee(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);IS(d,f)||d.push(f)}l=new Jt(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new SD(new Bt(a),l,c)}class Zc extends Gm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function bD(t,e,n,r){const i=t.Qu(1,e,n);Ym("Data must be an object, but it was:",i,r);const s=[],o=Bt.empty();ji(r,(l,c)=>{const d=Jm(e,l,n);c=Lt(c);const h=i.Nu(d);if(c instanceof Zc)s.push(d);else{const f=ed(c,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new Jt(s);return new yS(o,a,i.fieldTransforms)}function PD(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Kf(e,r,n)],l=[i];if(s.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Kf(e,s[f])),l.push(s[f+1]);const c=[],d=Bt.empty();for(let f=a.length-1;f>=0;--f)if(!IS(c,a[f])){const g=a[f];let m=l[f];m=Lt(m);const E=o.Nu(g);if(m instanceof Zc)c.push(g);else{const A=ed(m,E);A!=null&&(c.push(g),d.set(g,A))}}const h=new Jt(c);return new yS(d,h,o.fieldTransforms)}function ed(t,e){if(TS(t=Lt(t)))return Ym("Unsupported field value:",e,t),wS(t,e);if(t instanceof Gm)return function(r,i){if(!_S(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ed(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ze.fromDate(r);return{timestampValue:oc(i.serializer,s)}}if(r instanceof Ze){const s=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(i.serializer,s)}}if(r instanceof Km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vs)return{bytesValue:HI(i.serializer,r._byteString)};if(r instanceof en){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Cm(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hm(r)}`)}(t,e)}function wS(t,e){const n={};return _I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(t,(r,i)=>{const s=ed(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof Km||t instanceof Vs||t instanceof en||t instanceof Gm||t instanceof Qm)}function Ym(t,e,n){if(!TS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Kf(t,e,n){if((e=Lt(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return Jm(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const CD=new RegExp("[~\\*/\\[\\]]");function Jm(t,e,n){if(e.search(CD)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jc(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ee(B.INVALID_ARGUMENT,a+t+l)}function IS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(AS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RD extends SS{data(){return super.data()}}function AS(t,e){return typeof e=="string"?Jm(t,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class kD{convertValue(e,n="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ji(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new Qm(s)}convertGeoPoint(e){return new Km(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ea(e));default:return null}}convertTimestamp(e){const n=Xr(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);we(XI(r));const i=new wa(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xS extends SS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new DD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(AS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class DD extends xS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){t=Ni(t,en);const e=Ni(t.firestore,Yc);return vD(vS(e),t._key).then(n=>VD(e,t,n))}class MD extends kD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function jD(t,e,n){t=Ni(t,en);const r=Ni(t.firestore,Yc),i=ND(t.converter,e);return bS(r,[xD(ES(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function W0(t,e,n,...r){t=Ni(t,en);const i=Ni(t.firestore,Yc),s=ES(i);let o;return o=typeof(e=Lt(e))=="string"||e instanceof Jc?PD(s,"updateDoc",t._key,e,n,r):bD(s,"updateDoc",t._key,e),bS(i,[o.toMutation(t._key,Ln.exists(!0))])}function bS(t,e){return function(r,i){const s=new qr;return r.asyncQueue.enqueueAndForget(async()=>iD(await mD(r),i,s)),s.promise}(vS(t),e)}function VD(t,e,n){const r=n.docs.get(e._key),i=new MD(t);return new xS(t,i,e._key,r,new OD(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Gs=i})(qs),Rs(new xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Yc(new ON(r.getProvider("auth-internal")),new jN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hr(d0,"4.7.3",e),Hr(d0,"4.7.3","esm2017")})();var UD="firebase",FD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(UD,FD,"app");const BD={apiKey:"your_api_key_here",authDomain:"your_project.firebaseapp.com",projectId:"your_project_id",storageBucket:"your_project.appspot.com",messagingSenderId:"your_sender_id",appId:"your_app_id"},PS=RT(BD),Ml=CN(PS),jl=wD(PS),zD=new Wn,Et={PROJECTS:"goals_tracker_projects",IDEAS:"goals_tracker_ideas",TODOS:"goals_tracker_todos",FIRST_LAUNCH:"goals_tracker_first_launch",IMPORT_EXPORT_COUNT:"goals_tracker_import_export_count",LAST_IMPORT_EXPORT_RESET:"goals_tracker_last_import_export_reset",GUEST_USER:"goals_tracker_guest_user",SESSION_COUNT:"goals_tracker_session_count",LAST_APP_OPEN:"goals_tracker_last_app_open"},Vl=new Map;function $D(){try{const t="__storage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}function HD(t){return JSON.stringify(t,(e,n)=>n instanceof Date?{__type:"Date",value:n.toISOString()}:n)}function qD(t){return JSON.parse(t,(e,n)=>n&&typeof n=="object"&&n.__type==="Date"?new Date(n.value):n)}class WD{constructor(){Kt(this,"useMemory");this.useMemory=!$D(),this.useMemory&&console.warn("localStorage not available, using memory storage")}async setItem(e,n){try{const r=HD(n);this.useMemory?Vl.set(e,r):localStorage.setItem(e,r)}catch(r){throw console.error(`Failed to save ${e}:`,r),r}}async getItem(e){try{const n=this.useMemory?Vl.get(e):localStorage.getItem(e);return n?qD(n):null}catch(n){return console.error(`Failed to load ${e}:`,n),null}}async removeItem(e){this.useMemory?Vl.delete(e):localStorage.removeItem(e)}async clear(){this.useMemory?Vl.clear():localStorage.clear()}async loadProjects(){return await this.getItem(Et.PROJECTS)||[]}async saveProjects(e){await this.setItem(Et.PROJECTS,e)}async loadIdeas(){return await this.getItem(Et.IDEAS)||[]}async saveIdeas(e){await this.setItem(Et.IDEAS,e)}async loadTodos(){return await this.getItem(Et.TODOS)||[]}async saveTodos(e){await this.setItem(Et.TODOS,e)}async isFirstLaunch(){return await this.getItem(Et.FIRST_LAUNCH)!==!1}async setFirstLaunchComplete(){await this.setItem(Et.FIRST_LAUNCH,!1)}async getImportExportCount(){return await this.getItem(Et.IMPORT_EXPORT_COUNT)||0}async setImportExportCount(e){await this.setItem(Et.IMPORT_EXPORT_COUNT,e)}async getLastImportExportReset(){return await this.getItem(Et.LAST_IMPORT_EXPORT_RESET)}async setLastImportExportReset(e){await this.setItem(Et.LAST_IMPORT_EXPORT_RESET,e)}}const Nt=new WD;class GD{async signInWithGoogle(){try{const n=(await V1(Ml,zD)).user,r=await LD(Ll(jl,"users",n.uid));if(r.exists()){await W0(Ll(jl,"users",n.uid),{lastLoginAt:new Date().toISOString()});const i=r.data();return{...i,createdAt:new Date(i.createdAt),lastLoginAt:new Date}}else{const i={uid:n.uid,email:n.email||void 0,displayName:n.displayName||void 0,photoURL:n.photoURL||void 0,createdAt:new Date,lastLoginAt:new Date,preferences:{notifications:!0,theme:"auto",language:"en"},isPremium:!1};return await jD(Ll(jl,"users",n.uid),{...i,createdAt:i.createdAt.toISOString(),lastLoginAt:i.lastLoginAt.toISOString()}),i}}catch(e){throw console.error("Google sign-in error:",e),new Error(e.message||"Failed to sign in with Google")}}async signInAsGuest(){const n={uid:`guest_${Math.floor(1e7+Math.random()*9e7)}`,displayName:"Guest User",createdAt:new Date,lastLoginAt:new Date,preferences:{notifications:!1,theme:"auto",language:"en"},isPremium:!1};return await Nt.setItem(Et.GUEST_USER,n),n}async signOut(){try{await Nt.removeItem(Et.GUEST_USER),Ml.currentUser&&await y1(Ml)}catch(e){throw console.error("Sign out error:",e),new Error("Failed to sign out")}}async loadGuestUser(){return await Nt.getItem(Et.GUEST_USER)}async updateUserProfile(e,n){if(e.startsWith("guest_")){const r=await this.loadGuestUser();if(r){const i={...r,...n};await Nt.setItem(Et.GUEST_USER,i)}}else{const r=Ll(jl,"users",e);await W0(r,n)}}onAuthStateChange(e){return v1(Ml,e)}}const Hi=new GD;var kr;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(kr||(kr={}));var In;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(In||(In={}));var G0="-",td="AMP",KD="".concat(td,"_unsent"),CS="$default_instance",RS="https://api2.amplitude.com/2/httpapi",QD="https://api.eu.amplitude.com/2/httpapi",XD="https://api2.amplitude.com/batch",YD="https://api.eu.amplitude.com/batch",JD="utm_campaign",ZD="utm_content",eL="utm_id",tL="utm_medium",nL="utm_source",rL="utm_term",K0="dclid",Q0="fbclid",X0="gbraid",Y0="gclid",J0="ko_click_id",Z0="li_fat_id",e_="msclkid",t_="rdt_cid",n_="ttclid",r_="twclid",i_="wbraid",nd={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},cc=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],iL=["authorization","cookie","set-cookie"],sL=1e3,Qf=function(t){if(Object.keys(t).length>sL)return!1;for(var e in t){var n=t[e];if(!kS(e,n))return!1}return!0},kS=function(t,e){var n,r;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var s=ue(e),o=s.next();!o.done;o=s.next()){var a=o.value;if(Array.isArray(a))return!1;if(typeof a=="object")i=i&&Qf(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}else{if(e==null)return!1;if(typeof e=="object")return Qf(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},xa=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return G({},this._properties)},t.prototype.set=function(e,n){return this._safeSet(Se.SET,e,n),this},t.prototype.setOnce=function(e,n){return this._safeSet(Se.SET_ONCE,e,n),this},t.prototype.append=function(e,n){return this._safeSet(Se.APPEND,e,n),this},t.prototype.prepend=function(e,n){return this._safeSet(Se.PREPEND,e,n),this},t.prototype.postInsert=function(e,n){return this._safeSet(Se.POSTINSERT,e,n),this},t.prototype.preInsert=function(e,n){return this._safeSet(Se.PREINSERT,e,n),this},t.prototype.remove=function(e,n){return this._safeSet(Se.REMOVE,e,n),this},t.prototype.add=function(e,n){return this._safeSet(Se.ADD,e,n),this},t.prototype.unset=function(e){return this._safeSet(Se.UNSET,e,G0),this},t.prototype.clearAll=function(){return this._properties={},this._properties[Se.CLEAR_ALL]=G0,this},t.prototype._safeSet=function(e,n,r){if(this._validate(e,n,r)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[n]=r,this._propertySet.add(n),!0}return!1},t.prototype._validate=function(e,n,r){return this._properties[Se.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:e===Se.ADD?typeof r=="number":e!==Se.UNSET&&e!==Se.REMOVE?kS(n,r):!0},t}(),Se;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Se||(Se={}));var oL=[Se.CLEAR_ALL,Se.UNSET,Se.SET,Se.SET_ONCE,Se.ADD,Se.APPEND,Se.PREPEND,Se.PREINSERT,Se.POSTINSERT,Se.REMOVE],aL="Event tracked successfully",lL="Unexpected error occurred",uL="Event rejected due to exceeded retry count",cL="Event skipped due to optOut config",dL="Event rejected due to missing API key",hL="Invalid API key",fL="Client not initialized",Ke;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(Ke||(Ke={}));var ws=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Ke.Unknown),{event:t,code:e,message:n}},We=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},pL=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,ni)},s_=le([],Y(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),ni=function(t){var e,n=We();if(!(!((e=n==null?void 0:n.crypto)===null||e===void 0)&&e.getRandomValues))return pL(t);var r=n.crypto.getRandomValues(new Uint8Array(16));return r[6]=r[6]&15|64,r[8]=r[8]&63|128,le([],Y(r.entries()),!1).map(function(i){var s=Y(i,2),o=s[0],a=s[1];return[4,6,8,10].includes(o)?"-".concat(s_[a]):s_[a]}).join("")},mL=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,n){var r,i;return V(this,void 0,void 0,function(){return j(this,function(s){switch(s.label){case 0:return this.plugins.some(function(o){return o.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=ni(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,n,this.client)]);case 1:return s.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,n){var r;return V(this,void 0,void 0,function(){var i,s;return j(this,function(o){switch(o.label){case 0:return i=this.plugins.findIndex(function(a){return a.name===e}),i===-1?(n.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(s=this.plugins[i],this.plugins.splice(i,1),[4,(r=s.teardown)===null||r===void 0?void 0:r.call(s)]);case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var n=this.plugins;n.map(function(r){var i;return(i=r.teardown)===null||i===void 0?void 0:i.call(r)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var n=this;return new Promise(function(r){n.queue.push([e,r]),n.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},e))},t.prototype.apply=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o,a,l,g,m,c,d,h,f,g,m,E,A,w,_,I,k,O;return j(this,function(L){switch(L.label){case 0:if(!e)return[2];n=Y(e,1),r=n[0],i=Y(e,2),s=i[1],this.loggerProvider.log("Timeline.apply: Initial event",r),o=this.plugins.filter(function(S){return S.type==="before"}),L.label=1;case 1:L.trys.push([1,6,7,8]),a=ue(o),l=a.next(),L.label=2;case 2:return l.done?[3,5]:(g=l.value,g.execute?[4,g.execute(G({},r))]:[3,4]);case 3:if(m=L.sent(),m===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=m,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(r))),L.label=4;case 4:return l=a.next(),[3,2];case 5:return[3,8];case 6:return c=L.sent(),_={error:c},[3,8];case 7:try{l&&!l.done&&(I=a.return)&&I.call(a)}finally{if(_)throw _.error}return[7];case 8:d=this.plugins.filter(function(S){return S.type==="enrichment"||S.type===void 0}),L.label=9;case 9:L.trys.push([9,14,15,16]),h=ue(d),f=h.next(),L.label=10;case 10:return f.done?[3,13]:(g=f.value,g.execute?[4,g.execute(G({},r))]:[3,12]);case 11:if(m=L.sent(),m===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=m,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(r))),L.label=12;case 12:return f=h.next(),[3,10];case 13:return[3,16];case 14:return E=L.sent(),k={error:E},[3,16];case 15:try{f&&!f.done&&(O=h.return)&&O.call(h)}finally{if(k)throw k.error}return[7];case 16:return A=this.plugins.filter(function(S){return S.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(r))),w=A.map(function(S){var T=G({},r);return S.execute(T).catch(function(b){return ws(T,0,String(b))})}),Promise.all(w).then(function(S){var T=Y(S,1),b=T[0],P=b||ws(r,100,"Event not tracked, no destination plugins on the instance");s(P)}),[2]}})})},t.prototype.flush=function(){return V(this,void 0,void 0,function(){var e,n,r,i=this;return j(this,function(s){switch(s.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(o){return i.apply(o)}))];case 1:return s.sent(),n=this.plugins.filter(function(o){return o.type==="destination"}),r=n.map(function(o){return o.flush&&o.flush()}),[4,Promise.all(r)];case 2:return s.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onIdentityChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onSessionIdChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onOptOutChanged)===null||r===void 0||r.call(n,e)})},t}(),gL=function(t,e,n){var r=typeof t=="string"?{event_type:t}:t;return G(G(G({},r),n),e&&{event_properties:e})},NS=function(t,e){var n=G(G({},e),{event_type:In.IDENTIFY,user_properties:t.getUserProperties()});return n},vL=function(t,e,n,r){var i,s=G(G({},r),{event_type:In.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[t]=e,i)});return s},yL=function(t,e,n){var r,i=new xa;i.set(t,e);var s=G(G({},n),{event_type:In.IDENTIFY,user_properties:i.getUserProperties(),groups:(r={},r[t]=e,r)});return s},_L=function(t,e){return G(G({},e),{event_type:In.REVENUE,event_properties:t.getEventProperties()})},Ut=function(t){return{promise:t||Promise.resolve()}},EL=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new mL(this),this.name=e}return t.prototype._init=function(e){return V(this,void 0,void 0,function(){return j(this,function(n){switch(n.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o,a,l,c;return j(this,function(d){switch(d.label){case 0:n=this[e],this[e]=[],d.label=1;case 1:d.trys.push([1,8,9,10]),r=ue(n),i=r.next(),d.label=2;case 2:return i.done?[3,7]:(s=i.value,o=s(),o&&"promise"in o?[4,o.promise]:[3,4]);case 3:return d.sent(),[3,6];case 4:return[4,o];case 5:d.sent(),d.label=6;case 6:return i=r.next(),[3,2];case 7:return[3,10];case 8:return a=d.sent(),l={error:a},[3,10];case 9:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[2]}})})},t.prototype.track=function(e,n,r){var i=gL(e,n,r);return Ut(this.dispatch(i))},t.prototype.identify=function(e,n){var r=NS(e,n);return Ut(this.dispatch(r))},t.prototype.groupIdentify=function(e,n,r,i){var s=vL(e,n,r,i);return Ut(this.dispatch(s))},t.prototype.setGroup=function(e,n,r){var i=yL(e,n,r);return Ut(this.dispatch(i))},t.prototype.revenue=function(e,n){var r=_L(e,n);return Ut(this.dispatch(r))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),Ut())},t.prototype._addPlugin=function(e){return Ut(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),Ut())},t.prototype._removePlugin=function(e){return Ut(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,n){if(!this.isReady)return n(ws(e,0,fL));this.process(e).then(n)},t.prototype.dispatch=function(e){return V(this,void 0,void 0,function(){var n=this;return j(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){n.dispatchQ.push(n.dispatchWithCallback.bind(n,e,i))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var n={};if(e===void 0)return n;var r={};return Object.keys(e).forEach(function(i){Object.values(kr).includes(i)||(r[i]=e[i])}),oL.forEach(function(i){if(Object.keys(e).includes(i)){var s=e[i];switch(i){case kr.CLEAR_ALL:Object.keys(n).forEach(function(o){delete n[o]});break;case kr.UNSET:Object.keys(s).forEach(function(o){delete n[o]});break;case kr.SET:Object.assign(n,s);break}}}),Object.assign(n,r),n},t.prototype.process=function(e){return V(this,void 0,void 0,function(){var n,s,r,i,s;return j(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,ws(e,0,cL)]:(e.event_type===In.IDENTIFY&&(n=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:n})),[4,this.timeline.push(e)]);case 1:return s=o.sent(),s.code===200?this.config.loggerProvider.log(s.message):s.code===100?this.config.loggerProvider.warn(s.message):this.config.loggerProvider.error(s.message),[2,s];case 2:return r=o.sent(),i=String(r),this.config.loggerProvider.error(i),s=ws(e,0,i),[2,s];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return Ut(this.timeline.flush())},t.prototype.plugin=function(e){var n=this.timeline.plugins.find(function(r){return r.name===e});if(n===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return n},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(n){return n instanceof e})},t}(),wL=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return Qf(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?G({},this.properties):{};return e[Pn.REVENUE_PRODUCT_ID]=this.productId,e[Pn.REVENUE_QUANTITY]=this.quantity,e[Pn.REVENUE_PRICE]=this.price,e[Pn.REVENUE_TYPE]=this.revenueType,e[Pn.REVENUE_CURRENCY]=this.currency,e[Pn.REVENUE]=this.revenue,e[Pn.RECEIPT]=this.receipt,e[Pn.RECEIPT_SIG]=this.receiptSig,e},t}(),Pn;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(Pn||(Pn={}));var TL=function(t,e){var n=Math.max(e,1);return t.reduce(function(r,i,s){var o=Math.floor(s/n);return r[o]||(r[o]=[]),r[o].push(i),r},[])},Xt;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Xt||(Xt={}));var Ul="Amplitude Logger ",OS=function(){function t(){this.logLevel=Xt.None}return t.prototype.disable=function(){this.logLevel=Xt.None},t.prototype.enable=function(e){e===void 0&&(e=Xt.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Xt.Verbose||console.log("".concat(Ul,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Xt.Warn||console.warn("".concat(Ul,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Xt.Error||console.error("".concat(Ul,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Xt.Debug||console.log("".concat(Ul,"[Debug]: ").concat(e.join(" ")))},t}(),mu=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:CS,logLevel:Xt.Warn,loggerProvider:new OS,offline:!1,optOut:!1,serverUrl:RS,serverZone:"US",useBatch:!1}},IL=function(){function t(e){var n,r,i,s;this._optOut=!1;var o=mu();this.apiKey=e.apiKey,this.flushIntervalMillis=(n=e.flushIntervalMillis)!==null&&n!==void 0?n:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:o.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:o.useBatch,this.loggerProvider.enable(this.logLevel);var a=DS(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),SL=function(t,e){return t==="EU"?e?YD:QD:e?XD:RS},DS=function(t,e,n){if(t===void 0&&(t=""),e===void 0&&(e=mu().serverZone),n===void 0&&(n=mu().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:mu().serverZone;return{serverZone:r,serverUrl:SL(r,n)}},AL=function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,n){this.sdk.metrics.histogram[e]=n},t}();function LS(t){return t>=200&&t<300}var MS=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(n){return n.trim()})},Ne=function(t){return function(){var e=G({},t.config),n=e.loggerProvider,r=e.logLevel;return{logger:n,logLevel:r}}},xL=function(t,e){var n,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=ue(e.split(".")),s=i.next();!s.done;s=i.next()){var o=s.value;if(o in t)t=t[o];else return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},Oe=function(t,e){return function(){var n,r,i={};try{for(var s=ue(e),o=s.next();!o.done;o=s.next()){var a=o.value;i[a]=xL(t,a)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}},De=function(t,e,n,r,i){return i===void 0&&(i=null),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=n(),l=a.logger,c=a.logLevel;if(c&&c<Xt.Debug||!c||!l)return t.apply(i,s);var d={type:"invoke public method",name:e,args:s,stacktrace:MS(1),time:{start:new Date().toISOString()},states:{}};r&&d.states&&(d.states.before=r());var h=t.apply(i,s);return h&&h.promise?h.promise.then(function(){r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),l.debug(JSON.stringify(d,null,2))}):(r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),l.debug(JSON.stringify(d,null,2))),h}};function bL(t){return t instanceof Error?t.message:String(t)}function Fl(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var PL=function(){function t(e){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[],this.diagnosticsClient=e==null?void 0:e.diagnosticsClient}return t.prototype.setup=function(e){var n;return V(this,void 0,void 0,function(){var r,i=this;return j(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(KD,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return r=s.sent(),r&&r.length>0&&Promise.all(r.map(function(o){return i.execute(o)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var n=this;return e.insert_id||(e.insert_id=ni()),new Promise(function(r){var i={event:e,attempts:0,callback:function(s){return r(s)},timeout:0};n.queue.push(i),n.schedule(n.config.flushIntervalMillis),n.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var n=this;return e.filter(function(r){return r.attempts+=1,r.attempts<n.config.flushMaxRetries?!0:(n.fulfillRequest([r],500,uL),!1)})},t.prototype.scheduleEvents=function(e){var n=this;e.forEach(function(r){n.schedule(r.timeout===0?n.config.flushIntervalMillis:r.timeout)})},t.prototype.schedule=function(e){var n=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){n.queue=n.queue.map(function(r){return r.timeout=0,r}),n.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),V(this,void 0,void 0,function(){var n,r,i,s=this;return j(this,function(o){switch(o.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),n=[],r=[],this.queue.forEach(function(a){return a.timeout===0?n.push(a):r.push(a)}),i=TL(n,this.config.flushQueueSize),[4,i.reduce(function(a,l){return V(s,void 0,void 0,function(){return j(this,function(c){switch(c.label){case 0:return[4,a];case 1:return c.sent(),[4,this.send(l,e)];case 2:return[2,c.sent()]}})})},Promise.resolve())]);case 1:return o.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,n){return n===void 0&&(n=!0),V(this,void 0,void 0,function(){var r,i,s,o,a;return j(this,function(l){switch(l.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,dL)];r={api_key:this.config.apiKey,events:e.map(function(c){var d=c.event;d.extra;var h=bi(d,["extra"]);return h}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new AL,l.label=1;case 1:return l.trys.push([1,3,,4]),i=DS(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,r)];case 2:return s=l.sent(),s===null?(this.fulfillRequest(e,0,lL),[2]):n?(this.handleResponse(s,e),[3,4]):("body"in s?this.fulfillRequest(e,s.statusCode,"".concat(s.status,": ").concat(Fl(s))):this.fulfillRequest(e,s.statusCode,s.status),[2]);case 3:return o=l.sent(),a=bL(o),this.config.loggerProvider.error(a),this.handleResponse({status:Ke.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,n){var r=e.status;switch(r){case Ke.Success:{this.handleSuccessResponse(e,n);break}case Ke.Invalid:{this.handleInvalidResponse(e,n);break}case Ke.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,n);break}case Ke.RateLimit:{this.handleRateLimitResponse(e,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(r,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},t.prototype.handleSuccessResponse=function(e,n){this.fulfillRequest(n,e.statusCode,aL)},t.prototype.handleInvalidResponse=function(e,n){var r=this;if(e.body.missingField||e.body.error.startsWith(hL)){this.fulfillRequest(n,e.statusCode,e.body.error);return}var i=le(le(le(le([],Y(Object.values(e.body.eventsWithInvalidFields)),!1),Y(Object.values(e.body.eventsWithMissingFields)),!1),Y(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Y(e.body.silencedEvents),!1).flat(),s=new Set(i),o=n.filter(function(l,c){if(s.has(c)){r.fulfillRequest([l],e.statusCode,e.body.error);return}return!0});o.length>0&&this.config.loggerProvider.warn(Fl(e));var a=this.removeEventsExceedFlushMaxRetries(o);this.scheduleEvents(a)},t.prototype.handlePayloadTooLargeResponse=function(e,n){if(n.length===1){this.fulfillRequest(n,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Fl(e)),this.config.flushQueueSize/=2;var r=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(r)},t.prototype.handleRateLimitResponse=function(e,n){var r=this,i=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,a=new Set(i),l=new Set(s),c=new Set(o),d=n.filter(function(f,g){if(f.event.user_id&&a.has(f.event.user_id)||f.event.device_id&&l.has(f.event.device_id)){r.fulfillRequest([f],e.statusCode,e.body.error);return}return c.has(g)&&(f.timeout=r.throttleTimeout),!0});d.length>0&&this.config.loggerProvider.warn(Fl(e));var h=this.removeEventsExceedFlushMaxRetries(d);this.scheduleEvents(h)},t.prototype.handleOtherResponse=function(e){var n=this,r=e.map(function(s){return s.timeout=s.attempts*n.retryTimeout,s}),i=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(i)},t.prototype.fulfillRequest=function(e,n,r){var i,s,o;LS(n)?(o=this.diagnosticsClient)===null||o===void 0||o.increment("analytics.events.sent",e.length):((i=this.diagnosticsClient)===null||i===void 0||i.increment("analytics.events.dropped",e.length),(s=this.diagnosticsClient)===null||s===void 0||s.recordEvent("analytics.events.dropped",{events:e.map(function(a){return a.event.event_type}),code:n,message:r,stack_trace:MS()})),this.removeEvents(e),e.forEach(function(a){return a.callback(ws(a.event,n,r))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(n){return!e.some(function(r){return r.event.insert_id===n.event.insert_id})}),this.saveEvents()},t}(),CL=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:RL(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),RL=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},kL=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t}(),wr=function(){return wr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wr.apply(this,arguments)};function gu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o_(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}var vu=function(t,e){var n,r,i=["string","number","boolean","undefined"],s=typeof t,o=typeof e;if(s!==o)return!1;try{for(var a=gu(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(c===s)return t===e}}catch(A){n={error:A}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var d=Array.isArray(t),h=Array.isArray(e);if(d!==h)return!1;if(d&&h){for(var f=0;f<t.length;f++)if(!vu(t[f],e[f]))return!1}else{var g=Object.keys(t).sort(),m=Object.keys(e).sort();if(!vu(g,m))return!1;var E=!0;return Object.keys(t).forEach(function(A){vu(t[A],e[A])||(E=!1)}),E}return!0},NL="$set",OL="$unset",DL="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var LL=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=wr({},this.identity.userProperties),r=wr(wr({},this.identity),{userProperties:n});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){var s,o,a,l,c,d,h=r.userProperties||{};try{for(var f=gu(Object.entries(i)),g=f.next();!g.done;g=f.next()){var m=o_(g.value,2),E=m[0],A=m[1];switch(E){case NL:try{for(var w=(a=void 0,gu(Object.entries(A))),_=w.next();!_.done;_=w.next()){var I=o_(_.value,2),k=I[0],O=I[1];h[k]=O}}catch(T){a={error:T}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(a)throw a.error}}break;case OL:try{for(var L=(c=void 0,gu(Object.keys(A))),S=L.next();!S.done;S=L.next()){var k=S.value;delete h[k]}}catch(T){c={error:T}}finally{try{S&&!S.done&&(d=L.return)&&d.call(L)}finally{if(c)throw c.error}}break;case DL:h={};break}}}catch(T){s={error:T}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}return r.userProperties=h,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return wr({},this.identity)},t.prototype.setIdentity=function(e){var n=wr({},this.identity);this.identity=wr({},e),vu(n,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),Io=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,ML=function(){function t(){this.identityStore=new LL,this.eventBridge=new kL,this.applicationContextProvider=new CL}return t.getInstance=function(e){return Io.analyticsConnectorInstances||(Io.analyticsConnectorInstances={}),Io.analyticsConnectorInstances[e]||(Io.analyticsConnectorInstances[e]=new t),Io.analyticsConnectorInstances[e]},t}(),ba=function(t){return t===void 0&&(t=CS),ML.getInstance(t)},jL=function(t,e){ba(e).identityStore.editIdentity().setUserId(t).commit()},VL=function(t,e){ba(e).identityStore.editIdentity().setDeviceId(t).commit()},UL=function(){function t(){this.name="identity",this.type="before",this.identityStore=ba().identityStore}return t.prototype.execute=function(e){return V(this,void 0,void 0,function(){var n;return j(this,function(r){return n=e.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,e]})})},t.prototype.setup=function(e){return V(this,void 0,void 0,function(){return j(this,function(n){return e.instanceName&&(this.identityStore=ba(e.instanceName).identityStore),[2]})})},t}(),jS=function(t,e){e===void 0&&(e=Date.now());var n=Date.now(),r=n-e;return r>t},VS=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[td,e,t.substring(0,n)].filter(Boolean).join("_")},FL=function(t){return"".concat(td.toLowerCase(),"_").concat(t.substring(0,6))},BL=function(){var t,e,n,r;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(r=(n=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&n!==void 0?n:i)!==null&&r!==void 0?r:""},dc=function(){var t,e=We();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(i,s){var o=s.split("=",2),a=a_(o[0]),l=a_(o[1]);return l&&(i[a]=l),i},{});return r},a_=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},Xf=function(t,e){return!e||!e.length?!0:e.some(function(n){return typeof n=="string"?t===n:t.match(n)})},Oo=function(t,e){var n=t;try{n=decodeURI(t)}catch(r){e==null||e.error("Malformed URI sequence: ",r)}return n},zL=function(t){var e=0;if(t.length===0)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e},l_=function(t,e){var n=zL(t.toString()),r=Math.abs(n),i=r*31,s=i%1e5;return s/1e5<e},Zm=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return V(this,void 0,void 0,function(){return j(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return V(this,void 0,void 0,function(){return j(this,function(n){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return V(this,void 0,void 0,function(){var n;return j(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return n=r.sent(),[2,n?JSON.stringify(n):void 0]}})})},t.prototype.set=function(e,n){return V(this,void 0,void 0,function(){return j(this,function(r){return this.memoryStorage.set(e,n),[2]})})},t.prototype.remove=function(e){return V(this,void 0,void 0,function(){return j(this,function(n){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return V(this,void 0,void 0,function(){return j(this,function(e){return this.memoryStorage.clear(),[2]})})},t}(),Yf=function(){function t(e){this.options=G({},e)}return t.prototype.isEnabled=function(){return V(this,void 0,void 0,function(){var e,n,r;return j(this,function(i){switch(i.label){case 0:if(!We())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(n,t.testValue)];case 2:return i.sent(),[4,e.get(n)];case 3:return r=i.sent(),[2,r===t.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){var n;return V(this,void 0,void 0,function(){var r,i;return j(this,function(s){switch(s.label){case 0:return[4,this.getRaw(e)];case 1:if(r=s.sent(),!r)return[2,void 0];try{return i=(n=$L(r))!==null&&n!==void 0?n:HL(r),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var n,r;return V(this,void 0,void 0,function(){var i,s,o;return j(this,function(a){return i=We(),s=(r=(n=i==null?void 0:i.document)===null||n===void 0?void 0:n.cookie.split("; "))!==null&&r!==void 0?r:[],o=s.find(function(l){return l.indexOf(e+"=")===0}),o?[2,o.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,n){var r;return V(this,void 0,void 0,function(){var i,s,o,a,l,c,d;return j(this,function(h){try{i=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,s=n!==null?i:-1,o=void 0,s&&(a=new Date,a.setTime(a.getTime()+s*24*60*60*1e3),o=a),l="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),o&&(l+="; expires=".concat(o.toUTCString())),l+="; path=/",this.options.domain&&(l+="; domain=".concat(this.options.domain)),this.options.secure&&(l+="; Secure"),this.options.sameSite&&(l+="; SameSite=".concat(this.options.sameSite)),c=We(),c&&(c.document.cookie=l)}catch(f){d=f instanceof Error?f.message:String(f),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(d))}return[2]})})},t.prototype.remove=function(e){return V(this,void 0,void 0,function(){return j(this,function(n){switch(n.label){case 0:return[4,this.set(e,null)];case 1:return n.sent(),[2]}})})},t.prototype.reset=function(){return V(this,void 0,void 0,function(){return j(this,function(e){return[2]})})},t}(),$L=function(t){try{return decodeURIComponent(atob(t))}catch{return}},HL=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},u_=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[td,e,t.substring(0,n)].filter(Boolean).join("_")},eg=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return V(this,void 0,void 0,function(){var e,n,r,i;return j(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),r="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,e)];case 2:return s.sent(),[4,n.get(r)];case 3:return i=s.sent(),[2,i===e];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return V(this,void 0,void 0,function(){var n;return j(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return n=r.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var n;return V(this,void 0,void 0,function(){return j(this,function(r){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(e))||void 0]})})},t.prototype.set=function(e,n){var r;return V(this,void 0,void 0,function(){return j(this,function(i){try{(r=this.storage)===null||r===void 0||r.setItem(e,JSON.stringify(n))}catch{}return[2]})})},t.prototype.remove=function(e){var n;return V(this,void 0,void 0,function(){return j(this,function(r){try{(n=this.storage)===null||n===void 0||n.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return V(this,void 0,void 0,function(){return j(this,function(n){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}(),qL=10,WL=1,ge={TAGS:"tags",COUNTERS:"counters",HISTOGRAMS:"histograms",EVENTS:"events",INTERNAL:"internal"},c_={LAST_FLUSH_TIMESTAMP:"last_flush_timestamp"},d_=function(){function t(e,n){this.dbPromise=null,this.logger=n,this.dbName="AMP_diagnostics_".concat(e.substring(0,10))}return t.isSupported=function(){var e;return((e=We())===null||e===void 0?void 0:e.indexedDB)!==void 0},t.prototype.getDB=function(){return V(this,void 0,void 0,function(){return j(this,function(e){return this.dbPromise||(this.dbPromise=this.openDB()),[2,this.dbPromise]})})},t.prototype.openDB=function(){var e=this;return new Promise(function(n,r){var i=indexedDB.open(e.dbName,WL);i.onerror=function(){e.dbPromise=null,r(new Error("Failed to open IndexedDB"))},i.onsuccess=function(){var s=i.result;s.onclose=function(){e.dbPromise=null,e.logger.debug("DiagnosticsStorage: DB connection closed.")},s.onerror=function(o){e.logger.debug("DiagnosticsStorage: A global database error occurred.",o),s.close()},n(s)},i.onupgradeneeded=function(s){var o=s.target.result;e.createTables(o)}})},t.prototype.createTables=function(e){if(e.objectStoreNames.contains(ge.TAGS)||e.createObjectStore(ge.TAGS,{keyPath:"key"}),e.objectStoreNames.contains(ge.COUNTERS)||e.createObjectStore(ge.COUNTERS,{keyPath:"key"}),e.objectStoreNames.contains(ge.HISTOGRAMS)||e.createObjectStore(ge.HISTOGRAMS,{keyPath:"key"}),!e.objectStoreNames.contains(ge.EVENTS)){var n=e.createObjectStore(ge.EVENTS,{keyPath:"id",autoIncrement:!0});n.createIndex("time_idx","time",{unique:!1})}e.objectStoreNames.contains(ge.INTERNAL)||e.createObjectStore(ge.INTERNAL,{keyPath:"key"})},t.prototype.setTags=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o=this;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=a.sent(),r=n.transaction([ge.TAGS],"readwrite"),i=r.objectStore(ge.TAGS),[2,new Promise(function(l){var c=Object.entries(e);r.oncomplete=function(){l()},r.onabort=function(d){o.logger.debug("DiagnosticsStorage: Failed to set tags",d),l()},c.forEach(function(d){var h=Y(d,2),f=h[0],g=h[1],m=i.put({key:f,value:g});m.onerror=function(E){o.logger.debug("DiagnosticsStorage: Failed to set tag",f,g,E)}})})];case 2:return s=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to set tags",s),[3,3];case 3:return[2]}})})},t.prototype.incrementCounters=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o=this;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=a.sent(),r=n.transaction([ge.COUNTERS],"readwrite"),i=r.objectStore(ge.COUNTERS),[2,new Promise(function(l){var c=Object.entries(e);r.oncomplete=function(){l()},r.onabort=function(d){o.logger.debug("DiagnosticsStorage: Failed to increment counters",d),l()},c.forEach(function(d){var h=Y(d,2),f=h[0],g=h[1],m=i.get(f);m.onsuccess=function(){var E=m.result,A=E?E.value:0,w=i.put({key:f,value:A+g});w.onerror=function(_){o.logger.debug("DiagnosticsStorage: Failed to update counter",f,_)}},m.onerror=function(E){o.logger.debug("DiagnosticsStorage: Failed to read existing counter",f,E)}})})];case 2:return s=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to increment counters",s),[3,3];case 3:return[2]}})})},t.prototype.setHistogramStats=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o=this;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=a.sent(),r=n.transaction([ge.HISTOGRAMS],"readwrite"),i=r.objectStore(ge.HISTOGRAMS),[2,new Promise(function(l){var c=Object.entries(e);r.oncomplete=function(){l()},r.onabort=function(d){o.logger.debug("DiagnosticsStorage: Failed to set histogram stats",d),l()},c.forEach(function(d){var h=Y(d,2),f=h[0],g=h[1],m=i.get(f);m.onsuccess=function(){var E=m.result,A;E?A={key:f,count:E.count+g.count,min:Math.min(E.min,g.min),max:Math.max(E.max,g.max),sum:E.sum+g.sum}:A={key:f,count:g.count,min:g.min,max:g.max,sum:g.sum};var w=i.put(A);w.onerror=function(_){o.logger.debug("DiagnosticsStorage: Failed to set histogram stats",f,_)}},m.onerror=function(E){o.logger.debug("DiagnosticsStorage: Failed to read existing histogram stats",f,E)}})})];case 2:return s=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to set histogram stats",s),[3,3];case 3:return[2]}})})},t.prototype.addEventRecords=function(e){return V(this,void 0,void 0,function(){var n,r,i,s,o=this;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e.length===0?[2]:[4,this.getDB()];case 1:return n=a.sent(),r=n.transaction([ge.EVENTS],"readwrite"),i=r.objectStore(ge.EVENTS),[2,new Promise(function(l){r.oncomplete=function(){l()},r.onabort=function(d){o.logger.debug("DiagnosticsStorage: Failed to add event records",d),l()};var c=i.count();c.onsuccess=function(){var d=c.result,h=Math.max(0,qL-d);h<e.length&&o.logger.debug("DiagnosticsStorage: Only added ".concat(h," of ").concat(e.length," events due to storage limit")),e.slice(0,h).forEach(function(f){var g=i.add(f);g.onerror=function(m){o.logger.debug("DiagnosticsStorage: Failed to add event record",m)}})},c.onerror=function(d){o.logger.debug("DiagnosticsStorage: Failed to count existing events",d)}})];case 2:return s=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to add event records",s),[3,3];case 3:return[2]}})})},t.prototype.setInternal=function(e,n){return V(this,void 0,void 0,function(){var r,i,s,o;return j(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.getDB()];case 1:return r=a.sent(),i=r.transaction([ge.INTERNAL],"readwrite"),s=i.objectStore(ge.INTERNAL),[2,new Promise(function(l,c){i.onabort=function(){return c(new Error("Failed to set internal value"))};var d=s.put({key:e,value:n});d.onsuccess=function(){return l()},d.onerror=function(){return c(new Error("Failed to set internal value"))}})];case 2:return o=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to set internal value",o),[3,3];case 3:return[2]}})})},t.prototype.getInternal=function(e){return V(this,void 0,void 0,function(){var n,r,i,s;return j(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getDB()];case 1:return n=o.sent(),r=n.transaction([ge.INTERNAL],"readonly"),i=r.objectStore(ge.INTERNAL),[2,new Promise(function(a,l){r.onabort=function(){return l(new Error("Failed to get internal value"))};var c=i.get(e);c.onsuccess=function(){return a(c.result)},c.onerror=function(){return l(new Error("Failed to get internal value"))}})];case 2:return s=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to get internal value",s),[2,void 0];case 3:return[2]}})})},t.prototype.getLastFlushTimestamp=function(){return V(this,void 0,void 0,function(){var e,n;return j(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getInternal(c_.LAST_FLUSH_TIMESTAMP)];case 1:return e=r.sent(),[2,e?parseInt(e.value,10):void 0];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to get last flush timestamp",n),[2,void 0];case 3:return[2]}})})},t.prototype.setLastFlushTimestamp=function(e){return V(this,void 0,void 0,function(){var n;return j(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.setInternal(c_.LAST_FLUSH_TIMESTAMP,e.toString())];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to set last flush timestamp",n),[3,3];case 3:return[2]}})})},t.prototype.clearTable=function(e,n){return new Promise(function(r,i){var s=e.objectStore(n),o=s.clear();o.onsuccess=function(){return r()},o.onerror=function(){return i(new Error("Failed to clear table ".concat(n)))}})},t.prototype.getAllAndClear=function(){return V(this,void 0,void 0,function(){var e,n,r,i,s,o,a,l;return j(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,this.getDB()];case 1:return e=c.sent(),n=e.transaction([ge.TAGS,ge.COUNTERS,ge.HISTOGRAMS,ge.EVENTS],"readwrite"),[4,Promise.all([this.getAllFromStore(n,ge.TAGS),this.getAllFromStore(n,ge.COUNTERS),this.getAllFromStore(n,ge.HISTOGRAMS),this.getAllFromStore(n,ge.EVENTS)])];case 2:return r=Y.apply(void 0,[c.sent(),4]),i=r[0],s=r[1],o=r[2],a=r[3],[4,Promise.all([this.clearTable(n,ge.COUNTERS),this.clearTable(n,ge.HISTOGRAMS),this.clearTable(n,ge.EVENTS)])];case 3:return c.sent(),[2,{tags:i,counters:s,histogramStats:o,events:a}];case 4:return l=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to get all and clear data",l),[2,{tags:[],counters:[],histogramStats:[],events:[]}];case 5:return[2]}})})},t.prototype.getAllFromStore=function(e,n){return new Promise(function(r,i){var s=e.objectStore(n),o=s.getAll();o.onsuccess=function(){return r(o.result)},o.onerror=function(){return i(new Error("Failed to get all from ".concat(n)))}})},t}(),GL=1e3,Bl=5*60*1e3,KL="https://diagnostics.prod.us-west-2.amplitude.com/v1/capture",QL="https://diagnostics.prod.eu-central-1.amplitude.com/v1/capture",mh=1e4,XL=10,YL=function(){function t(e,n,r,i){r===void 0&&(r="US"),this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},this.inMemoryEvents=[],this.saveTimer=null,this.flushTimer=null,this.apiKey=e,this.logger=n,this.serverUrl=r==="US"?KL:QL,this.logger.debug("DiagnosticsClient: Initializing with options",JSON.stringify(i,null,2)),this.config=G({enabled:!0,sampleRate:0},i),this.startTimestamp=Date.now(),this.shouldTrack=l_(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,d_.isSupported()?this.storage=new d_(e,n):this.logger.debug("DiagnosticsClient: IndexedDB is not supported"),this.initializeFlushInterval(),this.shouldTrack&&this.increment("sdk.diagnostics.sampled.in.and.enabled")}return t.prototype.isStorageAndTrackEnabled=function(){return!!this.storage&&!!this.shouldTrack},t.prototype.setTag=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryTags).length>=mh){this.logger.debug("DiagnosticsClient: Early return setTags as reaching memory limit");return}this.inMemoryTags[e]=n,this.startTimersIfNeeded()}},t.prototype.increment=function(e,n){if(n===void 0&&(n=1),!!this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryCounters).length>=mh){this.logger.debug("DiagnosticsClient: Early return increment as reaching memory limit");return}this.inMemoryCounters[e]=(this.inMemoryCounters[e]||0)+n,this.startTimersIfNeeded()}},t.prototype.recordHistogram=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryHistograms).length>=mh){this.logger.debug("DiagnosticsClient: Early return recordHistogram as reaching memory limit");return}var r=this.inMemoryHistograms[e];r?(r.count+=1,r.min=Math.min(r.min,n),r.max=Math.max(r.max,n),r.sum+=n):this.inMemoryHistograms[e]={count:1,min:n,max:n,sum:n},this.startTimersIfNeeded()}},t.prototype.recordEvent=function(e,n){if(this.isStorageAndTrackEnabled()){if(this.inMemoryEvents.length>=XL){this.logger.debug("DiagnosticsClient: Early return recordEvent as reaching memory limit");return}this.inMemoryEvents.push({event_name:e,time:Date.now(),event_properties:n}),this.startTimersIfNeeded()}},t.prototype.startTimersIfNeeded=function(){var e=this;this.saveTimer||(this.saveTimer=setTimeout(function(){e.saveAllDataToStorage().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to save all data to storage",n)}).finally(function(){e.saveTimer=null})},GL)),this.flushTimer||(this.flushTimer=setTimeout(function(){e._flush().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to flush",n)}).finally(function(){e.flushTimer=null})},Bl))},t.prototype.saveAllDataToStorage=function(){return V(this,void 0,void 0,function(){var e,n,r,i;return j(this,function(s){switch(s.label){case 0:return this.storage?(e=G({},this.inMemoryTags),n=G({},this.inMemoryCounters),r=G({},this.inMemoryHistograms),i=le([],Y(this.inMemoryEvents),!1),this.inMemoryEvents=[],this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},[4,Promise.all([this.storage.setTags(e),this.storage.incrementCounters(n),this.storage.setHistogramStats(r),this.storage.addEventRecords(i)])]):[2];case 1:return s.sent(),[2]}})})},t.prototype._flush=function(){return V(this,void 0,void 0,function(){var e,n,r,i,s,o,a,l,c,d;return j(this,function(h){switch(h.label){case 0:return this.storage?[4,this.saveAllDataToStorage()]:[2];case 1:return h.sent(),this.saveTimer=null,this.flushTimer=null,[4,this.storage.getAllAndClear()];case 2:return e=h.sent(),n=e.tags,r=e.counters,i=e.histogramStats,s=e.events,this.storage.setLastFlushTimestamp(Date.now()),o={},n.forEach(function(f){o[f.key]=f.value}),a={},r.forEach(function(f){a[f.key]=f.value}),l={},i.forEach(function(f){l[f.key]={count:f.count,min:f.min,max:f.max,avg:Math.round(f.sum/f.count*100)/100}}),c=s.map(function(f){return{event_name:f.event_name,time:f.time,event_properties:f.event_properties}}),Object.keys(a).length===0&&Object.keys(l).length===0&&c.length===0?[2]:(d={tags:o,histogram:l,counters:a,events:c},this.fetch(d),[2])}})})},t.prototype.fetch=function(e){return V(this,void 0,void 0,function(){var n,r;return j(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!We())throw new Error("DiagnosticsClient: Fetch is not supported");return[4,fetch(this.serverUrl,{method:"POST",headers:{"X-ApiKey":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return n=i.sent(),n.ok?(this.logger.debug("DiagnosticsClient: Successfully sent diagnostics data"),[3,3]):(this.logger.debug("DiagnosticsClient: Failed to send diagnostics data."),[2]);case 2:return r=i.sent(),this.logger.debug("DiagnosticsClient: Failed to send diagnostics data. ",r),[3,3];case 3:return[2]}})})},t.prototype.initializeFlushInterval=function(){return V(this,void 0,void 0,function(){var e,n,r;return j(this,function(i){switch(i.label){case 0:return this.storage?(e=Date.now(),[4,this.storage.getLastFlushTimestamp()]):[2];case 1:return n=i.sent()||-1,n===-1?(this.storage.setLastFlushTimestamp(e),this._setFlushTimer(Bl),[2]):(r=e-n,r>=Bl?(this._flush(),[2]):(this._setFlushTimer(Bl-r),[2]))}})})},t.prototype._setFlushTimer=function(e){var n=this;this.flushTimer=setTimeout(function(){n._flush().catch(function(r){n.logger.debug("DiagnosticsClient: Failed to flush",r)}).finally(function(){n.flushTimer=null})},e)},t.prototype._setSampleRate=function(e){this.logger.debug("DiagnosticsClient: Setting sample rate to",e),this.config.sampleRate=e,this.shouldTrack=l_(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,this.logger.debug("DiagnosticsClient: Should track is",this.shouldTrack)},t}(),tg=function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,r,i,s,o,a,l,c,d,h,f,g,m,E,A,w,_,I,k,O,L,S;if(typeof e!="object")return null;var T=e.code||0,b=this.buildStatus(T);switch(b){case Ke.Success:return{status:b,statusCode:T,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case Ke.Invalid:return{status:b,statusCode:T,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(l=e.events_with_missing_fields)!==null&&l!==void 0?l:{},eventsWithInvalidIdLengths:(c=e.events_with_invalid_id_lengths)!==null&&c!==void 0?c:{},epsThreshold:(d=e.eps_threshold)!==null&&d!==void 0?d:0,exceededDailyQuotaDevices:(h=e.exceeded_daily_quota_devices)!==null&&h!==void 0?h:{},silencedDevices:(f=e.silenced_devices)!==null&&f!==void 0?f:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledEvents:(E=e.throttled_events)!==null&&E!==void 0?E:[]}};case Ke.PayloadTooLarge:return{status:b,statusCode:T,body:{error:(A=e.error)!==null&&A!==void 0?A:""}};case Ke.RateLimit:return{status:b,statusCode:T,body:{error:(w=e.error)!==null&&w!==void 0?w:"",epsThreshold:(_=e.eps_threshold)!==null&&_!==void 0?_:0,throttledDevices:(I=e.throttled_devices)!==null&&I!==void 0?I:{},throttledUsers:(k=e.throttled_users)!==null&&k!==void 0?k:{},exceededDailyQuotaDevices:(O=e.exceeded_daily_quota_devices)!==null&&O!==void 0?O:{},exceededDailyQuotaUsers:(L=e.exceeded_daily_quota_users)!==null&&L!==void 0?L:{},throttledEvents:(S=e.throttled_events)!==null&&S!==void 0?S:[]}};case Ke.Timeout:default:return{status:b,statusCode:T}}},t.prototype.buildStatus=function(e){return LS(e)?Ke.Success:e===429?Ke.RateLimit:e===413?Ke.PayloadTooLarge:e===408?Ke.Timeout:e>=400&&e<500?Ke.Invalid:e>=500?Ke.Failed:Ke.Unknown},t}(),JL=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return V(this,void 0,void 0,function(){var i,s,o;return j(this,function(a){switch(a.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(r),method:"POST"},[4,fetch(n,i)];case 1:return s=a.sent(),[4,s.text()];case 2:o=a.sent();try{return[2,this.buildResponse(JSON.parse(o))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e}(tg),ZL=function(){function t(e,n){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=n}return t.prototype.fetchConfig=function(){var e=null,n={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(i){return this.logger.debug("Remote config localstorage failed to access: ",i),Promise.resolve(n)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(n);try{var r=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(r))),Promise.resolve({remoteConfig:r.remoteConfig,lastFetch:new Date(r.lastFetch)})}catch(i){return this.logger.debug("Remote config localstorage failed to parse: ",i),localStorage.removeItem(this.key),Promise.resolve(n)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(n){this.logger.debug("Remote config localstorage failed to set: ",n)}return Promise.resolve(!1)},t}(),eM="https://sr-client-cfg.amplitude.com/config",tM="https://sr-client-cfg.eu.amplitude.com/config",nM=3,rM=1e3,iM=function(){function t(e,n,r,i){r===void 0&&(r="US"),this.callbackInfos=[],this.apiKey=e,this.serverUrl=i||(r==="US"?eM:tM),this.logger=n,this.storage=new ZL(e,n)}return t.prototype.subscribe=function(e,n,r){var i=ni(),s={id:i,key:e,deliveryMode:n,callback:r};return this.callbackInfos.push(s),n==="all"?this.subscribeAll(s):this.subscribeWaitForRemote(s,n.timeout),i},t.prototype.unsubscribe=function(e){var n=this.callbackInfos.findIndex(function(r){return r.id===e});return n===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(n,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return V(this,void 0,void 0,function(){var e,n=this;return j(this,function(r){switch(r.label){case 0:return[4,this.fetch()];case 1:return e=r.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(i){n.sendCallback(i,e,"remote")}),[2]}})})},t.prototype.subscribeAll=function(e){return V(this,void 0,void 0,function(){var n,r,i,s=this;return j(this,function(o){switch(o.label){case 0:return n=this.fetch().then(function(a){s.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(a))),s.sendCallback(e,a,"remote"),s.storage.setConfig(a)}),r=this.storage.fetchConfig().then(function(a){return a}),[4,Promise.race([n,r])];case 1:return i=o.sent(),i!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(i))),this.sendCallback(e,i,"cache")),[4,n];case 2:return o.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,n){return V(this,void 0,void 0,function(){var r,i,i;return j(this,function(s){switch(s.label){case 0:r=new Promise(function(o,a){setTimeout(function(){a("Timeout exceeded")},n)}),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,Promise.race([this.fetch(),r])];case 2:return i=s.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,i,"remote"),this.storage.setConfig(i),[3,5];case 3:return s.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return i=s.sent(),i.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,i,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,i,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,n,r){e.lastCallback=new Date;var i;e.key?i=e.key.split(".").reduce(function(s,o){return s===null?s:o in s?s[o]:null},n.remoteConfig):i=n.remoteConfig,e.callback(i,r,n.lastFetch)},t.prototype.fetch=function(e,n){return e===void 0&&(e=nM),n===void 0&&(n=rM),V(this,void 0,void 0,function(){var r,i,s,o,a,l,c=this;return j(this,function(d){switch(d.label){case 0:r=n/e,i={remoteConfig:null,lastFetch:new Date},s=function(h){var f,g,m,E,A,w;return j(this,function(_){switch(_.label){case 0:f=new AbortController,g=setTimeout(function(){return f.abort()},n),_.label=1;case 1:return _.trys.push([1,7,8,9]),[4,fetch(o.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:f.signal})];case 2:return m=_.sent(),m.ok?[3,4]:[4,m.text()];case 3:return E=_.sent(),o.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(m.status,": ").concat(E)),[3,6];case 4:return[4,m.json()];case 5:return A=_.sent(),[2,{value:{remoteConfig:A,lastFetch:new Date}}];case 6:return[3,9];case 7:return w=_.sent(),w instanceof Error&&w.name==="AbortError"?o.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(n,"ms")):o.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),w),[3,9];case 8:return clearTimeout(g),[7];case 9:return h<e-1?[4,new Promise(function(I){return setTimeout(I,c.getJitterDelay(r))})]:[3,11];case 10:_.sent(),_.label=11;case 11:return[2]}})},o=this,a=0,d.label=1;case 1:return a<e?[5,s(a)]:[3,4];case 2:if(l=d.sent(),typeof l=="object")return[2,l.value];d.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),n=new URLSearchParams;return n.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(n.toString())},t.CONFIG_GROUP="browser",t}(),sM=null,oM=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],US="data-amp-track-",aM=["div","span","h1","h2","h3","h4","h5","h6"],lM=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],uM=le(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],Y(lM),!1),cM=["*"],dM=1e3,hM=4,fM=50;function pM(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0}function FS(t,e,n){if(t){var r=e.map(h_),i=n.map(h_);BS({json:t,allowlist:r,excludelist:i,ancestors:[]})}}function BS(t){var e,n,r=t.json,i=t.targetObject,s=t.allowlist,o=t.excludelist,a=t.ancestors,l=t.parentObject,c=t.targetKey;i||(i=r);var d=Object.keys(i);try{for(var h=ue(d),f=h.next();!f.done;f=h.next()){var g=f.value,m=le(le([],Y(a),!1),[g],!1);pM(i[g])?(!f_(m,s)||f_(m,o))&&delete i[g]:BS({json:r,targetObject:i[g],allowlist:s,excludelist:o,ancestors:m,parentObject:i,targetKey:g})}}catch(E){e={error:E}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}Object.keys(i).length===0&&l&&c&&delete l[c]}function h_(t){return t.startsWith("/")&&(t=t.slice(1)),t.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function Jf(t,e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=0),r===e.length)return n===t.length;if(n===t.length){for(;r<e.length&&e[r]==="**";)r++;return r===e.length}var i=e[r];if(i==="**"){if(r+1===e.length)return!0;for(var s=n;s<=t.length;s++)if(Jf(t,e,s,r+1))return!0;return!1}else return i==="*"||i===t[n]?Jf(t,e,n+1,r+1):!1}function f_(t,e){return e.some(function(n){return Jf(t,n)})}var mM=500,zS=100,gM=function(){function t(e){this.request=e}return t.prototype.headers=function(e){var n,r;e===void 0&&(e=[]);var i=this.request.headers,s={};if(Array.isArray(i))i.forEach(function(h){var f=Y(h,2),g=f[0],m=f[1];s[g]=m});else if(i instanceof Headers)i.forEach(function(h,f){s[f]=h});else if(typeof i=="object"&&i!==null)try{for(var o=ue(Object.entries(i)),a=o.next();!a.done;a=o.next()){var l=Y(a.value,2),c=l[0],d=l[1];s[c]=d}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return rd(s,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=We();if(e!=null&&e.TextEncoder){var n=this.request.body;return this._bodySize=$S(n,zS),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),V(this,void 0,void 0,function(){var r;return j(this,function(i){return e.length===0?[2,null]:(r=this.body,[2,ng(r,e,n)])})})},t}(),vM=function(){function t(e,n){this.bodyRaw=e,this.requestHeaders=n}return t.prototype.headers=function(e){return e===void 0&&(e=[]),rd(this.requestHeaders,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){return $S(this.bodyRaw,zS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.bodyRaw=="string"?this.bodyRaw:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),V(this,void 0,void 0,function(){var r;return j(this,function(i){return e.length===0?[2,null]:(r=this.body,[2,ng(r,e,n)])})})},t}();function $S(t,e){var n,r,i,s=We(),o=s==null?void 0:s.TextEncoder;if(o){var a;if(typeof t=="string")a=t,i=new o().encode(a).length;else if(t instanceof Blob)a=t,i=a.size;else if(t instanceof URLSearchParams)a=t,i=new o().encode(a.toString()).length;else if(ArrayBuffer.isView(t))a=t,i=a.byteLength;else if(t instanceof ArrayBuffer)a=t,i=a.byteLength;else if(t instanceof FormData){var l=t,c=0,d=0;try{for(var h=ue(l.entries()),f=h.next();!f.done;f=h.next()){var g=Y(f.value,2),m=g[0],E=g[1];if(c+=m.length,typeof E=="string")c+=new o().encode(E).length;else if(E instanceof Blob)c+=E.size;else return;if(++d>=e)return}}catch(A){n={error:A}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}i=c}else if(t instanceof ReadableStream){a=t;return}return i}}var yM=function(){function t(e){this.response=e}return t.prototype.headers=function(e){var n;if(e===void 0&&(e=[]),this.response.headers instanceof Headers){var r=this.response.headers,i={};return(n=r==null?void 0:r.forEach)===null||n===void 0||n.call(r,function(s,o){i[o]=s}),rd(i,{allow:e})}},Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,n;if(this._bodySize!==void 0)return this._bodySize;var r=(n=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||n===void 0?void 0:n.call(e,"content-length"),i=r?parseInt(r,10):void 0;return this._bodySize=i,i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t.prototype.text=function(){return V(this,void 0,void 0,function(){var e,n,r;return j(this,function(i){switch(i.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),i.label=1;case 1:return i.trys.push([1,3,,4]),e=this.clonedResponse.text(),n=new Promise(function(s){return setTimeout(function(){return s(null)},mM)}),[4,Promise.race([e,n])];case 2:return r=i.sent(),[2,r];case 3:return i.sent(),[2,null];case 4:return[2]}})})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),V(this,void 0,void 0,function(){var r;return j(this,function(i){switch(i.label){case 0:return e.length===0?[2,null]:[4,this.text()];case 1:return r=i.sent(),[2,ng(r,e,n)]}})})},t}(),_M=function(){function t(e,n,r,i){this.statusCode=e,this.headersString=n,this.size=r,this.getJson=i}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),t.prototype.headers=function(e){var n,r;if(e===void 0&&(e=[]),!this.headersString)return{};var i={},s=this.headersString.split(`\r
`);try{for(var o=ue(s),a=o.next();!a.done;a=o.next()){var l=a.value,c=Y(l.split(": "),2),d=c[0],h=c[1];d&&h&&(i[d]=h)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return rd(i,{allow:e})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),V(this,void 0,void 0,function(){var r;return j(this,function(i){return e.length===0?[2,null]:(r=this.getJson(),r?(FS(r,e,n),[2,r]):[2,null])})})},t}();function ng(t,e,n){if(!t)return null;try{var r=JSON.parse(t);return FS(r,e,n),r}catch{return null}}var Ko;(function(t){t.REDACT="redact",t.REMOVE="remove"})(Ko||(Ko={}));var p_="[REDACTED]",rd=function(t,e){var n,r,i=e.allow,s=i===void 0?[]:i,o=e.strategy,a=o===void 0?Ko.REMOVE:o,l=le([],Y(iL),!1),c={},d=function(m){var E=m.toLowerCase();l.find(function(A){return A.toLowerCase()===E})?a===Ko.REDACT&&(c[m]=p_):s.find(function(A){return A.toLowerCase()===E})?c[m]=t[m]:a===Ko.REDACT&&(c[m]=p_)};try{for(var h=ue(Object.keys(t)),f=h.next();!f.done;f=h.next()){var g=f.value;d(g)}}catch(m){n={error:m}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return c},EM=function(){function t(e,n,r,i,s,o,a,l,c,d,h){a===void 0&&(a=0),this.type=e,this.method=n,this.timestamp=r,this.startTime=i,this.url=s,this.requestWrapper=o,this.status=a,this.duration=l,this.responseWrapper=c,this.error=d,this.endTime=h}return t.prototype.toSerializable=function(){var e,n,r,i,s={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers(le([],Y(cc),!1)),requestBodySize:(n=this.requestWrapper)===null||n===void 0?void 0:n.bodySize,responseHeaders:(r=this.responseWrapper)===null||r===void 0?void 0:r.headers(le([],Y(cc),!1)),responseBodySize:(i=this.responseWrapper)===null||i===void 0?void 0:i.bodySize};return Object.fromEntries(Object.entries(s).filter(function(o){var a=Y(o,2);a[0];var l=a[1];return l!==void 0}))},t}();function wM(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var TM=function(){function t(e,n){n===void 0&&(n=ni()),this.callback=e,this.id=n}return t}(),IM=function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var n=We();t.isSupported()&&(this.globalScope=n)}return t.isSupported=function(){var e=We();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,n){var r,i,s,o,a,l,c,d,h,f;if(this.logger||(this.logger=n),this.eventCallbacks.set(e.id,e),!this.isObserving){var g=(s=(i=(r=this.globalScope)===null||r===void 0?void 0:r.XMLHttpRequest)===null||i===void 0?void 0:i.prototype)===null||s===void 0?void 0:s.open,m=(l=(a=(o=this.globalScope)===null||o===void 0?void 0:o.XMLHttpRequest)===null||a===void 0?void 0:a.prototype)===null||l===void 0?void 0:l.send,E=(h=(d=(c=this.globalScope)===null||c===void 0?void 0:c.XMLHttpRequest)===null||d===void 0?void 0:d.prototype)===null||h===void 0?void 0:h.setRequestHeader;g&&m&&E&&this.observeXhr(g,m,E);var A=(f=this.globalScope)===null||f===void 0?void 0:f.fetch;A&&this.observeFetch(A),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var n=this;this.eventCallbacks.forEach(function(r){var i;try{r.callback(e)}catch(s){(i=n.logger)===null||i===void 0||i.debug("an unexpected error occurred while triggering event callbacks",s)}})},t.prototype.handleNetworkRequestEvent=function(e,n,r,i,s,o,a){var l;if(!(o===void 0||a===void 0)){var c,d="GET";if(wM(n)?(c=n.url,d=n.method):c=(l=n==null?void 0:n.toString)===null||l===void 0?void 0:l.call(n),c)try{var h=new URL(c);c="".concat(h.protocol,"//").concat(h.host).concat(h.pathname).concat(h.search).concat(h.hash)}catch{}d=(r==null?void 0:r.method)||d;var f,g;i&&(f=i.status),s&&(g={name:s.name||"UnknownError",message:s.message||"An unknown error occurred"},f=0);var m=Math.floor(performance.now()-a),E=Math.floor(o+m),A=new EM(e,d,o,o,c,r,f,m,i,g,E);this.triggerEventCallbacks(A)}},t.prototype.getTimestamps=function(){var e,n;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(n=performance==null?void 0:performance.now)===null||n===void 0?void 0:n.call(performance)}},t.prototype.observeFetch=function(e){var n=this;!this.globalScope||!e||(this.globalScope.fetch=function(r,i){return V(n,void 0,void 0,function(){var s,o,a,l,c,d;return j(this,function(h){switch(h.label){case 0:try{s=this.getTimestamps()}catch(f){(c=this.logger)===null||c===void 0||c.debug("an unexpected error occurred while retrieving timestamps",f)}h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e(r,i)];case 2:return o=h.sent(),[3,4];case 3:return l=h.sent(),a=l,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",r,i?new gM(i):void 0,o?new yM(o):void 0,a,s==null?void 0:s.startTime,s==null?void 0:s.durationStart)}catch(f){(d=this.logger)===null||d===void 0||d.debug("an unexpected error occurred while handling fetch",f)}if(o)return[2,o];throw a}})})})},t.createXhrJsonParser=function(e,n){return function(){var r,i;try{if(e.responseType==="json"){if(!((r=n.globalScope)===null||r===void 0)&&r.structuredClone)return n.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(s){return s instanceof Error&&s.name==="InvalidStateError"&&((i=n.logger)===null||i===void 0||i.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'"))),null}return null}},t.prototype.observeXhr=function(e,n,r){if(!(!this.globalScope||!e||!n)){var i=this.globalScope.XMLHttpRequest.prototype,s=this;i.open=function(){for(var o,a,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var d=this,h=Y(l,2),f=h[0],g=h[1];try{d.$$AmplitudeAnalyticsEvent=G({method:f,url:(o=g==null?void 0:g.toString)===null||o===void 0?void 0:o.call(g),headers:{}},s.getTimestamps())}catch(m){(a=s.logger)===null||a===void 0||a.error("an unexpected error occurred while calling xhr open",m)}return e.apply(d,l)},i.send=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l=this,c=l,d=t.createXhrJsonParser(l,s),h=o[0],f=c.$$AmplitudeAnalyticsEvent;return c.addEventListener("loadend",function(){var g;try{var m=c.getAllResponseHeaders(),E=c.getResponseHeader("content-length"),A=new _M(c.status,m,E?parseInt(E,10):void 0,d),w=c.$$AmplitudeAnalyticsEvent.headers,_=new vM(h,w);f.status=c.status,s.handleNetworkRequestEvent("xhr",{url:f.url,method:f.method},_,A,void 0,f.startTime,f.durationStart)}catch(I){(g=s.logger)===null||g===void 0||g.error("an unexpected error occurred while handling xhr send",I)}}),n.apply(c,o)},i.setRequestHeader=function(o,a){var l,c=this;try{c.$$AmplitudeAnalyticsEvent.headers[o]=a}catch(d){(l=s.logger)===null||l===void 0||l.error("an unexpected error occurred while calling xhr setRequestHeader",d)}r.apply(c,[o,a])}}},t}(),m_=new IM,HS=function(){function t(){}return t.prototype.parse=function(){return V(this,void 0,void 0,function(){return j(this,function(e){return[2,G(G(G(G({},nd),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=dc(),n=e[JD],r=e[ZD],i=e[eL],s=e[tL],o=e[nL],a=e[rL];return{utm_campaign:n,utm_content:r,utm_id:i,utm_medium:s,utm_source:o,utm_term:a}},t.prototype.getReferrer=function(){var e,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},t.prototype.getClickIds=function(){var e,n=dc();return e={},e[K0]=n[K0],e[Q0]=n[Q0],e[X0]=n[X0],e[Y0]=n[Y0],e[J0]=n[J0],e[Z0]=n[Z0],e[e_]=n[e_],e[t_]=n[t_],e[n_]=n[n_],e[r_]=n[r_],e[i_]=n[i_],e},t}(),Qo="data-amp-mask",Nr="*****",SM=/\b(?:\d[ -]*?){13,16}\b/,AM=/(\d{3}-?\d{2}-?\d{4})/g,xM=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,rg=function(t,e){var n,r;if(e===void 0&&(e=[]),typeof t!="string")return"";var i=t;i=i.replace(SM,Nr),i=i.replace(AM,Nr),i=i.replace(xM,Nr);try{for(var s=ue(e),o=s.next();!o.done;o=s.next()){var a=o.value;try{i=i.replace(a,Nr)}catch{}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},ig=function(t){if(typeof document>"u"||!document.title)return"";var e=document.querySelector("title");return e&&e.hasAttribute(Qo)?Nr:t?t(document.title):document.title},Xs=function(t,e){return typeof t=="boolean"?t:(t==null?void 0:t[e])!==!1},qS=function(t){return Xs(t,"attribution")},bM=function(t){return Xs(t,"fileDownloads")},PM=function(t){return Xs(t,"formInteractions")},WS=function(t){return Xs(t,"pageViews")},g_=function(t){return Xs(t,"sessions")},CM=function(t){return Xs(t,"pageUrlEnrichment")},GS=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},KS=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},RM=function(t){return typeof t=="boolean"?t:typeof t=="object"&&t.webVitals===!0},QS=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},kM=function(t){if(KS(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},NM=function(t){if(QS(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},OM=function(t){var e;if(GS(t.autocapture)){var n=void 0;return typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object"?n=t.autocapture.networkTracking:t.networkTrackingOptions&&(n=t.networkTrackingOptions),G(G({},n),{captureRules:(e=n==null?void 0:n.captureRules)===null||e===void 0?void 0:e.map(function(r){var i,s,o;if(!((i=r.urls)===null||i===void 0)&&i.length&&(!((s=r.hosts)===null||s===void 0)&&s.length)){var a=JSON.stringify(r.hosts),l=JSON.stringify(r.urls);return(o=t.loggerProvider)===null||o===void 0||o.warn("Found network capture rule with both urls='".concat(l,"' and hosts='").concat(a,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),G(G({},r),{hosts:void 0})}return r})})}},DM=function(t){var e=function(){return!1},n=void 0,r,i=t.pageCounter,s=WS(t.defaultTracking);return s&&(e=void 0,r=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(r=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:n,eventType:r,pageCounter:i}},LM=function(t){return qS(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?G({},t.defaultTracking.attribution):{}},gh=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.name,s=r.args,o=r.resolve,a=t&&t[i];if(typeof a=="function"){var l=a.apply(t,s);typeof o=="function"&&o(l==null?void 0:l.promise)}}return t},vh=function(t){var e=t;return e&&e._q!==void 0},sg="2.30.0",XS="amplitude-ts",MM="Web",jM="$remote",VM=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(XS,"/").concat(sg),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var n,r;return V(this,void 0,void 0,function(){var i,s,o,a;return j(this,function(l){return i=new Date().getTime(),s=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,o=(r=e.event_id)!==null&&r!==void 0?r:s+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=i),a=G(G(G(G(G(G(G(G({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:MM}),this.config.trackingOptions.language&&{language:BL()}),this.config.trackingOptions.ipAddress&&{ip:jM}),{insert_id:ni(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent}),[2,a]})})},t}(),zl=1e3,YS=function(t){Vt(e,t);function e(n){var r=this,i,s,o;try{o=(i=We())===null||i===void 0?void 0:i.localStorage}catch(a){(s=n==null?void 0:n.loggerProvider)===null||s===void 0||s.debug("Failed to access localStorage. error=".concat(JSON.stringify(a))),o=void 0}return r=t.call(this,o)||this,r.loggerProvider=n==null?void 0:n.loggerProvider,r}return e.prototype.set=function(n,r){var i;return V(this,void 0,void 0,function(){var s;return j(this,function(o){switch(o.label){case 0:return Array.isArray(r)&&r.length>zl?(s=r.length-zl,[4,t.prototype.set.call(this,n,r.slice(0,zl))]):[3,2];case 1:return o.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(zl,".")),[3,4];case 2:return[4,t.prototype.set.call(this,n,r)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e}(eg),UM=function(t){Vt(e,t);function e(){var n;return t.call(this,(n=We())===null||n===void 0?void 0:n.sessionStorage)||this}return e}(eg),FM=function(t){Vt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={done:4},n}return e.prototype.send=function(n,r){return V(this,void 0,void 0,function(){var i=this;return j(this,function(s){return[2,new Promise(function(o,a){typeof XMLHttpRequest>"u"&&a(new Error("XHRTransport is not supported."));var l=new XMLHttpRequest;l.open("POST",n,!0),l.onreadystatechange=function(){if(l.readyState===i.state.done){var c=l.responseText;try{o(i.buildResponse(JSON.parse(c)))}catch{o(i.buildResponse({code:l.status}))}}},l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Accept","*/*"),l.send(JSON.stringify(r))})]})})},e}(tg),BM=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return V(this,void 0,void 0,function(){var i=this;return j(this,function(s){return[2,new Promise(function(o,a){var l=We();if(!(l!=null&&l.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var c=JSON.stringify(r),d=l.navigator.sendBeacon(n,JSON.stringify(r));return o(d?i.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:c.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(h){a(h)}})]})})},e}(tg),zM=function(t,e,n){return n===void 0&&(n=!0),V(void 0,void 0,void 0,function(){var r,i,s,o,a,l,c,d,h;return j(this,function(f){switch(f.label){case 0:return r=FL(t),[4,e.getRaw(r)];case 1:return i=f.sent(),i?n?[4,e.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:f.sent(),f.label=3;case 3:return s=Y(i.split("."),6),o=s[0],a=s[1],l=s[2],c=s[3],d=s[4],h=s[5],[2,{deviceId:o,userId:$M(a),sessionId:yh(c),lastEventId:yh(h),lastEventTime:yh(d),optOut:!!l}]}})})},yh=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},$M=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},An="[Amplitude]",v_="".concat(An," Form Started"),HM="".concat(An," Form Submitted"),qM="".concat(An," File Downloaded"),y_="session_start",__="session_end",WM="".concat(An," File Extension"),GM="".concat(An," File Name"),KM="".concat(An," Link ID"),QM="".concat(An," Link Text"),XM="".concat(An," Link URL"),_h="".concat(An," Form ID"),Eh="".concat(An," Form Name"),wh="".concat(An," Form Destination"),hc="cookie",YM="US",JM=function(t){Vt(e,t);function e(n,r,i,s,o,a,l,c,d,h,f,g,m,E,A,w,_,I,k,O,L,S,T,b,P,C,N,R,$,W,oe,be,H,J,Z,pe,ce,ae,Ie,Ct){i===void 0&&(i=new Zm),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),c===void 0&&(c=1e3),d===void 0&&(d=5),h===void 0&&(h=30),f===void 0&&(f=hc),w===void 0&&(w=new OS),_===void 0&&(_=Xt.Warn),k===void 0&&(k=!1),O===void 0&&(O=!1),T===void 0&&(T=""),b===void 0&&(b=YM),C===void 0&&(C=30*60*1e3),N===void 0&&(N=new YS({loggerProvider:w})),R===void 0&&(R={ipAddress:!0,language:!0,platform:!0}),$===void 0&&($="fetch"),W===void 0&&(W=!1),oe===void 0&&(oe=!0),ce===void 0&&(ce=!0),ae===void 0&&(ae=0);var K=t.call(this,{apiKey:n,storageProvider:N,transportProvider:JS($)})||this;return K.apiKey=n,K.appVersion=r,K.cookieOptions=s,K.defaultTracking=o,K.autocapture=a,K.flushIntervalMillis=c,K.flushMaxRetries=d,K.flushQueueSize=h,K.identityStorage=f,K.ingestionMetadata=g,K.instanceName=m,K.loggerProvider=w,K.logLevel=_,K.minIdLength=I,K.offline=k,K.partnerId=L,K.plan=S,K.serverUrl=T,K.serverZone=b,K.sessionTimeout=C,K.storageProvider=N,K.trackingOptions=R,K.transport=$,K.useBatch=W,K.fetchRemoteConfig=oe,K.networkTrackingOptions=Z,K.identify=pe,K.enableDiagnostics=ce,K.diagnosticsSampleRate=ae,K.diagnosticsClient=Ie,K.remoteConfig=Ct,K.version=sg,K._optOut=!1,K._cookieStorage=i,K.deviceId=l,K.lastEventId=E,K.lastEventTime=A,K.optOut=O,K.sessionId=P,K.pageCounter=H,K.userId=be,K.debugLogsEnabled=J,K.loggerProvider.enable(J?Xt.Debug:K.logLevel),K.networkTrackingOptions=Z,K.identify=pe,K.enableDiagnostics=ce,K.diagnosticsSampleRate=ae,K.diagnosticsClient=Ie,oe&&(K.remoteConfig||(K.remoteConfig={fetchRemoteConfig:oe}),K.remoteConfig.fetchRemoteConfig||(K.remoteConfig.fetchRemoteConfig=oe)),K}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(VS(this.apiKey),n)},e}(IL),ZM=function(t,e,n){return e===void 0&&(e={}),V(void 0,void 0,void 0,function(){var r,i,s,o,a,l,c,d,h,f,g,m,E,A,w,_,I,k,O,L,S,T,b,P,C,N,R,$,W,oe,be,H,J,Z,pe,ce,ae,Ie,Ct,K,Wt,Js,Zs,hr,fr;return j(this,function(fn){switch(fn.label){case 0:return r=e.identityStorage||hc,S={},r===hc?[3,1]:(s="",[3,5]);case 1:return(b=(T=e.cookieOptions)===null||T===void 0?void 0:T.domain)!==null&&b!==void 0?(o=b,[3,4]):[3,2];case 2:return[4,tj()];case 3:o=fn.sent(),fn.label=4;case 4:s=o,fn.label=5;case 5:return i=G.apply(void 0,[(S.domain=s,S.expiration=365,S.sameSite="Lax",S.secure=!1,S.upgrade=!0,S),e.cookieOptions]),a=ej(e.identityStorage,i),[4,zM(t,a,(C=(P=e.cookieOptions)===null||P===void 0?void 0:P.upgrade)!==null&&C!==void 0?C:!0)];case 6:return l=fn.sent(),[4,a.get(VS(t))];case 7:return c=fn.sent(),d=dc(),h=d.ampTimestamp?Number(d.ampTimestamp):void 0,f=h?Date.now()<h:!0,g=(oe=(W=($=(N=e.deviceId)!==null&&N!==void 0?N:f?(R=d.ampDeviceId)!==null&&R!==void 0?R:d.deviceId:void 0)!==null&&$!==void 0?$:c==null?void 0:c.deviceId)!==null&&W!==void 0?W:l.deviceId)!==null&&oe!==void 0?oe:ni(),m=(be=c==null?void 0:c.lastEventId)!==null&&be!==void 0?be:l.lastEventId,E=(H=c==null?void 0:c.lastEventTime)!==null&&H!==void 0?H:l.lastEventTime,A=(Z=(J=e.optOut)!==null&&J!==void 0?J:c==null?void 0:c.optOut)!==null&&Z!==void 0?Z:l.optOut,w=(pe=c==null?void 0:c.sessionId)!==null&&pe!==void 0?pe:l.sessionId,_=(ae=(ce=e.userId)!==null&&ce!==void 0?ce:c==null?void 0:c.userId)!==null&&ae!==void 0?ae:l.userId,n.previousSessionDeviceId=(Ie=c==null?void 0:c.deviceId)!==null&&Ie!==void 0?Ie:l.deviceId,n.previousSessionUserId=(Ct=c==null?void 0:c.userId)!==null&&Ct!==void 0?Ct:l.userId,I={ipAddress:(Wt=(K=e.trackingOptions)===null||K===void 0?void 0:K.ipAddress)!==null&&Wt!==void 0?Wt:!0,language:(Zs=(Js=e.trackingOptions)===null||Js===void 0?void 0:Js.language)!==null&&Zs!==void 0?Zs:!0,platform:(fr=(hr=e.trackingOptions)===null||hr===void 0?void 0:hr.platform)!==null&&fr!==void 0?fr:!0},k=c==null?void 0:c.pageCounter,O=c==null?void 0:c.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),L=new JM(t,e.appVersion,a,i,e.defaultTracking,e.autocapture,g,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,r,e.ingestionMetadata,e.instanceName,m,E,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,A,e.partnerId,e.plan,e.serverUrl,e.serverZone,w,e.sessionTimeout,e.storageProvider,I,e.transport,e.useBatch,e.fetchRemoteConfig,_,k,O,e.networkTrackingOptions,e.identify,e.enableDiagnostics,void 0,void 0,e.remoteConfig),[4,L.storageProvider.isEnabled()];case 8:return fn.sent()||(L.loggerProvider.warn("Storage provider ".concat(L.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),L.storageProvider=new Zm),[2,L]}})})},ej=function(t,e){switch(t===void 0&&(t=hc),e===void 0&&(e={}),t){case"localStorage":return new YS;case"sessionStorage":return new UM;case"none":return new Zm;case"cookie":default:return new Yf(G(G({},e),{expirationDays:e.expiration}))}},JS=function(t){return t==="xhr"?new FM:t==="beacon"?new BM:new JL},tj=function(t){return V(void 0,void 0,void 0,function(){var e,n,r,i,s,s,o,a,l,c;return j(this,function(d){switch(d.label){case 0:return[4,new Yf().isEnabled()];case 1:if(!d.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,n=e.split("."),r=[],i="AMP_TLDTEST",s=n.length-2;s>=0;--s)r.push(n.slice(s).join("."));s=0,d.label=2;case 2:return s<r.length?(o=r[s],a={domain:"."+o},l=new Yf(a),[4,l.set(i,1)]):[3,7];case 3:return d.sent(),[4,l.get(i)];case 4:return c=d.sent(),c?[4,l.remove(i)]:[3,6];case 5:return d.sent(),[2,"."+o];case 6:return s++,[3,2];case 7:return[2,""]}})})},nj=function(t){var e={};for(var n in t){var r=t[n];r&&(e[n]=r)}return e},rj="[Amplitude] Page Viewed",ij=function(t){t===void 0&&(t={});var e,n=We(),r=void 0,i=!1,s,o=t.trackOn,a=t.trackHistoryChanges,l=t.eventType,c=l===void 0?rj:l,d=function(w){var _=w;try{_=decodeURI(w)}catch(I){r==null||r.error("Malformed URI sequence: ",I)}return _},h=function(){return V(void 0,void 0,void 0,function(){var w,_,I;return j(this,function(k){switch(k.label){case 0:return w=d(typeof location<"u"&&location.href||""),I={event_type:c},_=[{}],[4,sj()];case 1:return[2,(I.event_properties=G.apply(void 0,[G.apply(void 0,_.concat([k.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":w,"[Amplitude] Page Path":typeof location<"u"&&d(location.pathname)||"","[Amplitude] Page Title":ig(rg),"[Amplitude] Page URL":w.split("?")[0]}]),I)]}})})},f=function(){return typeof o>"u"||typeof o=="function"&&o()},g=typeof location<"u"?location.href:null,m=function(){return V(void 0,void 0,void 0,function(){var w,_,I,k;return j(this,function(O){switch(O.label){case 0:return w=location.href,_=aj(a,w,g||"")&&f(),g=w,_?(r==null||r.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return k=(I=e).track,[4,h()];case 2:k.apply(I,[O.sent()]),O.label=3;case 3:O.label=4;case 4:return[2]}})})},E=function(){m()},A={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(w,_){return V(void 0,void 0,void 0,function(){var I,k;return j(this,function(O){switch(O.label){case 0:return e=_,s=w,r=w.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),i=!0,n&&(n.addEventListener("popstate",E),n.history.pushState=new Proxy(n.history.pushState,{apply:function(L,S,T){var b=Y(T,3),P=b[0],C=b[1],N=b[2];L.apply(S,[P,C,N]),i&&m()}})),f()?(r.log("Tracking page view event"),k=(I=e).track,[4,h()]):[3,2];case 1:k.apply(I,[O.sent()]),O.label=2;case 2:return[2]}})})},execute:function(w){return V(void 0,void 0,void 0,function(){var _;return j(this,function(I){switch(I.label){case 0:return o==="attribution"&&oj(w)?(r==null||r.log("Enriching campaign event to page view event with campaign parameters"),[4,h()]):[3,2];case 1:_=I.sent(),w.event_type=_.event_type,w.event_properties=G(G({},w.event_properties),_.event_properties),I.label=2;case 2:return s&&w.event_type===c&&(s.pageCounter=s.pageCounter?s.pageCounter+1:1,w.event_properties=G(G({},w.event_properties),{"[Amplitude] Page Counter":s.pageCounter})),[2,w]}})})},teardown:function(){return V(void 0,void 0,void 0,function(){return j(this,function(w){return n&&(n.removeEventListener("popstate",E),i=!1),[2]})})}};return A},sj=function(){return V(void 0,void 0,void 0,function(){var t;return j(this,function(e){switch(e.label){case 0:return t=nj,[4,new HS().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},oj=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,n=e[kr.SET]||{},r=e[kr.UNSET]||{},i=le(le([],Y(Object.keys(n)),!1),Y(Object.keys(r)),!1);return Object.keys(nd).every(function(s){return i.includes(s)})}return!1},aj=function(t,e,n){switch(t){case"pathOnly":{if(n=="")return!0;var r=new URL(e),i=new URL(n),s=r.origin+r.pathname,o=i.origin+i.pathname;return s!==o}default:return e!==n}},lj=function(){var t,e=[],n=function(c,d,h){c.addEventListener(d,h),e.push({element:c,type:d,handler:h})},r=function(){e.forEach(function(c){var d=c.element,h=c.type,f=c.handler;d==null||d.removeEventListener(h,f)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",s="enrichment",o=function(c,d){return V(void 0,void 0,void 0,function(){var h,f;return j(this,function(g){return h=function(){if(!d){c.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var m=function(A){var w=!1;n(A,"change",function(){var _,I=E_(A);w||d.track(v_,(_={},_[_h]=qi(A.id),_[Eh]=qi(A.name),_[wh]=I,_)),w=!0}),n(A,"submit",function(){var _,I,k=E_(A);w||d.track(v_,(_={},_[_h]=qi(A.id),_[Eh]=qi(A.name),_[wh]=k,_)),d.track(HM,(I={},I[_h]=qi(A.id),I[Eh]=qi(A.name),I[wh]=k,I)),w=!1})},E=Array.from(document.getElementsByTagName("form"));E.forEach(m),typeof MutationObserver<"u"&&(t=new MutationObserver(function(A){A.forEach(function(w){w.addedNodes.forEach(function(_){_.nodeName==="FORM"&&m(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("form")).map(m)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?h():(f=We(),f?f.addEventListener("load",h):c.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},a=function(c){return V(void 0,void 0,void 0,function(){return j(this,function(d){return[2,c]})})},l=function(){return V(void 0,void 0,void 0,function(){return j(this,function(c){return t==null||t.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:a,teardown:l}},qi=function(t){if(typeof t=="string")return t},E_=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},uj=function(){var t,e=[],n=function(c,d,h){c.addEventListener(d,h),e.push({element:c,type:d,handler:h})},r=function(){e.forEach(function(c){var d=c.element,h=c.type,f=c.handler;d==null||d.removeEventListener(h,f)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",s="enrichment",o=function(c,d){return V(void 0,void 0,void 0,function(){var h,f;return j(this,function(g){return h=function(){if(!d){c.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var m=function(w){var _;try{_=new URL(w.href,window.location.href)}catch{return}var I=E.exec(_.href),k=I==null?void 0:I[1];k&&n(w,"click",function(){var O;k&&d.track(qM,(O={},O[WM]=k,O[GM]=_.pathname,O[KM]=w.id,O[QM]=w.text,O[XM]=w.href,O))})},E=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,A=Array.from(document.getElementsByTagName("a"));A.forEach(m),typeof MutationObserver<"u"&&(t=new MutationObserver(function(w){w.forEach(function(_){_.addedNodes.forEach(function(I){I.nodeName==="A"&&m(I),"querySelectorAll"in I&&typeof I.querySelectorAll=="function"&&Array.from(I.querySelectorAll("a")).map(m)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?h():(f=We(),f?f.addEventListener("load",h):c.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},a=function(c){return V(void 0,void 0,void 0,function(){return j(this,function(d){return[2,c]})})},l=function(){return V(void 0,void 0,void 0,function(){return j(this,function(c){return t==null||t.disconnect(),r(),[2]})})};return{name:i,type:s,setup:o,execute:a,teardown:l}},w_=!1,cj=function(t){if(!(w_||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),w_=!0}},dj=function(){var t="@amplitude/plugin-network-checker-browser",e="before",n=We(),r=[],i=function(l,c){n!=null&&n.addEventListener&&(n==null||n.addEventListener(l,c),r.push({type:l,handler:c}))},s=function(){r.forEach(function(l){var c=l.type,d=l.handler;n==null||n.removeEventListener(c,d)}),r=[]},o=function(l,c){return V(void 0,void 0,void 0,function(){return j(this,function(d){return typeof navigator>"u"?(l.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),l.offline=!1,[2]):(l.offline=!navigator.onLine,i("online",function(){l.loggerProvider.debug("Network connectivity changed to online."),l.offline=!1,setTimeout(function(){c.flush()},l.flushIntervalMillis)}),i("offline",function(){l.loggerProvider.debug("Network connectivity changed to offline."),l.offline=!0}),[2])})})},a=function(){return V(void 0,void 0,void 0,function(){return j(this,function(l){return s(),[2]})})};return{name:t,type:e,setup:o,teardown:a}};function ZS(t){var e,n,r,i,s,o,a,l,c,d,h;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var f=Object.keys(t);try{for(var g=ue(f),m=g.next();!m.done;m=g.next()){var E=m.value;try{var A=t[E];typeof(A==null?void 0:A.enabled)=="boolean"&&(A.enabled?(delete A.enabled,Object.keys(A).length===0&&(t[E]=!0)):t[E]=!1),ZS(A)}catch{}}}catch(C){e={error:C}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}try{if(!((c=(l=(a=t.autocapture)===null||a===void 0?void 0:a.networkTracking)===null||l===void 0?void 0:l.captureRules)===null||c===void 0)&&c.length)try{for(var w=ue(t.autocapture.networkTracking.captureRules),_=w.next();!_.done;_=w.next()){var I=_.value;try{for(var k=(s=void 0,ue(["responseHeaders","requestHeaders"])),O=k.next();!O.done;O=k.next()){var L=O.value,S=(d=I[L])!==null&&d!==void 0?d:{},T=S.captureSafeHeaders,b=S.allowlist;if(!(!T&&!b)){if(b!==void 0&&!Array.isArray(b)){delete I[L];continue}I[L]=le(le([],Y(T?cc:[]),!1),Y(b??[]),!1)}}}catch(C){s={error:C}}finally{try{O&&!O.done&&(o=k.return)&&o.call(k)}finally{if(s)throw s.error}}}}catch(C){r={error:C}}finally{try{_&&!_.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}}catch{}var P=(h=t.autocapture)===null||h===void 0?void 0:h.frustrationInteractions;P&&(P.rageClick&&(P.rageClicks=P.rageClick,delete P.rageClick),P.deadClick&&(P.deadClicks=P.deadClick,delete P.deadClick))}}function T_(t,e,n){var r,i,s=[];try{for(var o=ue(e??[]),a=o.next();!a.done;a=o.next()){var l=a.value;try{s.push(new RegExp(l))}catch(c){n.loggerProvider.warn("Invalid regex pattern: ".concat(l),c)}}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t.concat(s)}function hj(t,e){var n,r,i,s,o,a,l;if(t){ZS(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var c=t;if(c&&"autocapture"in c){if(typeof c.autocapture=="boolean"&&(e.autocapture=c.autocapture),typeof c.autocapture=="object"&&c.autocapture!==null){var d=G({},c.autocapture);if(e.autocapture===void 0&&(e.autocapture=c.autocapture),typeof c.autocapture.elementInteractions=="object"&&c.autocapture.elementInteractions!==null&&(!((i=c.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||i===void 0)&&i.length)){d.elementInteractions=G({},c.autocapture.elementInteractions);var h=d.elementInteractions,f=(s=h.pageUrlAllowlist)!==null&&s!==void 0?s:[],g=c.autocapture.elementInteractions.pageUrlAllowlistRegex;h.pageUrlAllowlist=T_(f,g,e),delete h.pageUrlAllowlistRegex}if(typeof c.autocapture.networkTracking=="object"&&c.autocapture.networkTracking!==null&&(!((o=c.autocapture.networkTracking.captureRules)===null||o===void 0)&&o.length)){d.networkTracking=G({},c.autocapture.networkTracking);var m=d.networkTracking,E=(a=m.captureRules)!==null&&a!==void 0?a:[];try{for(var A=ue(E),w=A.next();!w.done;w=A.next()){var _=w.value;_.urls=T_((l=_.urls)!==null&&l!==void 0?l:[],_.urlsRegex,e),delete _.urlsRegex}}catch(I){n={error:I}}finally{try{w&&!w.done&&(r=A.return)&&r.call(A)}finally{if(n)throw n.error}}}typeof e.autocapture=="boolean"&&(e.autocapture=G({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},d)),typeof e.autocapture=="object"&&(e.autocapture=G(G({},e.autocapture),d))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(I){e.loggerProvider.error("Failed to apply remote configuration because of error: ",I)}}}var fj="@amplitude/plugin-autocapture-browser",pj="@amplitude/plugin-frustration-browser",Zf="[Amplitude] Element Clicked",mj="[Amplitude] Dead Click",I_="[Amplitude] Rage Click",gj="[Amplitude] Element Changed",vj="[Amplitude] Element ID",yj="[Amplitude] Element Class",S_="[Amplitude] Element Tag",A_="[Amplitude] Element Text",_j="[Amplitude] Element Hierarchy",Ej="[Amplitude] Element Href",wj="[Amplitude] Element Position Left",Tj="[Amplitude] Element Position Top",Ij="[Amplitude] Element Aria Label",Sj="[Amplitude] Element Attributes",Aj="[Amplitude] Element Parent Label",x_="[Amplitude] Page URL",xj="[Amplitude] Page Title",bj="[Amplitude] Viewport Height",Pj="[Amplitude] Viewport Width",yu="https://app.amplitude.com",Cj="https://app.eu.amplitude.com",Rj="https://apps.stag2.amplitude.com",kj={US:yu,EU:Cj,STAGING:Rj},Nj="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",Oj="amp-visual-tagging-selector-highlight",eA="data-amp-mask-attributes",Dj=25;function xe(t){return typeof t=="function"}function og(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Th=og(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function fc(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var qa=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ue(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(E){e={error:E}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(xe(d))try{d()}catch(E){s=E instanceof Th?E.errors:[E]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=ue(h),g=f.next();!g.done;g=f.next()){var m=g.value;try{b_(m)}catch(E){s=s??[],E instanceof Th?s=le(le([],Y(s)),Y(E.errors)):s.push(E)}}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new Th(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)b_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&fc(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&fc(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),tA=qa.EMPTY;function nA(t){return t instanceof qa||t&&"closed"in t&&xe(t.remove)&&xe(t.add)&&xe(t.unsubscribe)}function b_(t){xe(t)?t():t.unsubscribe()}var Lj={Promise:void 0},Mj={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,le([t,e],Y(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function rA(t){Mj.setTimeout(function(){throw t})}function ep(){}function _u(t){t()}var ag=function(t){Vt(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,nA(n)&&n.add(r)):r.destination=Uj,r}return e.create=function(n,r,i){return new Pa(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(qa),jj=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){$l(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){$l(r)}else $l(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){$l(n)}},t}(),Pa=function(t){Vt(e,t);function e(n,r,i){var s=t.call(this)||this,o;return xe(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,s.destination=new jj(o),s}return e}(ag);function $l(t){rA(t)}function Vj(t){throw t}var Uj={closed:!0,next:ep,error:Vj,complete:ep},lg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function iA(t){return t}function Fj(t){return t.length===0?iA:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var et=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=zj(e)?e:new Pa(e,n,r);return _u(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=P_(n),new n(function(i,s){var o=new Pa({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[lg]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Fj(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=P_(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function P_(t){var e;return(e=t??Lj.Promise)!==null&&e!==void 0?e:Promise}function Bj(t){return t&&xe(t.next)&&xe(t.error)&&xe(t.complete)}function zj(t){return t&&t instanceof ag||Bj(t)&&nA(t)}function $j(t){return xe(t==null?void 0:t.lift)}function sn(t){return function(e){if($j(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(t,e,n,r,i){return new Hj(t,e,n,r,i)}var Hj=function(t){Vt(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(d){n.error(d)}}:t.prototype._next,l._error=s?function(c){try{s(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ag),qj=og(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),sA=function(t){Vt(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new C_(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new qj},e.prototype.next=function(n){var r=this;_u(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=ue(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;_u(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;_u(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?tA:(this.currentObservers=null,a.push(n),new qa(function(){r.currentObservers=null,fc(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new et;return n.source=this,n},e.create=function(n,r){return new C_(n,r)},e}(et),C_=function(t){Vt(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:tA},e}(sA),Wj={now:function(){return Date.now()}},Gj=function(t){Vt(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(qa),R_={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,le([t,e],Y(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Kj=function(t){Vt(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),R_.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&R_.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,fc(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Gj),k_=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Wj.now,t}(),Qj=function(t){Vt(e,t);function e(n,r){r===void 0&&(r=k_.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(k_),Wa=new Qj(Kj),Xj=Wa,ug=new et(function(t){return t.complete()});function oA(t){return t&&xe(t.schedule)}function aA(t){return t[t.length-1]}function Yj(t){return oA(aA(t))?t.pop():void 0}function Jj(t,e){return typeof aA(t)=="number"?t.pop():e}var cg=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function lA(t){return xe(t==null?void 0:t.then)}function uA(t){return xe(t[lg])}function cA(t){return Symbol.asyncIterator&&xe(t==null?void 0:t[Symbol.asyncIterator])}function dA(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Zj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hA=Zj();function fA(t){return xe(t==null?void 0:t[hA])}function pA(t){return Ck(this,arguments,function(){var n,r,i,s;return j(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,gs(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,gs(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,gs(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function mA(t){return xe(t==null?void 0:t.getReader)}function Pt(t){if(t instanceof et)return t;if(t!=null){if(uA(t))return eV(t);if(cg(t))return tV(t);if(lA(t))return nV(t);if(cA(t))return gA(t);if(fA(t))return rV(t);if(mA(t))return iV(t)}throw dA(t)}function eV(t){return new et(function(e){var n=t[lg]();if(xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tV(t){return new et(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function nV(t){return new et(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,rA)})}function rV(t){return new et(function(e){var n,r;try{for(var i=ue(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function gA(t){return new et(function(e){sV(t,e).catch(function(n){return e.error(n)})})}function iV(t){return gA(pA(t))}function sV(t,e){var n,r,i,s;return V(this,void 0,void 0,function(){var o,a;return j(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Rk(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Wr(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function vA(t,e){return e===void 0&&(e=0),sn(function(n,r){n.subscribe(bt(r,function(i){return Wr(r,t,function(){return r.next(i)},e)},function(){return Wr(r,t,function(){return r.complete()},e)},function(i){return Wr(r,t,function(){return r.error(i)},e)}))})}function yA(t,e){return e===void 0&&(e=0),sn(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function oV(t,e){return Pt(t).pipe(yA(e),vA(e))}function aV(t,e){return Pt(t).pipe(yA(e),vA(e))}function lV(t,e){return new et(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function uV(t,e){return new et(function(n){var r;return Wr(n,e,function(){r=t[hA](),Wr(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return xe(r==null?void 0:r.return)&&r.return()}})}function _A(t,e){if(!t)throw new Error("Iterable cannot be null");return new et(function(n){Wr(n,e,function(){var r=t[Symbol.asyncIterator]();Wr(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function cV(t,e){return _A(pA(t),e)}function dV(t,e){if(t!=null){if(uA(t))return oV(t,e);if(cg(t))return lV(t,e);if(lA(t))return aV(t,e);if(cA(t))return _A(t,e);if(fA(t))return uV(t,e);if(mA(t))return cV(t,e)}throw dA(t)}function hV(t,e){return e?dV(t,e):Pt(t)}function EA(t){return t instanceof Date&&!isNaN(t)}var fV=og(function(t){return function(n){n===void 0&&(n=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}});function pV(t,e){var n=EA(t)?{first:t}:typeof t=="number"?{each:t}:t,r=n.first,i=n.each,s=n.with,o=s===void 0?mV:s,a=n.scheduler,l=a===void 0?Wa:a,c=n.meta,d=c===void 0?null:c;if(r==null&&i==null)throw new TypeError("No timeout provided.");return sn(function(h,f){var g,m,E=null,A=0,w=function(_){m=Wr(f,l,function(){try{g.unsubscribe(),Pt(o({meta:d,lastValue:E,seen:A})).subscribe(f)}catch(I){f.error(I)}},_)};g=h.subscribe(bt(f,function(_){m==null||m.unsubscribe(),A++,f.next(E=_),i>0&&w(i)},void 0,void 0,function(){m!=null&&m.closed||m==null||m.unsubscribe(),E=null})),!A&&w(r!=null?typeof r=="number"?r:+r-l.now():i)})}function mV(t){throw new fV(t)}function ut(t,e){return sn(function(n,r){var i=0;n.subscribe(bt(r,function(s){r.next(t.call(e,s,i++))}))})}var gV=Array.isArray;function vV(t,e){return gV(e)?t.apply(void 0,le([],Y(e))):t(e)}function yV(t){return ut(function(e){return vV(t,e)})}function _V(t,e,n,r,i,s,o,a){var l=[],c=0,d=0,h=!1,f=function(){h&&!l.length&&!c&&e.complete()},g=function(E){return c<r?m(E):l.push(E)},m=function(E){c++;var A=!1;Pt(n(E,d++)).subscribe(bt(e,function(w){e.next(w)},function(){A=!0},void 0,function(){if(A)try{c--;for(var w=function(){var _=l.shift();o||m(_)};l.length&&c<r;)w();f()}catch(_){e.error(_)}}))};return t.subscribe(bt(e,g,function(){h=!0,f()})),function(){}}function Ga(t,e,n){return n===void 0&&(n=1/0),xe(e)?Ga(function(r,i){return ut(function(s,o){return e(r,s,i,o)})(Pt(t(r,i)))},n):(typeof e=="number"&&(n=e),sn(function(r,i){return _V(r,i,t,n)}))}function EV(t){return t===void 0&&(t=1/0),Ga(iA,t)}var wV=["addListener","removeListener"],TV=["addEventListener","removeEventListener"],IV=["on","off"];function Us(t,e,n,r){if(xe(n)&&(r=n,n=void 0),r)return Us(t,e,n).pipe(yV(r));var i=Y(xV(t)?TV.map(function(a){return function(l){return t[a](e,l,n)}}):SV(t)?wV.map(N_(t,e)):AV(t)?IV.map(N_(t,e)):[],2),s=i[0],o=i[1];if(!s&&cg(t))return Ga(function(a){return Us(a,e,n)})(Pt(t));if(!s)throw new TypeError("Invalid event target");return new et(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return s(l),function(){return o(l)}})}function N_(t,e){return function(n){return function(r){return t[n](e,r)}}}function SV(t){return xe(t.addListener)&&xe(t.removeListener)}function AV(t){return xe(t.on)&&xe(t.off)}function xV(t){return xe(t.addEventListener)&&xe(t.removeEventListener)}function wA(t,e,n){t===void 0&&(t=0),n===void 0&&(n=Xj);var r=-1;return e!=null&&(oA(e)?n=e:r=e),new et(function(i){var s=EA(t)?+t-n.now():t;s<0&&(s=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function dg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Yj(t),r=Jj(t,1/0),i=t;return i.length?i.length===1?Pt(i[0]):EV(r)(hV(i,n)):ug}var bV=Array.isArray;function PV(t){return t.length===1&&bV(t[0])?t[0]:t}function St(t,e){return sn(function(n,r){var i=0;n.subscribe(bt(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}function CV(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=PV(t),t.length===1?Pt(t[0]):new et(RV(t))}function RV(t){return function(e){for(var n=[],r=function(s){n.push(Pt(t[s]).subscribe(bt(e,function(o){if(n){for(var a=0;a<n.length;a++)a!==s&&n[a].unsubscribe();n=null}e.next(o)})))},i=0;n&&!e.closed&&i<t.length;i++)r(i)}}function kV(t){return sn(function(e,n){var r=[];return e.subscribe(bt(n,function(i){return r.push(i)},function(){n.next(r),n.complete()})),Pt(t).subscribe(bt(n,function(){var i=r;r=[],n.next(i)},ep)),function(){r=null}})}function NV(t,e){return e===void 0&&(e=Wa),sn(function(n,r){var i=null,s=null,o=null,a=function(){if(i){i.unsubscribe(),i=null;var c=s;s=null,r.next(c)}};function l(){var c=o+t,d=e.now();if(d<c){i=this.schedule(void 0,c-d),r.add(i);return}a()}n.subscribe(bt(r,function(c){s=c,o=e.now(),i||(i=e.schedule(l,t),r.add(i))},function(){a(),r.complete()},void 0,function(){s=i=null}))})}function hg(t){return t<=0?function(){return ug}:sn(function(e,n){var r=0;e.subscribe(bt(n,function(i){++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function OV(t){return ut(function(){return t})}function DV(t,e){return Ga(function(n,r){return Pt(t(n,r)).pipe(hg(1),OV(n))})}function LV(t,e){e===void 0&&(e=Wa);var n=wA(t,e);return DV(function(){return n})}function MV(){return sn(function(t,e){var n,r=!1;t.subscribe(bt(e,function(i){var s=n;n=i,r&&e.next([s,i]),r=!0}))})}function gi(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new sA}:e,r=t.resetOnError,i=r===void 0?!0:r,s=t.resetOnComplete,o=s===void 0?!0:s,a=t.resetOnRefCountZero,l=a===void 0?!0:a;return function(c){var d,h,f,g=0,m=!1,E=!1,A=function(){h==null||h.unsubscribe(),h=void 0},w=function(){A(),d=f=void 0,m=E=!1},_=function(){var I=d;w(),I==null||I.unsubscribe()};return sn(function(I,k){g++,!E&&!m&&A();var O=f=f??n();k.add(function(){g--,g===0&&!E&&!m&&(h=Ih(_,l))}),O.subscribe(k),!d&&g>0&&(d=new Pa({next:function(L){return O.next(L)},error:function(L){E=!0,A(),h=Ih(w,i,L),O.error(L)},complete:function(){m=!0,A(),h=Ih(w,o),O.complete()}}),Pt(I).subscribe(d))})(c)}}function Ih(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var i=new Pa({next:function(){i.unsubscribe(),t()}});return Pt(e.apply(void 0,le([],Y(n)))).subscribe(i)}}function jV(t,e){return sn(function(n,r){var i=null,s=0,o=!1,a=function(){return o&&!i&&r.complete()};n.subscribe(bt(r,function(l){i==null||i.unsubscribe();var c=0,d=s++;Pt(t(l,d)).subscribe(i=bt(r,function(h){return r.next(e?e(l,h,d,c++):h)},function(){i=null,a()}))},function(){o=!0,a()}))})}function VV(t,e){return sn(function(n,r){var i=e??{},s=i.leading,o=s===void 0?!0:s,a=i.trailing,l=a===void 0?!1:a,c=!1,d=null,h=null,f=!1,g=function(){h==null||h.unsubscribe(),h=null,l&&(A(),f&&r.complete())},m=function(){h=null,f&&r.complete()},E=function(w){return h=Pt(t(w)).subscribe(bt(r,g,m))},A=function(){if(c){c=!1;var w=d;d=null,r.next(w),!f&&E(w)}};n.subscribe(bt(r,function(w){c=!0,d=w,!(h&&!h.closed)&&(o?A():E(w))},function(){f=!0,!(l&&c&&h&&!h.closed)&&r.complete()}))})}function UV(t,e,n){e===void 0&&(e=Wa);var r=wA(t,e);return VV(function(){return r},n)}var FV=["input","select","textarea"],TA=function(t,e){var n,r=(n=window==null?void 0:window.getComputedStyle)===null||n===void 0?void 0:n.call(window,t);return(r==null?void 0:r.getPropertyValue("cursor"))==="pointer"&&e==="click"},Xo=function(t,e,n){return n===void 0&&(n=!1),function(r,i){var s,o,a=t.pageUrlAllowlist,l=t.pageUrlExcludelist,c=t.shouldTrackEventResolver,d=(o=(s=i==null?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase)===null||o===void 0?void 0:o.call(s);if(!d)return!1;if(c)return c(r,i);if(!Xf(window.location.href,a)||l&&l.length>0&&Xf(window.location.href,l))return!1;var h=String(i==null?void 0:i.getAttribute("type"))||"";if(typeof h=="string")switch(h.toLowerCase()){case"hidden":return!1;case"password":return!1}var f=TA(i,r);if(n&&f)return!0;if(e){var g=e.some(function(m){var E;return!!(!((E=i==null?void 0:i.matches)===null||E===void 0)&&E.call(i,m))});if(!g)return!1}switch(d){case"input":case"select":case"textarea":return r==="change"||r==="click";default:return f?!0:r==="click"}}},BV=function(t){var e,n,r,i=(n=(e=t==null?void 0:t.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||n===void 0?void 0:n.call(e),s=t instanceof HTMLElement?((r=t.getAttribute("contenteditable"))===null||r===void 0?void 0:r.toLowerCase())==="true":!1;return!FV.includes(i)&&!s},zV=function(t){return t?t.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&e!=="id"&&e!=="class"}):[]},$V=function(t,e){return Object.entries(t).reduce(function(n,r){var i=Y(r,2),s=i[0],o=i[1];if(s.startsWith(e)){var a=s.replace(e,"");a&&(n[a]=o||"")}return n},{})},HV=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},O_=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return HV(r)||(e[n]=r),e},{})},fg=function(t,e){return t?e.some(function(n){var r;return(r=t==null?void 0:t.matches)===null||r===void 0?void 0:r.call(t,n)})?t:fg(t==null?void 0:t.parentElement,e):null},qV=function(t){return new Promise(function(e,n){var r;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.addEventListener("load",function(){e({status:!0})},{once:!0}),i.addEventListener("error",function(){n({status:!1,message:"Failed to load the script ".concat(t)})}),(r=document.head)===null||r===void 0||r.appendChild(i)}catch(s){n(s)}})};function WV(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var Ka=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)};function GV(t){return t.type==="click"||t.type==="change"}var IA="1.17.0",KV=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",eA,Qo]),QV=["type"],XV=["svg","path","g"],YV=["password","hidden"],JV=128;function ZV(t,e){var n,r,i,s,o,a;if(t===null)return null;var l=String(t.tagName).toLowerCase(),c={tag:l},d=Array.from((s=(i=t.parentElement)===null||i===void 0?void 0:i.children)!==null&&s!==void 0?s:[]);d.length&&(c.index=d.indexOf(t),c.indexOfType=d.filter(function(O){return O.tagName===t.tagName}).indexOf(t));var h=(a=(o=t.previousElementSibling)===null||o===void 0?void 0:o.tagName)===null||a===void 0?void 0:a.toLowerCase();h&&(c.prevSib=String(h));var f=t.getAttribute("id");f&&(c.id=String(f));var g=Array.from(t.classList);g.length&&(c.classes=g);var m={},E=Array.from(t.attributes),A=E.filter(function(O){return!KV.has(O.name)}),w=!BV(t);if(!YV.includes(String(t.getAttribute("type")))&&!XV.includes(l))try{for(var _=ue(A),I=_.next();!I.done;I=_.next()){var k=I.value;if(!(w&&!QV.includes(k.name))){if(e.has(k.name)){m[k.name]=Nr;continue}m[k.name]=String(k.value).substring(0,JV)}}}catch(O){n={error:O}}finally{try{I&&!I.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}return Object.keys(m).length&&(c.attrs=m),c}function e4(t){var e=[];if(!t)return e;e.push(t);for(var n=t.parentElement;n&&n.tagName!=="HTML";)e.push(n),n=n.parentElement;return e}var t4=function(t,e){try{if(t.sourceType==="DOM_ELEMENT"){var n=document.documentElement;return t.scope&&e&&(n=e.closest(t.scope)),n&&t.selector?n.querySelector(t.selector):n}}catch{return}},n4=function(t,e,n){t.forEach(function(r){if(typeof r!="string"&&r.actionType==="ATTACH_EVENT_PROPERTY"){var i=n.extractDataFromDataSource(r.dataSource,e.closestTrackedAncestor);e.targetElementProperties[r.destinationKey]=i}})},pg=function(){function t(e,n){var r,i,s=this,o;this.replaceSensitiveString=function(f){return rg(f,s.additionalMaskTextPatterns)},this.getHierarchy=function(f){var g,m,E,A,w=performance.now(),_=[];if(!f)return[];for(var I=e4(f),k=new Map,O=I.length-1;O>=0;O--){var L=I[O];if(L){var S=zV(L.getAttribute(eA)),T=O===I.length-1?[]:(E=k.get(I[O+1]))!==null&&E!==void 0?E:new Set,b=new Set(le(le([],Y(T),!1),Y(S),!1));k.set(L,b)}}_=I.map(function(W){var oe;return ZV(W,(oe=k.get(W))!==null&&oe!==void 0?oe:new Set)});var P=function(W){W!=null&&W.attrs&&Object.entries(W.attrs).forEach(function(oe){var be=Y(oe,2),H=be[0],J=be[1];W.attrs&&(W.attrs[H]=s.replaceSensitiveString(J))})};try{for(var C=ue(_),N=C.next();!N.done;N=C.next()){var R=N.value;P(R)}}catch(W){g={error:W}}finally{try{N&&!N.done&&(m=C.return)&&m.call(C)}finally{if(g)throw g.error}}var $=performance.now();return(A=s.diagnosticsClient)===null||A===void 0||A.recordHistogram("autocapturePlugin.getHierarchy",$-w),_},this.getNearestLabel=function(f){var g=f.parentElement;if(!g)return"";var m;try{m=g.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{m=null}return m?s.getText(m):s.getNearestLabel(g)},this.getEventProperties=function(f,g,m){var E,A,w,_,I=(w=(A=g==null?void 0:g.tagName)===null||A===void 0?void 0:A.toLowerCase)===null||w===void 0?void 0:w.call(A),k=typeof g.getBoundingClientRect=="function"?g.getBoundingClientRect():{left:null,top:null},O=s.getHierarchy(g),L=(_=O[0])===null||_===void 0?void 0:_.attrs,S=s.getNearestLabel(g),T=$V(L??{},m),b=(E={},E[_j]=O,E[S_]=I,E[A_]=s.getText(g),E[wj]=k.left==null?null:Math.round(k.left),E[Tj]=k.top==null?null:Math.round(k.top),E[Sj]=T,E[Aj]=S,E[x_]=Oo(window.location.href.split("?")[0]),E[xj]=ig(s.replaceSensitiveString),E[bj]=window.innerHeight,E[Pj]=window.innerWidth,E);return b[vj]=g.getAttribute("id")||"",b[yj]=g.getAttribute("class"),b[Ij]=L==null?void 0:L["aria-label"],I==="a"&&f==="click"&&g instanceof HTMLAnchorElement&&(b[Ej]=s.replaceSensitiveString(g.href)),O_(b)},this.addAdditionalEventProperties=function(f,g,m,E,A){A===void 0&&(A=!1);var w={event:f,timestamp:Date.now(),type:g};if(GV(w)&&w.event.target!==null){if(A){var _=TA(w.event.target,w.type);if(_)return w.closestTrackedAncestor=w.event.target,w.targetElementProperties=s.getEventProperties(w.type,w.closestTrackedAncestor,E),w}var I=fg(w.event.target,m);return I&&(w.closestTrackedAncestor=I,w.targetElementProperties=s.getEventProperties(w.type,I,E)),w}return w},this.extractDataFromDataSource=function(f,g){if(f.sourceType==="DOM_ELEMENT"){var m=t4(f,g);return m?f.elementExtractType==="TEXT"?s.getText(m):f.elementExtractType==="ATTRIBUTE"&&f.attribute?m.getAttribute(f.attribute):void 0:void 0}},this.getText=function(f){var g=f.closest("[".concat(Qo,"]"))!==null;if(g)return Nr;var m="";if(!f.querySelector("[".concat(Qo,"], [contenteditable]")))m=f.innerText||"";else{var E=f.cloneNode(!0);E.querySelectorAll("[".concat(Qo,"], [contenteditable]")).forEach(function(A){A.innerText=Nr}),m=E.innerText||""}return s.replaceSensitiveString(m.substring(0,255)).replace(/\s+/g," ").trim()},this.getEventTagProps=function(f){var g,m,E;if(!f)return{};var A=(E=(m=f==null?void 0:f.tagName)===null||m===void 0?void 0:m.toLowerCase)===null||E===void 0?void 0:E.call(m),w=(g={},g[S_]=A,g[A_]=s.getText(f),g[x_]=window.location.href.split("?")[0],g);return O_(w)},this.diagnosticsClient=n==null?void 0:n.diagnosticsClient;var a=(o=e.maskTextRegex)!==null&&o!==void 0?o:[],l=[];try{for(var c=ue(a),d=c.next();!d.done;d=c.next()){var h=d.value;if(l.length>=Dj)break;if(h instanceof RegExp)l.push(h);else if("pattern"in h&&typeof h.pattern=="string")try{l.push(new RegExp(h.pattern,"i"))}catch{}}}catch(f){r={error:f}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.additionalMaskTextPatterns=l}return t}(),r4=function(){function t(e){var n=e===void 0?{}:e,r=n.origin,i=r===void 0?yu:r,s=this;this.endpoint=yu,this.requestCallbacks={},this.onSelect=function(o){s.notify({action:"element-selected",data:o})},this.onTrack=function(o,a){o==="selector-mode-changed"?s.notify({action:"track-selector-mode-changed",data:a}):o==="selector-moved"&&s.notify({action:"track-selector-moved",data:a})},this.endpoint=i}return t.prototype.notify=function(e){var n,r,i,s;(r=(n=this.logger)===null||n===void 0?void 0:n.debug)===null||r===void 0||r.call(n,"Message sent: ",JSON.stringify(e)),(s=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||s===void 0||s.call(i,e,this.endpoint)},t.prototype.sendRequest=function(e,n,r){var i=this;r===void 0&&(r={timeout:15e3});var s=WV(),o={id:s,action:e,args:n},a=new Promise(function(l,c){i.requestCallbacks[s]={resolve:l,reject:c},i.notify(o),(r==null?void 0:r.timeout)>0&&setTimeout(function(){c(new Error("".concat(e," timed out (id: ").concat(s,")"))),delete i.requestCallbacks[s]},r.timeout)});return a},t.prototype.handleResponse=function(e){var n;if(!this.requestCallbacks[e.id]){(n=this.logger)===null||n===void 0||n.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var n=this,r=e===void 0?{dataExtractor:new pg({})}:e,i=r.logger,s=r.endpoint,o=r.isElementSelectable,a=r.cssSelectorAllowlist,l=r.actionClickAllowlist,c=r.dataExtractor;this.logger=i,s&&this.endpoint===yu&&(this.endpoint=s);var d=null;window.addEventListener("message",function(h){var f,g,m,E,A;if((g=(f=n.logger)===null||f===void 0?void 0:f.debug)===null||g===void 0||g.call(f,"Message received: ",JSON.stringify(h)),n.endpoint===h.origin){var w=h==null?void 0:h.data,_=w==null?void 0:w.action;if(_)if("id"in w)(E=(m=n.logger)===null||m===void 0?void 0:m.debug)===null||E===void 0||E.call(m,"Received Response to previous request: ",JSON.stringify(h)),n.handleResponse(w);else if(_==="ping")n.notify({action:"pong"});else if(_==="initialize-visual-tagging-selector"){var I=w==null?void 0:w.data;qV(Nj).then(function(){var k;d=(k=window==null?void 0:window.amplitudeVisualTaggingSelector)===null||k===void 0?void 0:k.call(window,{getEventTagProps:c.getEventTagProps,isElementSelectable:function(O){return o?o((I==null?void 0:I.actionType)||"click",O):!0},onTrack:n.onTrack,onSelect:n.onSelect,visualHighlightClass:Oj,messenger:n,cssSelectorAllowlist:a,actionClickAllowlist:l,extractDataFromDataSource:c.extractDataFromDataSource,dataExtractor:c,diagnostics:{autocapture:{version:IA}}}),n.notify({action:"selector-loaded"})}).catch(function(){var k;(k=n.logger)===null||k===void 0||k.warn("Failed to initialize visual tagging selector")})}else _==="close-visual-tagging-selector"&&((A=d==null?void 0:d.close)===null||A===void 0||A.call(d))}}),this.notify({action:"page-loaded"})},t}(),i4=5;function s4(t){var e=t.amplitude,n=t.allObservables,r=t.options,i=t.shouldTrackEvent,s=t.evaluateTriggers,o=n.clickObservable,a=o.pipe(MV(),St(function(h){var f=Y(h,2),g=f[0],m=f[1],E=g.event.target!==m.event.target,A=Math.abs(m.event.screenX-g.event.screenX)<=20&&Math.abs(m.event.screenY-g.event.screenY)<=20;return E&&!A})),l=o.pipe(NV(r.debounceTime),ut(function(){return"timeout"})),c=dg(a,l),d=o.pipe(LV(0),St(Ka),St(function(h){return i("click",h.closestTrackedAncestor)}),ut(function(h){return s(h)}),kV(c));return d.subscribe(function(h){var f,g,m=(h.length>=i4,Zf);try{for(var E=ue(h),A=E.next();!A.done;A=E.next()){var w=A.value;e==null||e.track(m,w.targetElementProperties)}}catch(_){f={error:_}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(f)throw f.error}}})}function o4(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,i=t.shouldTrackEvent,s=t.evaluateTriggers,o=n.changeObservable,a=o.pipe(St(Ka),St(function(l){return i("change",l.closestTrackedAncestor)}),ut(function(l){return s(l)}));return a.subscribe(function(l){e==null||e.track(gj,r("change",l.closestTrackedAncestor))})}function a4(t){var e=t.amplitude,n=t.allObservables,r=t.options,i=t.getEventProperties,s=t.shouldTrackEvent,o=t.shouldTrackActionClick,a=n.clickObservable,l=n.mutationObservable,c=n.navigateObservable,d=a.pipe(St(function(m){return!s("click",m.closestTrackedAncestor)}),ut(function(m){var E=fg(m.event.target,r.actionClickAllowlist);return m.closestTrackedAncestor=E,m.closestTrackedAncestor!==null&&(m.targetElementProperties=i(m.type,m.closestTrackedAncestor)),m}),St(Ka),St(function(m){return o("click",m.closestTrackedAncestor)})),h=[l];c&&h.push(c);var f=dg.apply(void 0,le([],Y(h),!1)),g=d.pipe(jV(function(m){return f.pipe(hg(1),pV({first:500,with:function(){return ug}}),ut(function(){return m}))}));return g.subscribe(function(m){e==null||e.track(Zf,i("click",m.closestTrackedAncestor))})}var SA=function(){return new et(function(t){var e=new MutationObserver(function(n){t.next(n)});return e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},AA=function(t){return t===void 0&&(t="click"),Us(document,t,{capture:!0})},l4=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(n){return console.error("Error matching event to filter",n),!1}return!1},tp={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},D_=function(t){var e,n,r,i,s=Object.values(tp).reduce(function(g,m){return g[m]=new Set,g},{});if(!t)return s;try{for(var o=ue(t),a=o.next();!a.done;a=o.next()){var l=a.value;try{try{for(var c=(r=void 0,ue(l.definition)),d=c.next();!d.done;d=c.next()){var h=d.value,f=tp[h.event_type];f&&s[f].add(l.id)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}catch(g){console.warn("Skipping Labeled Event due to malformed definition",l==null?void 0:l.id,g)}}}catch(g){e={error:g}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return s},L_=function(t){var e,n,r,i,s=new Map;try{for(var o=ue(t),a=o.next();!a.done;a=o.next()){var l=a.value;try{for(var c=(r=void 0,ue(l.conditions)),d=c.next();!d.done;d=c.next()){var h=d.value;if(h.type==="LABELED_EVENT"){var f=h.match.eventId,g=s.get(f);g||(g=[],s.set(f,g)),g.push(l)}}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}}catch(m){e={error:m}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return s},u4=function(t,e){return e.filter(function(n){return n.definition.some(function(r){return tp[r.event_type]===t.type&&r.filters.every(function(i){return l4(t,i)})})})},c4=function(t,e){var n,r,i,s,o=new Set;try{for(var a=ue(t),l=a.next();!l.done;l=a.next()){var c=l.value,d=e.get(c.id);if(d)try{for(var h=(i=void 0,ue(d)),f=h.next();!f.done;f=h.next()){var g=f.value;o.add(g)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(m){n={error:m}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return Array.from(o)},d4=function(){function t(e,n,r,i){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.dataExtractor=r,this.options=i}return t.prototype.evaluate=function(e){var n,r,i=this.options.pageActions;if(!i)return e;var s=u4(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(d){return i.labeledEvents[d]})),o=c4(s,this.labeledEventToTriggerMap);try{for(var a=ue(o),l=a.next();!l.done;l=a.next()){var c=l.value;n4(c.actions,e,this.dataExtractor)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return e},t.prototype.update=function(e,n,r){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.options=r},t}(),h4=function(t,e,n,r){return new d4(t,e,n,r)},Rn;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable"})(Rn||(Rn={}));var f4=function(t,e){var n,r,i,s,o,a,l,c;t===void 0&&(t={}),e==null||e.diagnosticsClient.setTag("plugin.autocapture.version",IA);var d=t.dataAttributePrefix,h=d===void 0?US:d,f=t.visualTaggingOptions,g=f===void 0?{enabled:!0,messenger:new r4}:f;t.cssSelectorAllowlist=(n=t.cssSelectorAllowlist)!==null&&n!==void 0?n:oM,t.actionClickAllowlist=(r=t.actionClickAllowlist)!==null&&r!==void 0?r:aM,t.debounceTime=(i=t.debounceTime)!==null&&i!==void 0?i:0,t.pageUrlExcludelist=(s=t.pageUrlExcludelist)===null||s===void 0?void 0:s.reduce(function(P,C){if(typeof C=="string"&&P.push(C),C instanceof RegExp&&P.push(C),typeof C=="object"&&C!==null&&"pattern"in C)try{P.push(new RegExp(C.pattern))}catch(N){return console.warn("Invalid regex pattern: ".concat(C.pattern),N),P}return P},[]);var m=fj,E="enrichment",A=[],w=new pg(t,e),_=function(){var P,C=AA().pipe(ut(function(W){return w.addAdditionalEventProperties(W,"click",t.cssSelectorAllowlist,h)}),gi()),N=Us(document,"change",{capture:!0}).pipe(ut(function(W){return w.addAdditionalEventProperties(W,"change",t.cssSelectorAllowlist,h)}),gi()),R;window.navigation&&(R=Us(window.navigation,"navigate").pipe(ut(function(W){return w.addAdditionalEventProperties(W,"navigate",t.cssSelectorAllowlist,h)}),gi()));var $=SA().pipe(ut(function(W){return w.addAdditionalEventProperties(W,"mutation",t.cssSelectorAllowlist,h)}),gi());return P={},P[Rn.ClickObservable]=C,P[Rn.ChangeObservable]=N,P[Rn.NavigateObservable]=R,P[Rn.MutationObservable]=$,P},I=D_(Object.values((a=(o=t.pageActions)===null||o===void 0?void 0:o.labeledEvents)!==null&&a!==void 0?a:{})),k=L_((c=(l=t.pageActions)===null||l===void 0?void 0:l.triggers)!==null&&c!==void 0?c:[]),O=h4(I,k,w,t),L=function(P){var C,N;P&&(t.pageActions=G(G({},t.pageActions),P),I=D_(Object.values((C=t.pageActions.labeledEvents)!==null&&C!==void 0?C:{})),k=L_((N=t.pageActions.triggers)!==null&&N!==void 0?N:[]),O.update(I,k,t))},S=function(P,C){return V(void 0,void 0,void 0,function(){var N,R,$,W,oe,be,H,J,Z,pe;return j(this,function(ce){return typeof document>"u"?[2]:(P.fetchRemoteConfig&&(P.remoteConfigClient?P.remoteConfigClient.subscribe("analyticsSDK.pageActions","all",function(ae){L(ae)}):P.loggerProvider.debug("Remote config client is not provided, skipping remote config fetch")),N=Xo(t,t.cssSelectorAllowlist),R=Xo(t,t.actionClickAllowlist),$=_(),W=s4({allObservables:$,options:t,amplitude:C,shouldTrackEvent:N,evaluateTriggers:O.evaluate.bind(O)}),A.push(W),oe=o4({allObservables:$,getEventProperties:function(){for(var ae=[],Ie=0;Ie<arguments.length;Ie++)ae[Ie]=arguments[Ie];return w.getEventProperties.apply(w,le(le([],Y(ae),!1),[h],!1))},amplitude:C,shouldTrackEvent:N,evaluateTriggers:O.evaluate.bind(O)}),A.push(oe),be=a4({allObservables:$,options:t,getEventProperties:function(){for(var ae=[],Ie=0;Ie<arguments.length;Ie++)ae[Ie]=arguments[Ie];return w.getEventProperties.apply(w,le(le([],Y(ae),!1),[h],!1))},amplitude:C,shouldTrackEvent:N,shouldTrackActionClick:R}),A.push(be),(Z=P==null?void 0:P.loggerProvider)===null||Z===void 0||Z.log("".concat(m," has been successfully added.")),window.opener&&g.enabled&&(H=t.cssSelectorAllowlist,J=t.actionClickAllowlist,(pe=g.messenger)===null||pe===void 0||pe.setup(G(G({dataExtractor:w,logger:P==null?void 0:P.loggerProvider},(P==null?void 0:P.serverZone)&&{endpoint:kj[P.serverZone]}),{isElementSelectable:Xo(t,le(le([],Y(H),!1),Y(J),!1)),cssSelectorAllowlist:H,actionClickAllowlist:J}))),[2])})})},T=function(P){return V(void 0,void 0,void 0,function(){return j(this,function(C){return[2,P]})})},b=function(){return V(void 0,void 0,void 0,function(){var P,C,N,R,$;return j(this,function(W){try{for(P=ue(A),C=P.next();!C.done;C=P.next())N=C.value,N.unsubscribe()}catch(oe){R={error:oe}}finally{try{C&&!C.done&&($=P.return)&&$.call(P)}finally{if(R)throw R.error}}return[2]})})};return{name:m,type:E,setup:S,execute:T,teardown:b}},M_=3e3;function p4(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,i=t.shouldTrackDeadClick,s=n.clickObservable,o=n.mutationObservable,a=n.navigateObservable,l=s.pipe(St(Ka),St(function(f){return i("click",f.closestTrackedAncestor)}),St(function(f){var g=f.event.target;return g.closest('a[target="_blank"]')===null})),c=[o];a&&c.push(a);var d=dg.apply(void 0,le([],Y(c),!1)),h=l.pipe(Ga(function(f){var g,m=new et(function(E){return g=setTimeout(function(){return E.next(f)},M_),function(){clearTimeout(g)}});return CV(m,d.pipe(hg(1),ut(function(){return null}))).pipe(St(function(E){return E!==null}))}),UV(M_));return h.subscribe(function(f){var g={"[Amplitude] X":f.event.clientX,"[Amplitude] Y":f.event.clientY};e.track(mj,G(G({},r("click",f.closestTrackedAncestor)),g),{time:f.timestamp})})}var np=hM,xA=dM,j_=fM;function V_(t,e){var n,r,i,s,o=e.event,a=o.clientX,l=o.clientY;t.yMin=Math.min((n=t.yMin)!==null&&n!==void 0?n:l,l),t.yMax=Math.max((r=t.yMax)!==null&&r!==void 0?r:l,l),t.xMin=Math.min((i=t.xMin)!==null&&i!==void 0?i:a,a),t.xMax=Math.max((s=t.xMax)!==null&&s!==void 0?s:a,a),t.isOutOfBounds=t.yMax-t.yMin>j_||t.xMax-t.xMin>j_}function U_(t){var e=t[0],n=t[t.length-1],r=G({"[Amplitude] Begin Time":new Date(e.timestamp).toISOString(),"[Amplitude] End Time":new Date(n.timestamp).toISOString(),"[Amplitude] Duration":n.timestamp-e.timestamp,"[Amplitude] Clicks":t.map(function(i){return{X:i.event.clientX,Y:i.event.clientY,Time:i.timestamp}}),"[Amplitude] Click Count":t.length},e.targetElementProperties);return{rageClickEvent:r,time:e.timestamp}}function m4(t,e){var n=Math.max(0,t.length-np+1),r=t[n];return e.timestamp-r.timestamp>=xA}function g4(t,e){return t.length>0&&t[t.length-1].closestTrackedAncestor!==e.closestTrackedAncestor}function v4(t){var e=t.amplitude,n=t.allObservables,r=t.shouldTrackRageClick,i=n.clickObservable,s=[],o={},a;function l(c){s=[],o={},c&&(V_(o,c),s.push(c))}return i.pipe(St(Ka),St(function(c){return r("click",c.closestTrackedAncestor)}),ut(function(c){if(a&&clearTimeout(a),V_(o,c),s.length===0)return s.push(c),null;if(g4(s,c)||m4(s,c)||o.isOutOfBounds){var d=s.length>=np?U_(s):null;return l(c),d}return s.push(c),s.length>=np&&(a=setTimeout(function(){var h=U_(s),f=h.rageClickEvent,g=h.time;e.track(I_,f,{time:g}),l()},xA)),null}),St(function(c){return c!==null})).subscribe(function(c){c!==null&&e.track(I_,c.rageClickEvent,{time:c.time})})}var y4=function(t){var e,n,r,i,s;t===void 0&&(t={});var o=pj,a="enrichment",l=[],c=(n=(e=t.rageClicks)===null||e===void 0?void 0:e.cssSelectorAllowlist)!==null&&n!==void 0?n:cM,d=(i=(r=t.deadClicks)===null||r===void 0?void 0:r.cssSelectorAllowlist)!==null&&i!==void 0?i:uM,h=(s=t.dataAttributePrefix)!==null&&s!==void 0?s:US,f=new pg(t),g=le([],Y(new Set(le(le([],Y(c),!1),Y(d),!1))),!1),m=function(){var _,I=AA("pointerdown").pipe(ut(function(L){return f.addAdditionalEventProperties(L,"click",g,h,!0)}),gi()),k;window.navigation&&(k=Us(window.navigation,"navigate").pipe(ut(function(L){return f.addAdditionalEventProperties(L,"navigate",g,h)}),gi()));var O=SA().pipe(ut(function(L){return f.addAdditionalEventProperties(L,"mutation",g,h)}),gi());return _={},_[Rn.ClickObservable]=I,_[Rn.ChangeObservable]=new et,_[Rn.NavigateObservable]=k,_[Rn.MutationObservable]=O,_},E=function(_,I){return V(void 0,void 0,void 0,function(){var k,O,L,S,T,b;return j(this,function(P){return typeof document>"u"?[2]:(k=Xo(t,c),O=Xo(t,d),L=m(),S=v4({allObservables:L,amplitude:I,shouldTrackRageClick:k}),l.push(S),T=p4({amplitude:I,allObservables:L,getEventProperties:function(C,N){return f.getEventProperties(C,N,h)},shouldTrackDeadClick:O}),l.push(T),(b=_==null?void 0:_.loggerProvider)===null||b===void 0||b.log("".concat(o," has been successfully added.")),[2])})})},A=function(_){return V(void 0,void 0,void 0,function(){return j(this,function(I){return[2,_]})})},w=function(){return V(void 0,void 0,void 0,function(){var _,I,k,O,L;return j(this,function(S){try{for(_=ue(l),I=_.next();!I.done;I=_.next())k=I.value,k.unsubscribe()}catch(T){O={error:T}}finally{try{I&&!I.done&&(L=_.return)&&L.call(_)}finally{if(O)throw O.error}}return[2]})})};return{name:o,type:a,setup:E,execute:A,teardown:w}},_4="@amplitude/plugin-network-capture-browser",bA="[Amplitude] Network Request",PA="500-599";function Eu(t,e){var n=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),r="^"+n.replace(/\*/g,".*")+"$",i=new RegExp(r);return i.test(t)}function CA(t,e){var n,r,i=e.split(",");try{for(var s=ue(i),o=s.next();!o.done;o=s.next()){var a=o.value,l=Y(a.split("-").map(Number),2),c=l[0],d=l[1];if(t===c&&d===void 0||t>=c&&t<=d)return!0}}catch(h){n={error:h}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!1}function E4(t,e,n,r,i){if(!(t.hosts&&!t.hosts.find(function(o){return Eu(e,o)}))&&!(r&&t.urls&&!Xf(r,t.urls))&&!(i&&t.methods&&!t.methods.find(function(o){return i.toLowerCase()===o.toLowerCase()||o==="*"}))){if(n||n===0){var s=t.statusCodeRange||PA;if(!CA(n,s))return!1}return!0}}function RA(t){var e;if(t)try{var n=(e=We())===null||e===void 0?void 0:e.location.href,r=new URL(t,n),i=r.searchParams.toString(),s=r.hash.replace("#",""),o=r.href,a=r.host;r.hash="",r.search="";var l=r.href;return{query:i,fragment:s,href:o,hrefWithoutQueryOrHash:l,host:a}}catch{return}}function w4(t,e){if(t.includes("amplitude.com"))try{var n=e.body;if(typeof n!="string")return!1;var r=JSON.parse(n),i=r.events;if(i.find(function(s){return s.event_type===bA}))return!0}catch{}return!1}function F_(t){if(typeof t!="object"||t===null){if(t)return le([],Y(cc),!1);if(t===void 0){var e=void 0;return e}return}if(t.length!==0)return t}function B_(t){var e,n;return!(!((e=t==null?void 0:t.allowlist)===null||e===void 0)&&e.length)&&!(!((n=t==null?void 0:t.blocklist)===null||n===void 0)&&n.length)}function T4(t,e){var n;e===void 0&&(e={});var r=RA(t.url);if(!r)return!1;var i=r.host;if(e.ignoreAmplitudeRequests!==!1&&(Eu(i,"*.amplitude.com")||Eu(i,"amplitude.com"))||!((n=e.ignoreHosts)===null||n===void 0)&&n.find(function(o){return Eu(i,o)})||!e.captureRules&&t.status!==void 0&&!CA(t.status,PA))return!1;if(e.captureRules){var s;if(le([],Y(e.captureRules),!1).reverse().find(function(o){if(s=E4(o,i,t.status,t.url,t.method),s){var a=F_(o.responseHeaders);if(t.responseWrapper&&a){var l=t.responseWrapper.headers(a);l&&(t.responseHeaders=l)}var c=F_(o.requestHeaders);if(t.requestWrapper&&c){var d=t.requestWrapper.headers(c);d&&(t.requestHeaders=d)}t.responseWrapper&&o.responseBody&&!B_(o.responseBody)&&(t.responseBodyJson=t.responseWrapper.json(o.responseBody.allowlist,o.responseBody.blocklist)),t.requestWrapper&&o.requestBody&&!B_(o.requestBody)&&(t.requestBodyJson=t.requestWrapper.json(o.requestBody.allowlist,o.requestBody.blocklist))}return s!==void 0}),!s)return!1}return!(t.requestWrapper&&w4(i,t.requestWrapper))}function I4(t,e,n,r){return V(this,void 0,void 0,function(){var i,s,o;return j(this,function(a){switch(a.label){case 0:return e.requestBodyJson||e.responseBodyJson?[4,Promise.all([e.requestBodyJson,e.responseBodyJson])]:[3,2];case 1:if(i=Y.apply(void 0,[a.sent(),2]),s=i[0],o=i[1],s)try{t["[Amplitude] Request Body"]=JSON.stringify(s)}catch(l){r==null||r.debug("Failed to stringify request body",l)}if(o)try{t["[Amplitude] Response Body"]=JSON.stringify(o)}catch{r==null||r.debug("Failed to stringify response body")}a.label=2;case 2:return n==null||n.track(bA,t),[2]}})})}function S4(t){var e=t.allObservables,n=t.networkTrackingOptions,r=t.amplitude,i=t.loggerProvider,s=e.networkObservable,o=s.pipe(St(function(a){return T4(a.event,n)}));return o.subscribe(function(a){var l,c,d,h=a.event,f=RA(h.url);if(f){var g=(c=h.responseWrapper)===null||c===void 0?void 0:c.bodySize,m=(d=h.requestWrapper)===null||d===void 0?void 0:d.bodySize,E=(l={},l["[Amplitude] URL"]=f.hrefWithoutQueryOrHash,l["[Amplitude] URL Query"]=f.query,l["[Amplitude] URL Fragment"]=f.fragment,l["[Amplitude] Request Method"]=h.method,l["[Amplitude] Status Code"]=h.status,l["[Amplitude] Start Time"]=h.startTime,l["[Amplitude] Completion Time"]=h.endTime,l["[Amplitude] Duration"]=h.duration,l["[Amplitude] Request Body Size"]=m,l["[Amplitude] Response Body Size"]=g,l["[Amplitude] Request Type"]=h.type,l["[Amplitude] Request Headers"]=h.requestHeaders,l["[Amplitude] Response Headers"]=h.responseHeaders,l);I4(E,h,r,i)}})}var rp;(function(t){t.NetworkObservable="networkObservable"})(rp||(rp={}));var A4=function(t){t===void 0&&(t={});var e=_4,n="enrichment",r,i=[],s=function(d,h){var f={event:d,timestamp:Date.now(),type:h};return f},o=function(){var d,h=new et(function(f){var g=new TM(function(m){var E=s(m,"network");f.next(E)});return m_.subscribe(g,r),function(){m_.unsubscribe(g)}});return d={},d[rp.NetworkObservable]=h,d},a=function(d,h){return V(void 0,void 0,void 0,function(){var f,g;return j(this,function(m){return typeof document>"u"?[2]:(f=o(),r=d==null?void 0:d.loggerProvider,g=S4({allObservables:f,networkTrackingOptions:t,amplitude:h,loggerProvider:r}),i.push(g),r==null||r.log("".concat(e," has been successfully added.")),[2])})})},l=function(d){return V(void 0,void 0,void 0,function(){return j(this,function(h){return[2,d]})})},c=function(){return V(void 0,void 0,void 0,function(){var d,h,f,g,m;return j(this,function(E){try{for(d=ue(i),h=d.next();!h.done;h=d.next())f=h.value,f.unsubscribe()}catch(A){g={error:A}}finally{try{h&&!h.done&&(m=d.return)&&m.call(d)}finally{if(g)throw g.error}}return[2]})})};return{name:e,type:n,setup:a,execute:l,teardown:c}},x4="web-vitals-browser",b4="[Amplitude] Web Vitals";let kA=-1;const Ys=t=>{addEventListener("pageshow",e=>{e.persisted&&(kA=e.timeStamp,t(e))},!0)},Fn=(t,e,n,r)=>{let i,s;return o=>{e.value>=0&&(o||r)&&(s=e.value-(i??0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=((a,l)=>a>l[1]?"poor":a>l[0]?"needs-improvement":"good")(e.value,n),t(e)))}},mg=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},gg=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Qa=()=>{const t=gg();return(t==null?void 0:t.activationStart)??0},Bn=(t,e=-1)=>{const n=gg();let r="navigate";return kA>=0?r="back-forward-cache":n&&(document.prerendering||Qa()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Sh=new WeakMap;function vg(t,e){return Sh.get(t)||Sh.set(t,new e),Sh.get(t)}class P4{constructor(){Kt(this,"t");Kt(this,"i",0);Kt(this,"o",[])}h(e){var i;if(e.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),(i=this.t)==null||i.call(this,e)}}const Xa=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},yg=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let us=-1;const NA=new Set,z_=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,ip=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of NA)e();isFinite(us)||(us=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",ip,!0))}},id=()=>{var t;if(us<0){const e=Qa();us=(document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>e)[0])==null?void 0:t.startTime)??z_(),addEventListener("visibilitychange",ip,!0),addEventListener("prerenderingchange",ip,!0),Ys(()=>{setTimeout(()=>{us=z_()})})}return{get firstHiddenTime(){return us},onHidden(e){NA.add(e)}}},sd=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},$_=[1800,3e3],OA=(t,e={})=>{sd(()=>{const n=id();let r,i=Bn("FCP");const s=Xa("paint",o=>{for(const a of o)a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<n.firstHiddenTime&&(i.value=Math.max(a.startTime-Qa(),0),i.entries.push(a),r(!0)))});s&&(r=Fn(t,i,$_,e.reportAllChanges),Ys(o=>{i=Bn("FCP"),r=Fn(t,i,$_,e.reportAllChanges),mg(()=>{i.value=performance.now()-o.timeStamp,r(!0)})}))})},H_=[.1,.25],C4=(t,e={})=>{const n=id();OA(yg(()=>{let r,i=Bn("CLS",0);const s=vg(e,P4),o=l=>{for(const c of l)s.h(c);s.i>i.value&&(i.value=s.i,i.entries=s.o,r())},a=Xa("layout-shift",o);a&&(r=Fn(t,i,H_,e.reportAllChanges),n.onHidden(()=>{o(a.takeRecords()),r(!0)}),Ys(()=>{s.i=0,i=Bn("CLS",0),r=Fn(t,i,H_,e.reportAllChanges),mg(()=>r())}),setTimeout(r))}))};let DA=0,Ah=1/0,Hl=0;const R4=t=>{for(const e of t)e.interactionId&&(Ah=Math.min(Ah,e.interactionId),Hl=Math.max(Hl,e.interactionId),DA=Hl?(Hl-Ah)/7+1:0)};let sp;const q_=()=>sp?DA:performance.interactionCount??0,k4=()=>{"interactionCount"in performance||sp||(sp=Xa("event",R4,{type:"event",buffered:!0,durationThreshold:0}))};let W_=0;class N4{constructor(){Kt(this,"u",[]);Kt(this,"l",new Map);Kt(this,"m");Kt(this,"p")}v(){W_=q_(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((q_()-W_)/50));return this.u[e]}h(e){var i,s;if((i=this.m)==null||i.call(this,e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>n.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort((o,a)=>a.P-o.P),this.u.length>10){const o=this.u.splice(10);for(const a of o)this.l.delete(a.id)}(s=this.p)==null||s.call(this,r)}}}const LA=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=yg(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e(()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})}))},G_=[200,500],O4=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=id();sd(()=>{k4();let r,i=Bn("INP");const s=vg(e,N4),o=l=>{LA(()=>{for(const d of l)s.h(d);const c=s.L();c&&c.P!==i.value&&(i.value=c.P,i.entries=c.entries,r())})},a=Xa("event",o,{durationThreshold:e.durationThreshold??40});r=Fn(t,i,G_,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{o(a.takeRecords()),r(!0)}),Ys(()=>{s.v(),i=Bn("INP"),r=Fn(t,i,G_,e.reportAllChanges)}))})};class D4{constructor(){Kt(this,"m")}h(e){var n;(n=this.m)==null||n.call(this,e)}}const K_=[2500,4e3],L4=(t,e={})=>{sd(()=>{const n=id();let r,i=Bn("LCP");const s=vg(e,D4),o=l=>{e.reportAllChanges||(l=l.slice(-1));for(const c of l)s.h(c),c.startTime<n.firstHiddenTime&&(i.value=Math.max(c.startTime-Qa(),0),i.entries=[c],r())},a=Xa("largest-contentful-paint",o);if(a){r=Fn(t,i,K_,e.reportAllChanges);const l=yg(()=>{o(a.takeRecords()),a.disconnect(),r(!0)}),c=d=>{d.isTrusted&&(LA(l),removeEventListener(d.type,c,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])addEventListener(d,c,{capture:!0});Ys(d=>{i=Bn("LCP"),r=Fn(t,i,K_,e.reportAllChanges),mg(()=>{i.value=performance.now()-d.timeStamp,r(!0)})})}})},Q_=[800,1800],op=t=>{document.prerendering?sd(()=>op(t)):document.readyState!=="complete"?addEventListener("load",()=>op(t),!0):setTimeout(t)},M4=(t,e={})=>{let n=Bn("TTFB"),r=Fn(t,n,Q_,e.reportAllChanges);op(()=>{const i=gg();i&&(n.value=Math.max(i.responseStart-Qa(),0),n.entries=[i],r(!0),Ys(()=>{n=Bn("TTFB",0),r=Fn(t,n,Q_,e.reportAllChanges),r(!0)}))})};function j4(t){var e,n=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+n}function So(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(j4(t)),navigationStart:Math.floor(performance.timeOrigin)}}var V4=function(){var t=null,e=We(),n=e==null?void 0:e.document,r=e==null?void 0:e.location,i=function(a,l){return V(void 0,void 0,void 0,function(){var c,d,h;return j(this,function(f){return c=function(g){var m;if(!g)return"";var E=g;try{E=decodeURI(g)}catch(A){(m=a.loggerProvider)===null||m===void 0||m.error("Malformed URI sequence: ",A)}return E},n===void 0?[2]:(d=c(r==null?void 0:r.href),h={"[Amplitude] Page Domain":(r==null?void 0:r.hostname)||"","[Amplitude] Page Location":d,"[Amplitude] Page Path":c(r==null?void 0:r.pathname),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":d.split("?")[0]},L4(function(g){h["[Amplitude] LCP"]=So(g)}),OA(function(g){h["[Amplitude] FCP"]=So(g)}),O4(function(g){h["[Amplitude] INP"]=So(g)}),C4(function(g){h["[Amplitude] CLS"]=So(g)}),M4(function(g){h["[Amplitude] TTFB"]=So(g)}),t=function(){n.visibilityState==="hidden"&&t&&(l.track(b4,h),n.removeEventListener("visibilitychange",t),t=null)},n.addEventListener("visibilitychange",t),[2])})})},s=function(a){return V(void 0,void 0,void 0,function(){return j(this,function(l){return[2,a]})})},o=function(){return V(void 0,void 0,void 0,function(){return j(this,function(a){return t&&(n==null||n.removeEventListener("visibilitychange",t)),[2]})})};return{name:x4,type:"enrichment",setup:i,execute:s,teardown:o}},X_=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},U4=function(t){return Object.values(t).every(function(e){return!e})},F4=function(t,e,n,r,i){i===void 0&&(i=!0),t.referrer;var s=t.referring_domain,o=bi(t,["referrer","referring_domain"]),a=e||{};a.referrer;var l=a.referring_domain,c=bi(a,["referrer","referring_domain"]);if(B4(n.excludeReferrers,t.referring_domain))return r.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!i&&U4(t)&&e)return r.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var d=JSON.stringify(o)!==JSON.stringify(c),h=X_(s||"")!==X_(l||""),f=!e||d||h;return f?r.debug("This is a new campaign. An $identify event will be sent."):r.debug("This is not a new campaign because it's the same as the previous one."),f},B4=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(n){return n instanceof RegExp?n.test(e):n===e})},z4=function(t,e){var n=G(G({},nd),t),r=Object.entries(n).reduce(function(i,s){var o,a=Y(s,2),l=a[0],c=a[1];return i.setOnce("initial_".concat(l),(o=c??e.initialEmptyValue)!==null&&o!==void 0?o:"EMPTY"),c?i.set(l,c):i.unset(l)},new xa);return NS(r)},$4=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},H4=function(){function t(e,n){var r;this.shouldTrackNewCampaign=!1,this.options=G({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:$4((r=n.cookieOptions)===null||r===void 0?void 0:r.domain)},e),this.storage=n.cookieStorage,this.storageKey=u_(n.apiKey,"MKTG"),this.webExpStorageKey=u_(n.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=nd,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,this.logger=n.loggerProvider,n.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return V(this,void 0,void 0,function(){var e,n;return j(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return n=Y.apply(void 0,[r.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],e=this.lastEventTime?jS(this.sessionTimeout,this.lastEventTime):!0,F4(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return V(this,void 0,void 0,function(){var e;return j(this,function(n){switch(n.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:return e=n.sent(),e?[4,this.storage.remove(this.webExpStorageKey)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,Promise.all([e||new HS().parse(),this.storage.get(this.storageKey)])];case 4:return[2,n.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var n=z4(this.currentCampaign,this.options);return e&&(n.event_id=e),n},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}(),ql="AMP_CURRENT_PAGE",Wl="AMP_PREVIOUS_PAGE",Wi="AMP_URL_INFO",Yo;(function(t){t.Direct="direct",t.Internal="internal",t.External="external"})(Yo||(Yo={}));var q4=new Set([In.IDENTIFY,In.GROUP_IDENTIFY,In.REVENUE]),W4=function(){var t=We(),e=void 0,n=!1,r=void 0,i=!1,s=!1,o=function(h){var f;try{var g=Oo(h,r);f=new URL(g).hostname}catch(m){r==null||r.error("Could not parse URL: ",m)}return f},a=function(h){var f=typeof location<"u"&&location.hostname||"",g=h?o(h):void 0;switch(g){case void 0:return Yo.Direct;case f:return Yo.Internal;default:return Yo.External}},l=function(){return V(void 0,void 0,void 0,function(){var h,f,g,m,E;return j(this,function(A){switch(A.label){case 0:return e&&n?[4,e.get(Wi)]:[3,3];case 1:return h=A.sent(),f=Oo(typeof location<"u"&&location.href||""),g=(h==null?void 0:h[ql])||"",m=void 0,f===g?m=(h==null?void 0:h[Wl])||"":g?m=g:m=document.referrer||"",[4,e.set(Wi,(E={},E[ql]=f,E[Wl]=m,E))];case 2:A.sent(),A.label=3;case 3:return[2]}})})},c=function(){l()},d={name:"@amplitude/plugin-page-url-enrichment-browser",type:"enrichment",setup:function(h,f){return V(void 0,void 0,void 0,function(){return j(this,function(g){switch(g.label){case 0:return r=h.loggerProvider,r.log("Installing @amplitude/plugin-page-url-enrichment-browser"),s=!0,t?(e=new eg(t.sessionStorage),[4,e.isEnabled()]):[3,2];case 1:n=g.sent(),t.addEventListener("popstate",c),i||(t.history.pushState=new Proxy(t.history.pushState,{apply:function(m,E,A){var w=Y(A,3),_=w[0],I=w[1],k=w[2];m.apply(E,[_,I,k]),s&&c()}}),t.history.replaceState=new Proxy(t.history.replaceState,{apply:function(m,E,A){var w=Y(A,3),_=w[0],I=w[1],k=w[2];m.apply(E,[_,I,k]),s&&c()}}),i=!0),g.label=2;case 2:return[2]}})})},execute:function(h){return V(void 0,void 0,void 0,function(){var f,g,m,E,A;return j(this,function(w){switch(w.label){case 0:return f=Oo(typeof location<"u"&&location.href||""),e&&n?[4,e.get(Wi)]:[3,5];case 1:return g=w.sent(),g!=null&&g[ql]?[3,3]:[4,e.set(Wi,(A={},A[ql]=f,A[Wl]=document.referrer||"",A))];case 2:w.sent(),w.label=3;case 3:return[4,e.get(Wi)];case 4:if(m=w.sent(),E="",m&&(E=m[Wl]||""),q4.has(h.event_type))return[2,h];h.event_properties=G(G({},h.event_properties||{}),{"[Amplitude] Page Domain":Ao(h,"[Amplitude] Page Domain",typeof location<"u"&&location.hostname||""),"[Amplitude] Page Location":Ao(h,"[Amplitude] Page Location",f),"[Amplitude] Page Path":Ao(h,"[Amplitude] Page Path",typeof location<"u"&&Oo(location.pathname)||""),"[Amplitude] Page Title":Ao(h,"[Amplitude] Page Title",ig(rg)),"[Amplitude] Page URL":Ao(h,"[Amplitude] Page URL",f.split("?")[0]),"[Amplitude] Previous Page Location":E,"[Amplitude] Previous Page Type":a(E)}),w.label=5;case 5:return[2,h]}})})},teardown:function(){return V(void 0,void 0,void 0,function(){return j(this,function(h){switch(h.label){case 0:return t&&(t.removeEventListener("popstate",c),s=!1),e&&n?[4,e.set(Wi,{})]:[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}})})}};return d};function Ao(t,e,n){return t.event_properties||(t.event_properties={}),t.event_properties[e]===void 0?n:t.event_properties[e]}var G4=function(t){Vt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._diagnosticsSampleRate=0,n}return e.prototype.init=function(n,r,i){n===void 0&&(n="");var s,o;return arguments.length>2?(s=r,o=i):typeof r=="string"?(s=r,o=void 0):(s=r==null?void 0:r.userId,o=r),Ut(this._init(G(G({},o),{userId:s,apiKey:n})))},e.prototype._init=function(n){var r,i,s,o,a;return V(this,void 0,void 0,function(){var l,c,d,h,f,g,m,E,A,w=this;return j(this,function(_){switch(_.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,ZM(n.apiKey,n,this)]);case 1:return l=_.sent(),!((r=l.remoteConfig)===null||r===void 0)&&r.fetchRemoteConfig?(c=new iM(l.apiKey,l.loggerProvider,l.serverZone,(i=l.remoteConfig)===null||i===void 0?void 0:i.serverUrl),[4,new Promise(function(I){c==null||c.subscribe("configs.analyticsSDK.browserSDK","all",function(k,O,L){l.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:k,source:O,lastFetch:L},null,2)),k&&hj(k,l),I()})})]):[3,3];case 2:_.sent(),_.label=3;case 3:return d=new YL(l.apiKey,l.loggerProvider,l.serverZone,{enabled:l.enableDiagnostics,sampleRate:l.diagnosticsSampleRate||this._diagnosticsSampleRate}),d.setTag("library","".concat(XS,"/").concat(sg)),[4,t.prototype._init.call(this,l)];case 4:return _.sent(),this.logBrowserOptions(l),this.config.diagnosticsClient=d,this.config.remoteConfigClient=c,qS(this.config.defaultTracking)?(h=LM(this.config),this.webAttribution=new H4(h,this.config),[4,this.webAttribution.init()]):[3,6];case 5:_.sent(),_.label=6;case 6:return f=dc(),g=f.ampTimestamp?Number(f.ampTimestamp):void 0,m=g?Date.now()<g:!0,this.config.identify&&this.identify(this.config.identify),E=m&&!Number.isNaN(Number(f.ampSessionId))?Number(f.ampSessionId):void 0,this.setSessionId((a=(o=(s=n.sessionId)!==null&&s!==void 0?s:E)!==null&&o!==void 0?o:this.config.sessionId)!==null&&a!==void 0?a:Date.now()),A=ba(n.instanceName),A.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===sM?[3,8]:[4,this.add(dj()).promise];case 7:_.sent(),_.label=8;case 8:return[4,this.add(new PL({diagnosticsClient:d})).promise];case 9:return _.sent(),[4,this.add(new VM).promise];case 10:return _.sent(),[4,this.add(new UL).promise];case 11:return _.sent(),cj(this.config),bM(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(uj()).promise]):[3,13];case 12:_.sent(),_.label=13;case 13:return PM(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(lj()).promise]):[3,15];case 14:_.sent(),_.label=15;case 15:return WS(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(ij(DM(this.config))).promise]):[3,17];case 16:_.sent(),_.label=17;case 17:return KS(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(f4(kM(this.config),{diagnosticsClient:d})).promise]):[3,19];case 18:_.sent(),_.label=19;case 19:return QS(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(y4(NM(this.config))).promise]):[3,21];case 20:_.sent(),_.label=21;case 21:return GS(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(A4(OM(this.config))).promise]):[3,23];case 22:_.sent(),_.label=23;case 23:return RM(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(V4()).promise]):[3,25];case 24:_.sent(),_.label=25;case 25:return CM(this.config.autocapture)?(this.config.loggerProvider.debug("Adding referrer page url plugin"),[4,this.add(W4()).promise]):[3,27];case 26:_.sent(),_.label=27;case 27:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 28:return _.sent(),A.eventBridge.setEventReceiver(function(I){var k=I.eventProperties||{},O=k.time,L=bi(k,["time"]),S=typeof O=="number"?{time:O}:void 0;w.track(I.eventType,L,S)}),[2]}})})},e.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},e.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,this.timeline.onIdentityChanged({userId:n}),jL(n,this.config.instanceName))},e.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},e.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),n!==this.config.deviceId&&(this.config.deviceId=n,this.timeline.onIdentityChanged({deviceId:n}),VL(n,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(ni()),this.setUserId(void 0)},e.prototype.getIdentity=function(){var n,r;return{deviceId:(n=this.config)===null||n===void 0?void 0:n.deviceId,userId:(r=this.config)===null||r===void 0?void 0:r.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.optOut},e.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},e.prototype.setSessionId=function(n){var r,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),Ut(Promise.resolve());if(n===this.config.sessionId)return Ut(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var s=this.getSessionId();s!==n&&this.timeline.onSessionIdChanged(n);var o=this.config.lastEventTime,a=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,g_(this.config.defaultTracking)&&(s&&o&&i.push(this.track(__,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:s,time:o+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var l=this.trackCampaignEventIfNeeded(++a,i);return g_(this.config.defaultTracking)&&i.push(this.track(y_,void 0,{event_id:l?++a:a,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,Ut(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=JS(n)},e.prototype.identify=function(n,r){if(vh(n)){var i=n._q;n._q=[],n=gh(new xa,i)}return r!=null&&r.user_id&&this.setUserId(r.user_id),r!=null&&r.device_id&&this.setDeviceId(r.device_id),t.prototype.identify.call(this,n,r)},e.prototype.groupIdentify=function(n,r,i,s){if(vh(i)){var o=i._q;i._q=[],i=gh(new xa,o)}return t.prototype.groupIdentify.call(this,n,r,i,s)},e.prototype.revenue=function(n,r){if(vh(n)){var i=n._q;n._q=[],n=gh(new wL,i)}return t.prototype.revenue.call(this,n,r)},e.prototype.trackCampaignEventIfNeeded=function(n,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(n);return r?r.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(n){return V(this,void 0,void 0,function(){var r,i,s;return j(this,function(o){return r=Date.now(),i=jS(this.config.sessionTimeout,this.config.lastEventTime),s=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==y_&&n.event_type!==__&&(!n.session_id||n.session_id===this.getSessionId())&&(i||s?(this.setSessionId(r),s&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),n.event_type===In.IDENTIFY&&n.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(n.user_properties)),[2,t.prototype.process.call(this,n)]})})},e.prototype.logBrowserOptions=function(n){try{var r=G(G({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e.prototype._setDiagnosticsSampleRate=function(n){if(!(n>1||n<0)&&!this.config){this._diagnosticsSampleRate=n;return}},e}(EL),K4=function(){var t=new G4;return{init:De(t.init.bind(t),"init",Ne(t),Oe(t,["config"])),add:De(t.add.bind(t),"add",Ne(t),Oe(t,["config.apiKey","timeline.plugins"])),remove:De(t.remove.bind(t),"remove",Ne(t),Oe(t,["config.apiKey","timeline.plugins"])),track:De(t.track.bind(t),"track",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),logEvent:De(t.logEvent.bind(t),"logEvent",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),identify:De(t.identify.bind(t),"identify",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),groupIdentify:De(t.groupIdentify.bind(t),"groupIdentify",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),setGroup:De(t.setGroup.bind(t),"setGroup",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),revenue:De(t.revenue.bind(t),"revenue",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),flush:De(t.flush.bind(t),"flush",Ne(t),Oe(t,["config.apiKey","timeline.queue.length"])),getUserId:De(t.getUserId.bind(t),"getUserId",Ne(t),Oe(t,["config","config.userId"])),setUserId:De(t.setUserId.bind(t),"setUserId",Ne(t),Oe(t,["config","config.userId"])),getDeviceId:De(t.getDeviceId.bind(t),"getDeviceId",Ne(t),Oe(t,["config","config.deviceId"])),setDeviceId:De(t.setDeviceId.bind(t),"setDeviceId",Ne(t),Oe(t,["config","config.deviceId"])),reset:De(t.reset.bind(t),"reset",Ne(t),Oe(t,["config","config.userId","config.deviceId"])),getSessionId:De(t.getSessionId.bind(t),"getSessionId",Ne(t),Oe(t,["config"])),setSessionId:De(t.setSessionId.bind(t),"setSessionId",Ne(t),Oe(t,["config"])),extendSession:De(t.extendSession.bind(t),"extendSession",Ne(t),Oe(t,["config"])),setOptOut:De(t.setOptOut.bind(t),"setOptOut",Ne(t),Oe(t,["config"])),setTransport:De(t.setTransport.bind(t),"setTransport",Ne(t),Oe(t,["config"])),getIdentity:De(t.getIdentity.bind(t),"getIdentity",Ne(t),Oe(t,["config"])),getOptOut:De(t.getOptOut.bind(t),"getOptOut",Ne(t),Oe(t,["config"])),_setDiagnosticsSampleRate:De(t._setDiagnosticsSampleRate.bind(t),"_setDiagnosticsSampleRate",Ne(t),Oe(t,["config"]))}};const od=K4();var Q4=od.identify,X4=od.init,Y4=od.setUserId,Le=od.track;class J4{constructor(){Kt(this,"initialized",!1)}async initialize(e){try{X4(e,void 0,{defaultTracking:{sessions:!0,pageViews:!0,formInteractions:!1,fileDownloads:!1},trackingOptions:{ipAddress:!1}}),this.initialized=!0,console.log(" Amplitude initialized")}catch(n){console.error(" Amplitude initialization failed:",n)}}setUserId(e){this.initialized&&Y4(e)}setUserProperties(e){if(!this.initialized)return;const n=new xa;Object.entries(e).forEach(([r,i])=>{n.set(r,i)}),Q4(n)}async trackAppOpened(e){this.initialized&&Le("appOpened",e)}async trackAppClosed(e){this.initialized&&Le("appClosed",e)}async trackUserLoggedIn(e,n){this.initialized&&Le("userLoggedIn",{method:e,userId:n})}async trackUserSignedUp(e,n){this.initialized&&Le("userSignedUp",{method:e,userId:n})}async trackUserLoggedOut(){this.initialized&&Le("userLoggedOut")}async trackProjectCreated(e,n,r,i){this.initialized&&Le("projectCreated",{projectId:e,title:n,icon:r,color:i})}async trackProjectUpdated(e,n){this.initialized&&Le("projectUpdated",{projectId:e,changes:n})}async trackProjectDeleted(e){this.initialized&&Le("projectDeleted",{projectId:e})}async trackProjectShared(e,n){this.initialized&&Le("projectShared",{projectId:e,shareMethod:n})}async trackTodoCreated(e,n){this.initialized&&Le("todoCreated",{todoId:e,projectId:n})}async trackTodoCompleted(e,n,r){this.initialized&&Le("todoCompleted",{todoId:e,projectId:n,duration:r})}async trackTodoDelegated(e,n){this.initialized&&Le("todoDelegated",{todoId:e,shareMethod:n})}async trackIdeaCreated(e,n){this.initialized&&Le("ideaCreated",{ideaId:e,tags:n})}async trackIdeaConverted(e,n){this.initialized&&Le("ideaConverted",{ideaId:e,projectId:n})}async trackMilestoneCompleted(e,n){this.initialized&&Le("milestoneCompleted",{milestoneId:e,projectId:n})}async trackShareGenerationStarted(e){this.initialized&&Le("shareGenerationStarted",{type:e})}async trackShareCompleted(e,n){this.initialized&&Le("shareCompleted",{type:e,generationTime:n})}async trackDataExport(){this.initialized&&Le("dataExport")}async trackDataImport(e){this.initialized&&Le("dataImport",{itemCount:e})}async trackSettingsViewed(){this.initialized&&Le("settingsViewed")}async trackUpgradePromptShown(e){this.initialized&&Le("upgradePromptShown",{reason:e})}async trackUpgradePromptDismissed(e){this.initialized&&Le("upgradePromptDismissed",{reason:e})}async trackUpgradePromptAccepted(e){this.initialized&&Le("upgradePromptAccepted",{reason:e})}}const on=new J4,MA=F.createContext(void 0);function Z4({children:t}){const[e,n]=F.useState({user:null,loading:!0,isAuthenticated:!1,error:null});F.useEffect(()=>{const a=async()=>{const c=await Hi.loadGuestUser();c?(n({user:c,loading:!1,isAuthenticated:!0,error:null}),on.setUserId(c.uid),on.setUserProperties({userType:"guest"})):n(d=>({...d,loading:!1}))},l=Hi.onAuthStateChange(async c=>{if(c){const d={uid:c.uid,email:c.email||void 0,displayName:c.displayName||void 0,photoURL:c.photoURL||void 0,createdAt:new Date(c.metadata.creationTime||Date.now()),lastLoginAt:new Date,preferences:{notifications:!0,theme:"auto",language:"en"},isPremium:!1};n({user:d,loading:!1,isAuthenticated:!0,error:null}),on.setUserId(d.uid),on.setUserProperties({userType:"google",email:d.email})}else a()});return()=>l()},[]);const r=async()=>{try{n(l=>({...l,loading:!0,error:null}));const a=await Hi.signInWithGoogle();n({user:a,loading:!1,isAuthenticated:!0,error:null}),await on.trackUserLoggedIn("google",a.uid)}catch(a){throw n(l=>({...l,loading:!1,error:a.message||"Failed to sign in"})),a}},i=async()=>{try{n(l=>({...l,loading:!0,error:null}));const a=await Hi.signInAsGuest();n({user:a,loading:!1,isAuthenticated:!0,error:null}),await on.trackUserLoggedIn("guest",a.uid)}catch(a){throw n(l=>({...l,loading:!1,error:a.message||"Failed to sign in as guest"})),a}},s=async()=>{try{await Hi.signOut(),await on.trackUserLoggedOut(),n({user:null,loading:!1,isAuthenticated:!1,error:null})}catch(a){throw n(l=>({...l,error:a.message||"Failed to sign out"})),a}},o=async a=>{if(e.user)try{await Hi.updateUserProfile(e.user.uid,a),n(l=>({...l,user:l.user?{...l.user,...a}:null}))}catch(l){throw console.error("Failed to update user profile:",l),l}};return y.jsx(MA.Provider,{value:{...e,signInWithGoogle:r,signInAsGuest:i,signOut:s,updateUserProfile:o},children:t})}function ad(){const t=F.useContext(MA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ap={MAX_ACTIVE_PROJECTS:20,MAX_MILESTONES_PER_PROJECT:10,MAX_STEPS_PER_PROJECT:20,MAX_IDEAS:20,MAX_ACTIVE_TODOS:20,MAX_IMPORTS_EXPORTS_PER_MONTH:8},Gl="freemium_limits_cache",Kl="freemium_limits_cache_timestamp",eU=24*60*60*1e3;class tU{constructor(){Kt(this,"memoryCache",null);Kt(this,"remoteUrl");this.remoteUrl="https://nfinityinfotech.com/freemium_limits.txt"}async fetchLimits(){if(this.memoryCache)return this.memoryCache;const e=this.getCachedLimits();if(e)return this.memoryCache=e,e;try{const n=await fetch(this.remoteUrl,{method:"GET",headers:{"Cache-Control":"no-cache"}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.text(),i=this.parseLimitsText(r);return this.cacheLimits(i),this.memoryCache=i,console.log(" Freemium limits fetched from remote:",i),i}catch(n){return console.warn(" Failed to fetch freemium limits, using defaults:",n),ap}}parseLimitsText(e){const n={...ap},r=e.split(`
`);for(const i of r){const s=i.trim();if(!s||s.startsWith("#"))continue;const[o,a]=s.split("=").map(l=>l.trim());if(o&&a){const l=parseInt(a,10);!isNaN(l)&&o in n&&(n[o]=l)}}return n}getCachedLimits(){try{const e=localStorage.getItem(Gl),n=localStorage.getItem(Kl);if(!e||!n)return null;const r=parseInt(n,10);return Date.now()-r>eU?(localStorage.removeItem(Gl),localStorage.removeItem(Kl),null):JSON.parse(e)}catch(e){return console.error("Failed to read cached limits:",e),null}}cacheLimits(e){try{localStorage.setItem(Gl,JSON.stringify(e)),localStorage.setItem(Kl,Date.now().toString())}catch(n){console.error("Failed to cache limits:",n)}}clearCache(){this.memoryCache=null,localStorage.removeItem(Gl),localStorage.removeItem(Kl)}}const nU=new tU;function rU(){const t=new Date;return[{id:"demo_project_1",title:"Smart Home IoT Platform",description:"Building an integrated IoT platform for smart home automation",icon:"home",color:"#6366F1",steps:[{id:"step_1",title:"Market Research",description:"Analyze competitors and identify target audience",completed:!0,position:0,createdAt:new Date(t.getTime()-30*24*60*60*1e3),updatedAt:new Date(t.getTime()-25*24*60*60*1e3)},{id:"step_2",title:"Technical Architecture",description:"Design system architecture and choose tech stack",completed:!0,position:1,createdAt:new Date(t.getTime()-25*24*60*60*1e3),updatedAt:new Date(t.getTime()-20*24*60*60*1e3)},{id:"step_3",title:"MVP Development",description:"Build minimum viable product with core features",completed:!1,position:2,createdAt:new Date(t.getTime()-20*24*60*60*1e3),updatedAt:new Date(t.getTime()-20*24*60*60*1e3)},{id:"step_4",title:"Beta Testing",description:"Conduct user testing and gather feedback",completed:!1,position:3,createdAt:new Date(t.getTime()-15*24*60*60*1e3),updatedAt:new Date(t.getTime()-15*24*60*60*1e3)},{id:"step_5",title:"Launch",description:"Deploy to production and start marketing",completed:!1,position:4,createdAt:new Date(t.getTime()-10*24*60*60*1e3),updatedAt:new Date(t.getTime()-10*24*60*60*1e3)}],milestones:[{id:"milestone_1",title:"Planning Complete",description:"Market research and architecture finalized",stepIds:["step_1","step_2"],color:"#22C55E",icon:"check-circle",completed:!0,position:0},{id:"milestone_2",title:"MVP Ready",description:"First working version of the product",stepIds:["step_3"],color:"#3B82F6",icon:"rocket",completed:!1,position:1},{id:"milestone_3",title:"Public Launch",description:"Product live and available to users",stepIds:["step_4","step_5"],color:"#F59E0B",icon:"star",completed:!1,position:2}],progress:40,stars:4.5,createdAt:new Date(t.getTime()-30*24*60*60*1e3),updatedAt:t,archived:!1}]}function iU(){const t=new Date;return[{id:"demo_idea_1",title:"Mobile Fitness App",description:"AI-powered personal trainer app with workout tracking and nutrition planning",icon:"fitness-center",color:"#22C55E",tags:["fitness","health","AI","mobile"],createdAt:new Date(t.getTime()-7*24*60*60*1e3),convertedToProject:!1},{id:"demo_idea_2",title:"Recipe Sharing Community",description:"Social platform for sharing and discovering recipes with video tutorials",icon:"restaurant",color:"#F59E0B",tags:["food","social","community","video"],createdAt:new Date(t.getTime()-14*24*60*60*1e3),convertedToProject:!1}]}function Gi(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function xh(t){if(t.length===0)return 0;const e=t.filter(n=>n.completed).length;return Math.round(e/t.length*100)}function sU(t,e){return t.stepIds.length===0?!1:t.stepIds.every(n=>{const r=e.find(i=>i.id===n);return(r==null?void 0:r.completed)===!0})}function oU(t,e){return t.map(n=>({...n,completed:sU(n,e)}))}function pc(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}function aU(t){return t<new Date}function lU(t,e){let n;return function(...i){const s=()=>{clearTimeout(n),t(...i)};clearTimeout(n),n=setTimeout(s,e)}}const uU={projects:[],ideas:[],todos:[],selectedProject:null,selectedIdea:null,isLoading:!0,targetStepId:null,importExportCount:0,lastImportExportReset:null,freemiumLimits:ap};function cU(t,e){var n,r,i,s,o,a,l,c,d,h,f,g;switch(e.type){case"LOAD_DATA":return{...t,projects:e.payload.projects,ideas:e.payload.ideas,todos:e.payload.todos,isLoading:!1};case"LOAD_DEMO_DATA":return{...t,projects:rU(),ideas:iU(),isLoading:!1};case"IMPORT_DATA":return{...t,projects:e.payload.projects,ideas:e.payload.ideas,todos:e.payload.todos};case"CREATE_PROJECT":return{...t,projects:[...t.projects,e.payload]};case"UPDATE_PROJECT":{const m=t.projects.map(E=>E.id===e.payload.id?{...E,...e.payload.updates,updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((n=t.selectedProject)==null?void 0:n.id)===e.payload.id?{...t.selectedProject,...e.payload.updates,updatedAt:new Date}:t.selectedProject}}case"DELETE_PROJECT":return{...t,projects:t.projects.filter(m=>m.id!==e.payload),todos:t.todos.filter(m=>m.projectId!==e.payload),selectedProject:((r=t.selectedProject)==null?void 0:r.id)===e.payload?null:t.selectedProject};case"SELECT_PROJECT":return{...t,selectedProject:e.payload&&t.projects.find(m=>m.id===e.payload)||null};case"ADD_STEP":{const m=t.projects.map(E=>{if(E.id===e.payload.projectId){const A=[...E.steps,e.payload.step],w=xh(A);return{...E,steps:A,progress:w,updatedAt:new Date}}return E});return{...t,projects:m,selectedProject:((i=t.selectedProject)==null?void 0:i.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"UPDATE_STEP":{const m=t.projects.map(E=>{if(E.id===e.payload.projectId){const A=E.steps.map(I=>I.id===e.payload.stepId?{...I,...e.payload.updates,updatedAt:new Date}:I),w=oU(E.milestones,A),_=xh(A);return{...E,steps:A,milestones:w,progress:_,updatedAt:new Date}}return E});return{...t,projects:m,selectedProject:((s=t.selectedProject)==null?void 0:s.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"DELETE_STEP":{const m=t.projects.map(E=>{if(E.id===e.payload.projectId){const A=E.steps.filter(I=>I.id!==e.payload.stepId),w=E.milestones.map(I=>({...I,stepIds:I.stepIds.filter(k=>k!==e.payload.stepId)})),_=xh(A);return{...E,steps:A,milestones:w,progress:_,updatedAt:new Date}}return E});return{...t,projects:m,todos:t.todos.filter(E=>E.stepId!==e.payload.stepId),selectedProject:((o=t.selectedProject)==null?void 0:o.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"REORDER_STEPS":{const m=t.projects.map(E=>E.id===e.payload.projectId?{...E,steps:e.payload.steps,updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((a=t.selectedProject)==null?void 0:a.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"ADD_MILESTONE":{const m=t.projects.map(E=>E.id===e.payload.projectId?{...E,milestones:[...E.milestones,e.payload.milestone],updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((l=t.selectedProject)==null?void 0:l.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"UPDATE_MILESTONE":{const m=t.projects.map(E=>E.id===e.payload.projectId?{...E,milestones:E.milestones.map(A=>A.id===e.payload.milestoneId?{...A,...e.payload.updates}:A),updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((c=t.selectedProject)==null?void 0:c.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"DELETE_MILESTONE":{const m=t.projects.map(E=>E.id===e.payload.projectId?{...E,milestones:E.milestones.filter(A=>A.id!==e.payload.milestoneId),updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((d=t.selectedProject)==null?void 0:d.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"REORDER_MILESTONES":{const m=t.projects.map(E=>E.id===e.payload.projectId?{...E,milestones:e.payload.milestones,updatedAt:new Date}:E);return{...t,projects:m,selectedProject:((h=t.selectedProject)==null?void 0:h.id)===e.payload.projectId?m.find(E=>E.id===e.payload.projectId)||null:t.selectedProject}}case"CREATE_IDEA":return{...t,ideas:[...t.ideas,e.payload]};case"UPDATE_IDEA":return{...t,ideas:t.ideas.map(m=>m.id===e.payload.id?{...m,...e.payload.updates}:m),selectedIdea:((f=t.selectedIdea)==null?void 0:f.id)===e.payload.id?{...t.selectedIdea,...e.payload.updates}:t.selectedIdea};case"DELETE_IDEA":return{...t,ideas:t.ideas.filter(m=>m.id!==e.payload),selectedIdea:((g=t.selectedIdea)==null?void 0:g.id)===e.payload?null:t.selectedIdea};case"SELECT_IDEA":return{...t,selectedIdea:e.payload&&t.ideas.find(m=>m.id===e.payload)||null};case"CONVERT_IDEA_TO_PROJECT":return{...t,ideas:t.ideas.map(m=>m.id===e.payload.ideaId?{...m,convertedToProject:!0,projectId:e.payload.project.id}:m),projects:[...t.projects,e.payload.project]};case"CREATE_TODO":return{...t,todos:[...t.todos,e.payload]};case"UPDATE_TODO":return{...t,todos:t.todos.map(m=>m.id===e.payload.id?{...m,...e.payload.updates}:m)};case"DELETE_TODO":return{...t,todos:t.todos.filter(m=>m.id!==e.payload)};case"COMPLETE_TODO":return{...t,todos:t.todos.map(m=>m.id===e.payload?{...m,completed:!0,completedAt:new Date}:m)};case"ARCHIVE_TODO":return{...t,todos:t.todos.map(m=>m.id===e.payload?{...m,archived:!0}:m)};case"UPDATE_TODO_PROGRESS_NOTE":return{...t,todos:t.todos.map(m=>m.id===e.payload.id?{...m,progressNote:e.payload.note}:m)};case"SET_TARGET_STEP":return{...t,targetStepId:e.payload};case"INCREMENT_IMPORT_EXPORT_COUNT":{const m=new Date,E=new Date(m.getFullYear(),m.getMonth(),1),A=!t.lastImportExportReset||t.lastImportExportReset<E;return{...t,importExportCount:A?1:t.importExportCount+1,lastImportExportReset:A?m:t.lastImportExportReset}}case"RESET_IMPORT_EXPORT_COUNT":return{...t,importExportCount:0,lastImportExportReset:new Date};case"SET_FREEMIUM_LIMITS":return{...t,freemiumLimits:e.payload};default:return t}}const jA=F.createContext(void 0);function dU({children:t}){const[e,n]=F.useReducer(cU,uU),r=F.useCallback(lU(()=>{Nt.saveProjects(e.projects),Nt.saveIdeas(e.ideas),Nt.saveTodos(e.todos),Nt.setImportExportCount(e.importExportCount),e.lastImportExportReset&&Nt.setLastImportExportReset(e.lastImportExportReset)},1e3),[e.projects,e.ideas,e.todos,e.importExportCount,e.lastImportExportReset]);F.useEffect(()=>{e.isLoading||r()},[e.projects,e.ideas,e.todos,e.importExportCount,e.isLoading]),F.useEffect(()=>{(async()=>{if(await Nt.isFirstLaunch())n({type:"LOAD_DEMO_DATA"}),await Nt.setFirstLaunchComplete();else{const[be,H,J,Z]=await Promise.all([Nt.loadProjects(),Nt.loadIdeas(),Nt.loadTodos(),Nt.getImportExportCount()]);n({type:"LOAD_DATA",payload:{projects:be,ideas:H,todos:J}}),Z>0&&n({type:"INCREMENT_IMPORT_EXPORT_COUNT"})}const oe=await nU.fetchLimits();n({type:"SET_FREEMIUM_LIMITS",payload:oe})})()},[]);const i=$=>{const W={...$,id:Gi(),createdAt:new Date,updatedAt:new Date};n({type:"CREATE_PROJECT",payload:W})},s=($,W)=>{n({type:"UPDATE_PROJECT",payload:{id:$,updates:W}})},o=$=>{n({type:"DELETE_PROJECT",payload:$})},a=$=>{n({type:"SELECT_PROJECT",payload:$})},l=($,W)=>{const oe={...W,id:Gi(),createdAt:new Date,updatedAt:new Date};n({type:"ADD_STEP",payload:{projectId:$,step:oe}})},c=($,W,oe)=>{n({type:"UPDATE_STEP",payload:{projectId:$,stepId:W,updates:oe}})},d=($,W)=>{n({type:"DELETE_STEP",payload:{projectId:$,stepId:W}})},h=($,W)=>{n({type:"REORDER_STEPS",payload:{projectId:$,steps:W}})},f=($,W)=>{const oe={...W,id:Gi()};n({type:"ADD_MILESTONE",payload:{projectId:$,milestone:oe}})},g=($,W,oe)=>{n({type:"UPDATE_MILESTONE",payload:{projectId:$,milestoneId:W,updates:oe}})},m=($,W)=>{n({type:"DELETE_MILESTONE",payload:{projectId:$,milestoneId:W}})},E=($,W)=>{n({type:"REORDER_MILESTONES",payload:{projectId:$,milestones:W}})},A=$=>{const W={...$,id:Gi(),createdAt:new Date,convertedToProject:!1};n({type:"CREATE_IDEA",payload:W})},w=($,W)=>{n({type:"UPDATE_IDEA",payload:{id:$,updates:W}})},_=$=>{n({type:"DELETE_IDEA",payload:$})},I=$=>{n({type:"SELECT_IDEA",payload:$})},k=$=>{const W=e.ideas.find(be=>be.id===$);if(!W)return;const oe={id:Gi(),title:W.title,description:W.description,icon:W.icon,color:W.color,steps:[],milestones:[],progress:0,stars:0,createdAt:new Date,updatedAt:new Date,archived:!1};n({type:"CONVERT_IDEA_TO_PROJECT",payload:{ideaId:$,project:oe}})},O=$=>{const W={...$,id:Gi(),createdAt:new Date,completed:!1};n({type:"CREATE_TODO",payload:W})},L=($,W)=>{n({type:"UPDATE_TODO",payload:{id:$,updates:W}})},S=$=>{n({type:"DELETE_TODO",payload:$})},T=$=>{n({type:"COMPLETE_TODO",payload:$})},b=$=>{n({type:"ARCHIVE_TODO",payload:$})},P=($,W)=>{n({type:"UPDATE_TODO_PROGRESS_NOTE",payload:{id:$,note:W}})},C=$=>{n({type:"SET_TARGET_STEP",payload:$})},N=($,W,oe)=>{n({type:"IMPORT_DATA",payload:{projects:$,ideas:W,todos:oe}})},R=()=>{n({type:"INCREMENT_IMPORT_EXPORT_COUNT"})};return y.jsx(jA.Provider,{value:{...e,createProject:i,updateProject:s,deleteProject:o,selectProject:a,addStep:l,updateStep:c,deleteStep:d,reorderSteps:h,addMilestone:f,updateMilestone:g,deleteMilestone:m,reorderMilestones:E,createIdea:A,updateIdea:w,deleteIdea:_,selectIdea:I,convertIdeaToProject:k,createTodo:O,updateTodo:L,deleteTodo:S,completeTodo:T,archiveTodo:b,updateTodoProgressNote:P,setTargetStep:C,importData:N,incrementImportExportCount:R},children:t})}function ri(){const t=F.useContext(jA);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),tt=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>F.createElement("svg",{ref:d,...hU,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${fU(t)}`,a].join(" "),...c},[...e.map(([h,f])=>F.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=tt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=tt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=tt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=tt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=tt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=tt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=tt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=tt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=tt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function SU(){const{signInWithGoogle:t,signInAsGuest:e,error:n}=ad(),[r,i]=F.useState(!1),s=async()=>{i(!0);try{await t()}catch(a){console.error("Sign in failed:",a)}finally{i(!1)}},o=async()=>{i(!0);try{await e()}catch(a){console.error("Guest sign in failed:",a)}finally{i(!1)}};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4",children:y.jsxs("div",{className:"max-w-md w-full",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Goals Tracker"}),y.jsx("p",{className:"text-white/90 text-lg mb-6",children:"Track your journey to success"}),y.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[y.jsxs("div",{className:"text-white/90 flex flex-col items-center",children:[y.jsx(ld,{className:"w-8 h-8 mb-2"}),y.jsx("span",{className:"text-sm",children:"Ideas"})]}),y.jsxs("div",{className:"text-white/90 flex flex-col items-center",children:[y.jsx(vc,{className:"w-8 h-8 mb-2"}),y.jsx("span",{className:"text-sm",children:"Goals"})]}),y.jsxs("div",{className:"text-white/90 flex flex-col items-center",children:[y.jsx(mc,{className:"w-8 h-8 mb-2"}),y.jsx("span",{className:"text-sm",children:"Progress"})]})]})]}),y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Get Started"}),n&&y.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:y.jsx("p",{className:"text-sm text-red-600",children:n})}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("button",{onClick:s,disabled:r,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),y.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),y.jsx("button",{onClick:o,disabled:r,className:"w-full px-6 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-200 hover:border-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue as Guest"})]}),y.jsx("p",{className:"mt-6 text-center text-sm text-gray-500",children:"Track your goals, manage milestones, and visualize your progress"})]})]})})}function FA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function up(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FA(t))&&(r&&(r+=" "),r+=e);return r}function AU({children:t}){var r;const{user:e}=ad(),n=[{path:"/ideas",label:"Ideas",icon:ld},{path:"/projects",label:"Goals",icon:vU},{path:"/todos",label:"Todos",icon:VA},{path:"/progress",label:"Progress",icon:UA},{path:"/settings",label:"Settings",icon:EU}];return y.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[y.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[y.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Goals Tracker"}),y.jsx("div",{className:"flex items-center gap-3",children:e&&y.jsxs("div",{className:"flex items-center gap-2",children:[e.photoURL?y.jsx("img",{src:e.photoURL,alt:e.displayName||"User",className:"w-8 h-8 rounded-full"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-sm font-medium",children:((r=e.displayName)==null?void 0:r[0])||"U"}),y.jsx("span",{className:"text-sm font-medium text-gray-700 hidden sm:inline",children:e.displayName||"Guest User"})]})})]})}),y.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row max-w-7xl mx-auto w-full",children:[y.jsx("nav",{className:"hidden lg:block w-64 bg-white border-r border-gray-200 min-h-full p-4",children:y.jsx("ul",{className:"space-y-1",children:n.map(i=>{const s=i.icon;return y.jsx("li",{children:y.jsxs(Ly,{to:i.path,className:({isActive:o})=>up("flex items-center gap-3 px-4 py-3 rounded-lg transition-all",o?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"),children:[y.jsx(s,{className:"w-5 h-5"}),y.jsx("span",{className:"font-medium",children:i.label})]})},i.path)})})}),y.jsx("main",{className:"flex-1 p-4 lg:p-6 pb-20 lg:pb-6",children:t})]}),y.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40",children:y.jsx("ul",{className:"flex justify-around items-center h-16",children:n.map(i=>{const s=i.icon;return y.jsx("li",{className:"flex-1",children:y.jsxs(Ly,{to:i.path,className:({isActive:o})=>up("flex flex-col items-center justify-center h-full gap-1 transition-colors",o?"text-primary":"text-gray-600"),children:[y.jsx(s,{className:"w-5 h-5"}),y.jsx("span",{className:"text-xs font-medium",children:i.label})]})},i.path)})})})]})}function xU(t,e){return t.filter(r=>!r.archived).length>=e.MAX_ACTIVE_PROJECTS?{canCreate:!1,message:`You've reached the maximum of ${e.MAX_ACTIVE_PROJECTS} active projects. Upgrade to create more!`}:{canCreate:!0}}function bU(t,e){return t.milestones.length>=e.MAX_MILESTONES_PER_PROJECT?{canCreate:!1,message:`You've reached the maximum of ${e.MAX_MILESTONES_PER_PROJECT} milestones per project. Upgrade for unlimited!`}:{canCreate:!0}}function PU(t,e){return t.steps.length>=e.MAX_STEPS_PER_PROJECT?{canCreate:!1,message:`You've reached the maximum of ${e.MAX_STEPS_PER_PROJECT} steps per project. Upgrade for unlimited!`}:{canCreate:!0}}function CU(t,e){return t.filter(r=>!r.convertedToProject).length>=e.MAX_IDEAS?{canCreate:!1,message:`You've reached the maximum of ${e.MAX_IDEAS} ideas. Upgrade for unlimited!`}:{canCreate:!0}}function J_(t,e,n){const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),1);if(!e||e<i)return{canProceed:!0,remaining:n.MAX_IMPORTS_EXPORTS_PER_MONTH-1};const s=n.MAX_IMPORTS_EXPORTS_PER_MONTH-t;return t>=n.MAX_IMPORTS_EXPORTS_PER_MONTH?{canProceed:!1,message:`You've used all ${n.MAX_IMPORTS_EXPORTS_PER_MONTH} import/export operations this month. Upgrade for unlimited!`,remaining:0}:{canProceed:!0,remaining:s-1}}function RU(){const{ideas:t,freemiumLimits:e,createIdea:n}=ri(),r=Mi(),[i,s]=F.useState(!1),o=t.filter(c=>!c.convertedToProject),a=()=>{const c=CU(t,e);if(!c.canCreate){alert(c.message);return}s(!0)},l=c=>{c.preventDefault();const d=new FormData(c.currentTarget),h=d.get("title"),f=d.get("description");h.trim()&&(n({title:h.trim(),description:f.trim(),icon:"lightbulb",color:"#F59E0B",tags:[]}),s(!1))};return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Ideas"}),y.jsxs("p",{className:"text-gray-600 mt-1",children:[o.length," idea",o.length!==1?"s":""]})]}),y.jsxs("button",{onClick:a,className:"btn btn-primary flex items-center gap-2",children:[y.jsx(gc,{className:"w-5 h-5"}),"New Idea"]})]}),o.length===0?y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(ld,{className:"w-10 h-10 text-gray-400"})}),y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No ideas yet"}),y.jsx("p",{className:"text-gray-600 mb-4",children:"Capture your brilliant ideas here!"}),y.jsx("button",{onClick:a,className:"btn btn-primary",children:"Add Idea"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(c=>y.jsxs("div",{onClick:()=>r(`/ideas/${c.id}`),className:"card hover:shadow-md transition-shadow cursor-pointer",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white text-xl mb-3",style:{backgroundColor:c.color},children:""}),y.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:c.title}),c.description&&y.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-3",children:c.description}),c.tags.length>0&&y.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[c.tags.slice(0,3).map((d,h)=>y.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full",children:["#",d]},h)),c.tags.length>3&&y.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full",children:["+",c.tags.length-3]})]})]},c.id))}),i&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Capture New Idea"}),y.jsxs("form",{onSubmit:l,children:[y.jsx("input",{type:"text",name:"title",placeholder:"Idea title...",className:"input mb-3",autoFocus:!0,required:!0}),y.jsx("textarea",{name:"description",placeholder:"Describe your idea...",className:"textarea mb-4",rows:3}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Save"}),y.jsx("button",{type:"button",onClick:()=>s(!1),className:"btn btn-secondary flex-1",children:"Cancel"})]})]})]})})]})}function kU(){const{projects:t,freemiumLimits:e,createProject:n}=ri(),r=Mi(),[i,s]=F.useState(!1),o=t.filter(c=>!c.archived),a=()=>{const c=xU(t,e);if(!c.canCreate){alert(c.message);return}s(!0)},l=c=>{c.preventDefault();const h=new FormData(c.currentTarget).get("title");h.trim()&&(n({title:h.trim(),description:"",icon:"folder",color:"#6366F1",steps:[],milestones:[],progress:0,stars:0,archived:!1}),s(!1))};return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Goals"}),y.jsxs("p",{className:"text-gray-600 mt-1",children:[o.length," active goal",o.length!==1?"s":""]})]}),y.jsxs("button",{onClick:a,className:"btn btn-primary flex items-center gap-2",children:[y.jsx(gc,{className:"w-5 h-5"}),"New Goal"]})]}),o.length===0?y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(UA,{className:"w-10 h-10 text-gray-400"})}),y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No goals yet"}),y.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first goal to get started!"}),y.jsx("button",{onClick:a,className:"btn btn-primary",children:"Create Goal"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(c=>y.jsxs("div",{onClick:()=>r(`/projects/${c.id}`),className:"card hover:shadow-md transition-shadow cursor-pointer",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white text-xl",style:{backgroundColor:c.color},children:""}),c.stars>0&&y.jsxs("div",{className:"flex items-center gap-1 text-amber-500",children:[y.jsx(TU,{className:"w-4 h-4 fill-current"}),y.jsx("span",{className:"text-sm font-medium",children:c.stars})]})]}),y.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:c.title}),c.description&&y.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:c.description}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between text-sm",children:[y.jsx("span",{className:"text-gray-600",children:"Progress"}),y.jsxs("span",{className:"font-medium text-gray-900",children:[c.progress,"%"]})]}),y.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${c.progress}%`}})})]}),y.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-gray-600",children:[y.jsxs("span",{children:[c.steps.length," steps"]}),y.jsxs("span",{children:[c.milestones.length," milestones"]})]})]},c.id))}),i&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Create New Goal"}),y.jsxs("form",{onSubmit:l,children:[y.jsx("input",{type:"text",name:"title",placeholder:"Goal title...",className:"input mb-4",autoFocus:!0,required:!0}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Create"}),y.jsx("button",{type:"button",onClick:()=>s(!1),className:"btn btn-secondary flex-1",children:"Cancel"})]})]})]})})]})}function NU(){const{todos:t,projects:e,completeTodo:n}=ri(),r=t.filter(a=>!a.completed&&!a.archived),i=t.filter(a=>a.completed&&!a.archived),s=a=>e.find(l=>l.id===a),o=a=>{n(a)};return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Todos"}),y.jsxs("p",{className:"text-gray-600 mt-1",children:[r.length," active  ",i.length," completed"]})]}),r.length===0&&i.length===0?y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(VA,{className:"w-10 h-10 text-gray-400"})}),y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No todos yet"}),y.jsx("p",{className:"text-gray-600",children:"Create todos from your project steps"})]}):y.jsxs("div",{className:"space-y-6",children:[r.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Active Tasks"}),y.jsx("div",{className:"space-y-3",children:r.map(a=>{const l=s(a.projectId),c=aU(a.dueDate);return y.jsx("div",{className:"card",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("input",{type:"checkbox",checked:a.completed,onChange:()=>o(a.id),className:"mt-1 w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary cursor-pointer"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"font-medium text-gray-900",children:a.title}),a.description&&y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),l&&y.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[y.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),y.jsx("span",{className:"text-sm text-gray-600",children:l.title})]}),y.jsxs("div",{className:up("flex items-center gap-1 mt-2 text-sm",c?"text-error":"text-gray-600"),children:[y.jsx(mU,{className:"w-4 h-4"}),pc(a.dueDate),c&&y.jsx("span",{className:"ml-1 font-medium",children:"(Overdue)"})]}),a.progressNote&&y.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-sm text-gray-700",children:["Note: ",a.progressNote]})]})]})},a.id)})})]}),i.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Completed"}),y.jsx("div",{className:"space-y-3",children:i.slice(0,10).map(a=>{const l=s(a.projectId);return y.jsx("div",{className:"card opacity-60",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"mt-1 w-5 h-5 text-success rounded cursor-default"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"font-medium text-gray-900 line-through",children:a.title}),l&&y.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),y.jsx("span",{className:"text-sm text-gray-600",children:l.title})]}),a.completedAt&&y.jsxs("span",{className:"text-sm text-success mt-1 block",children:["Completed ",pc(a.completedAt)]})]})]})},a.id)})})]})]})]})}function OU(){const{projects:t,ideas:e,todos:n}=ri(),r=t.filter(d=>!d.archived),i=t.filter(d=>d.progress===100),s=n.filter(d=>!d.completed&&!d.archived),o=n.filter(d=>d.completed),a=e.filter(d=>!d.convertedToProject),l=r.length>0?Math.round(r.reduce((d,h)=>d+h.progress,0)/r.length):0,c=[{label:"Active Goals",value:r.length,icon:vc,color:"bg-primary"},{label:"Completed Goals",value:i.length,icon:mc,color:"bg-success"},{label:"Active Todos",value:s.length,icon:mc,color:"bg-info"},{label:"Ideas",value:a.length,icon:ld,color:"bg-warning"}];return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Progress"}),y.jsx("p",{className:"text-gray-600 mt-1",children:"Track your journey to success"})]}),y.jsxs("div",{className:"card mb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Overall Progress"}),y.jsxs("span",{className:"text-3xl font-bold text-primary",children:[l,"%"]})]}),y.jsx("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-secondary transition-all",style:{width:`${l}%`}})})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:c.map(d=>{const h=d.icon;return y.jsx("div",{className:"card",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:`w-12 h-12 ${d.color} rounded-lg flex items-center justify-center`,children:y.jsx(h,{className:"w-6 h-6 text-white"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-600",children:d.label}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.value})]})]})},d.label)})}),r.length>0&&y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Goals Breakdown"}),y.jsx("div",{className:"space-y-4",children:r.map(d=>y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"font-medium text-gray-900",children:d.title}),y.jsxs("span",{className:"text-sm text-gray-600",children:[d.progress,"%"]})]}),y.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full transition-all",style:{width:`${d.progress}%`,backgroundColor:d.color}})}),y.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600",children:[y.jsxs("span",{children:[d.steps.filter(h=>h.completed).length," / ",d.steps.length," steps"]}),y.jsxs("span",{children:[d.milestones.length," milestones"]})]})]},d.id))})]}),o.length>0&&y.jsxs("div",{className:"card mt-6",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Achievements"}),y.jsxs("p",{className:"text-gray-600",children:["You've completed ",o.length," task",o.length!==1?"s":"","! Keep up the great work!"]})]})]})}const DU="1.0.0";function LU(t,e,n){const r={version:DU,exportDate:new Date().toISOString(),data:{projects:t,ideas:e,todos:n}};return JSON.stringify(r,null,2)}function MU(t){const e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a"),i=new Date().toISOString().split("T")[0];r.download=`goals-tracker-backup-${i}.json`,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function jU(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=i=>{var s;try{const o=(s=i.target)==null?void 0:s.result,a=JSON.parse(o);if(!a.version||!a.data)throw new Error("Invalid file format");const l=d=>{if(d==null)return d;if(typeof d=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(d))return new Date(d);if(Array.isArray(d))return d.map(l);if(typeof d=="object"){const h={};for(const[f,g]of Object.entries(d))h[f]=l(g);return h}return d},c=l(a);e(c)}catch{n(new Error("Failed to parse import file. Please check the file format."))}},r.onerror=()=>{n(new Error("Failed to read file"))},r.readAsText(t)})}async function VU(){return new Promise(t=>{const e=document.createElement("input");e.type="file",e.accept=".json,application/json",e.onchange=n=>{var s;const i=(s=n.target.files)==null?void 0:s[0];t(i||null)},e.oncancel=()=>{t(null)},e.click()})}function UU(){var E;const{user:t,signOut:e}=ad(),{projects:n,ideas:r,todos:i,importData:s,freemiumLimits:o,importExportCount:a,lastImportExportReset:l,incrementImportExportCount:c}=ri(),[d,h]=F.useState(!1),f=async()=>{const A=J_(a,l,o);if(!A.canProceed){alert(A.message);return}h(!0);try{const w=LU(n,r,i);MU(w),c(),await on.trackDataExport(),alert("Data exported successfully!")}catch(w){console.error("Export failed:",w),alert("Failed to export data")}finally{h(!1)}},g=async()=>{const A=J_(a,l,o);if(!A.canProceed){alert(A.message);return}h(!0);try{const w=await VU();if(!w){h(!1);return}const _=await jU(w);confirm(`Import ${_.data.projects.length} projects, ${_.data.ideas.length} ideas, and ${_.data.todos.length} todos? This will replace your current data.`)&&(s(_.data.projects,_.data.ideas,_.data.todos),c(),await on.trackDataImport(_.data.projects.length+_.data.ideas.length+_.data.todos.length),alert("Data imported successfully!"))}catch(w){console.error("Import failed:",w),alert(w.message||"Failed to import data")}finally{h(!1)}},m=async()=>{confirm("Are you sure you want to sign out?")&&await e()};return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),y.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account and data"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile"}),y.jsxs("div",{className:"flex items-center gap-4",children:[t!=null&&t.photoURL?y.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-16 h-16 rounded-full"}):y.jsx("div",{className:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center text-2xl font-medium",children:((E=t==null?void 0:t.displayName)==null?void 0:E[0])||"U"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-900",children:(t==null?void 0:t.displayName)||"Guest User"}),(t==null?void 0:t.email)&&y.jsx("p",{className:"text-sm text-gray-600",children:t.email}),(t==null?void 0:t.uid.startsWith("guest_"))&&y.jsx("p",{className:"text-sm text-warning",children:"Guest Account"})]})]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management"}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Export your data as a backup or import from a previous backup."}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("button",{onClick:f,disabled:d,className:"w-full flex items-center justify-center gap-2 btn btn-secondary",children:[y.jsx(gU,{className:"w-5 h-5"}),"Export Data"]}),y.jsxs("button",{onClick:g,disabled:d,className:"w-full flex items-center justify-center gap-2 btn btn-secondary",children:[y.jsx(IU,{className:"w-5 h-5"}),"Import Data"]})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Remaining imports/exports this month:"," ",o.MAX_IMPORTS_EXPORTS_PER_MONTH-a]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistics"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Total Goals"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Total Ideas"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Total Todos"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Completed Todos"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(A=>A.completed).length})]})]})]}),y.jsx("div",{className:"card",children:y.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 btn btn-danger",children:[y.jsx(yU,{className:"w-5 h-5"}),"Sign Out"]})}),y.jsxs("div",{className:"text-center text-sm text-gray-500",children:[y.jsx("p",{children:"Goals Tracker v1.0.0"}),y.jsx("p",{className:"mt-1",children:"Track your journey to success"})]})]})]})}function FU(){const{projectId:t}=am(),e=Mi(),{projects:n,updateStep:r,addStep:i,deleteStep:s,addMilestone:o,deleteMilestone:a,freemiumLimits:l}=ri(),[c,d]=F.useState(!1),[h,f]=F.useState(!1),[g,m]=F.useState(null),E=n.find(S=>S.id===t);if(!E)return y.jsxs("div",{className:"text-center py-16",children:[y.jsx("p",{className:"text-gray-600",children:"Project not found"}),y.jsx("button",{onClick:()=>e("/projects"),className:"btn btn-primary mt-4",children:"Back to Goals"})]});const A=(S,T)=>{r(E.id,S,{completed:T})},w=S=>{S.preventDefault();const T=new FormData(S.currentTarget),b=T.get("title"),P=T.get("description");b.trim()&&(i(E.id,{title:b.trim(),description:P.trim(),completed:!1,position:E.steps.length}),d(!1))},_=(S,T)=>{confirm(`Delete step "${T}"? This will also remove associated todos.`)&&s(E.id,S)},I=S=>{S.preventDefault();const T=new FormData(S.currentTarget),b=T.get("title"),P=T.get("description"),C=T.get("color"),N=S.currentTarget.stepIds,R=Array.from(N.selectedOptions).map($=>$.value);b.trim()&&(o(E.id,{title:b.trim(),description:P.trim(),color:C||"#6366F1",icon:"star",stepIds:R,completed:!1,position:E.milestones.length}),f(!1))},k=(S,T)=>{confirm(`Delete milestone "${T}"?`)&&a(E.id,S)},O=()=>{const S=PU(E,l);if(!S.canCreate){alert(S.message);return}d(!0)},L=()=>{const S=bU(E,l);if(!S.canCreate){alert(S.message);return}f(!0)};return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs("button",{onClick:()=>e("/projects"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[y.jsx(_g,{className:"w-5 h-5"}),"Back"]}),y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center text-white text-2xl",style:{backgroundColor:E.color},children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:E.title}),E.description&&y.jsx("p",{className:"text-gray-600 mt-2",children:E.description})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[y.jsx("span",{className:"text-gray-600",children:"Overall Progress"}),y.jsxs("span",{className:"font-medium text-gray-900",children:[E.progress,"%"]})]}),y.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full transition-all",style:{width:`${E.progress}%`,backgroundColor:E.color}})})]})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Steps"}),y.jsxs("button",{onClick:O,className:"btn btn-primary flex items-center gap-2",children:[y.jsx(gc,{className:"w-4 h-4"}),"Add Step"]})]}),E.steps.length===0?y.jsxs("div",{className:"card text-center py-8",children:[y.jsx(vc,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-600",children:"No steps yet. Add your first step to get started!"})]}):y.jsx("div",{className:"space-y-3",children:E.steps.map((S,T)=>y.jsx("div",{className:"card",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("input",{type:"checkbox",checked:S.completed,onChange:b=>A(S.id,b.target.checked),className:"mt-1 w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary cursor-pointer"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Step ",T+1]}),S.completed&&y.jsx(mc,{className:"w-4 h-4 text-success"})]}),g===S.id?y.jsxs("div",{className:"mt-2 space-y-2",children:[y.jsx("input",{type:"text",defaultValue:S.title,className:"input",onKeyDown:b=>{b.key==="Enter"?(r(E.id,S.id,{title:b.currentTarget.value}),m(null)):b.key==="Escape"&&m(null)},autoFocus:!0}),y.jsx("div",{className:"flex gap-2",children:y.jsx("button",{onClick:()=>m(null),className:"btn btn-secondary btn-sm",children:"Cancel"})})]}):y.jsxs(y.Fragment,{children:[y.jsx("h4",{className:"font-medium text-gray-900 mt-1",children:S.title}),S.description&&y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),y.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Updated ",pc(S.updatedAt)]})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>m(S.id),className:"text-gray-400 hover:text-primary transition-colors",title:"Edit step",children:y.jsx(_U,{className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>_(S.id,S.title),className:"text-gray-400 hover:text-error transition-colors",title:"Delete step",children:y.jsx(lp,{className:"w-4 h-4"})})]})]})},S.id))})]}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Milestones"}),y.jsxs("button",{onClick:L,className:"btn btn-primary flex items-center gap-2",children:[y.jsx(gc,{className:"w-4 h-4"}),"Add Milestone"]})]}),E.milestones.length===0?y.jsxs("div",{className:"card text-center py-8",children:[y.jsx(vc,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-600",children:"No milestones yet. Add milestones to celebrate achievements!"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.milestones.map(S=>y.jsx("div",{className:"card",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:S.color},children:S.completed?"":""}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h4",{className:"font-medium text-gray-900",children:S.title}),y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),y.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[S.stepIds.length," step",S.stepIds.length!==1?"s":"",S.completed&&"  Completed "]})]}),y.jsx("button",{onClick:()=>k(S.id,S.title),className:"text-gray-400 hover:text-error transition-colors flex-shrink-0",title:"Delete milestone",children:y.jsx(lp,{className:"w-4 h-4"})})]})},S.id))})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:()=>e(`/projects/${E.id}/journey`),className:"btn btn-secondary flex-1",children:"View Journey"}),y.jsx("button",{className:"btn btn-primary flex-1",children:"Share Progress"})]}),c&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold",children:"Add New Step"}),y.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:y.jsx(Y_,{className:"w-5 h-5"})})]}),y.jsxs("form",{onSubmit:w,children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Step Title *"}),y.jsx("input",{type:"text",name:"title",placeholder:"e.g., Complete market research",className:"input",required:!0,autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Description"}),y.jsx("textarea",{name:"description",placeholder:"Optional description...",className:"textarea",rows:3})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Add Step"}),y.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn btn-secondary flex-1",children:"Cancel"})]})]})]})}),h&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold",children:"Add New Milestone"}),y.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:y.jsx(Y_,{className:"w-5 h-5"})})]}),y.jsxs("form",{onSubmit:I,children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Milestone Title *"}),y.jsx("input",{type:"text",name:"title",placeholder:"e.g., MVP Complete",className:"input",required:!0,autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Description"}),y.jsx("textarea",{name:"description",placeholder:"What does this milestone represent?",className:"textarea",rows:2})]}),y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Color"}),y.jsx("div",{className:"flex gap-2",children:["#6366F1","#8B5CF6","#22C55E","#F59E0B","#EF4444","#3B82F6"].map(S=>y.jsxs("label",{className:"cursor-pointer",children:[y.jsx("input",{type:"radio",name:"color",value:S,defaultChecked:S==="#6366F1",className:"sr-only peer"}),y.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-transparent peer-checked:border-gray-900 transition-all",style:{backgroundColor:S}})]},S))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"label",children:"Linked Steps (Optional)"}),y.jsx("select",{name:"stepIds",className:"input",multiple:!0,size:Math.min(E.steps.length,4),children:E.steps.map((S,T)=>y.jsxs("option",{value:S.id,children:["Step ",T+1,": ",S.title]},S.id))}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple steps"})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Add Milestone"}),y.jsx("button",{type:"button",onClick:()=>f(!1),className:"btn btn-secondary flex-1",children:"Cancel"})]})]})]})})]})}function BU(){const{ideaId:t}=am(),e=Mi(),{ideas:n,deleteIdea:r,convertIdeaToProject:i}=ri(),s=n.find(l=>l.id===t);if(!s)return y.jsxs("div",{className:"text-center py-16",children:[y.jsx("p",{className:"text-gray-600",children:"Idea not found"}),y.jsx("button",{onClick:()=>e("/ideas"),className:"btn btn-primary mt-4",children:"Back to Ideas"})]});const o=()=>{confirm(`Convert "${s.title}" to a goal?`)&&(i(s.id),e("/projects"))},a=()=>{confirm(`Delete "${s.title}"?`)&&(r(s.id),e("/ideas"))};return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs("button",{onClick:()=>e("/ideas"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[y.jsx(_g,{className:"w-5 h-5"}),"Back"]}),y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center text-white text-2xl",style:{backgroundColor:s.color},children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:s.title}),y.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Created ",pc(s.createdAt)]})]})]})]}),y.jsxs("div",{className:"space-y-6",children:[s.description&&y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),y.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.description})]}),s.tags.length>0&&y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Tags"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((l,c)=>y.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:["#",l]},c))})]}),!s.convertedToProject&&y.jsxs("div",{className:"card",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Turn into Reality"}),y.jsx("p",{className:"text-gray-600 mb-4",children:"Ready to make this idea a goal? Convert it to start tracking your progress."}),y.jsxs("button",{onClick:o,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:["Convert to Goal",y.jsx(pU,{className:"w-5 h-5"})]})]}),s.convertedToProject&&y.jsx("div",{className:"card bg-green-50 border-green-200",children:y.jsx("p",{className:"text-green-700 font-medium",children:" This idea has been converted to a goal"})}),y.jsxs("div",{className:"card border-red-200",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Danger Zone"}),y.jsxs("button",{onClick:a,className:"btn btn-danger w-full flex items-center justify-center gap-2",children:[y.jsx(lp,{className:"w-5 h-5"}),"Delete Idea"]})]})]})]})}function zU(){const{projectId:t}=am(),e=Mi(),{projects:n}=ri(),r=n.find(s=>s.id===t);if(!r)return y.jsxs("div",{className:"text-center py-16",children:[y.jsx("p",{className:"text-gray-600",children:"Project not found"}),y.jsx("button",{onClick:()=>e("/projects"),className:"btn btn-primary mt-4",children:"Back to Goals"})]});const i=r.milestones.filter(s=>s.completed);return y.jsxs("div",{children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs("button",{onClick:()=>e(`/projects/${t}`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[y.jsx(_g,{className:"w-5 h-5"}),"Back"]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Journey Visualization"}),y.jsx("p",{className:"text-gray-600 mt-1",children:r.title})]}),y.jsxs("button",{className:"btn btn-primary flex items-center gap-2",children:[y.jsx(wU,{className:"w-5 h-5"}),"Share"]})]})]}),y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"space-y-6",children:r.steps.map((s,o)=>{const a=s.completed,l=r.milestones.find(c=>c.stepIds.includes(s.id));return y.jsxs("div",{className:"relative",children:[o<r.steps.length-1&&y.jsx("div",{className:`absolute left-6 top-12 w-0.5 h-full ${a?"bg-success":"bg-gray-300"}`}),y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold z-10 ${a?"bg-success":"bg-gray-300"}`,children:a?"":o+1}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:s.title}),y.jsx("p",{className:"text-gray-600 mt-1",children:s.description}),l&&y.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900",children:l.title}),y.jsx("p",{className:"text-sm text-gray-600",children:l.description})]})]})}),a&&y.jsx("p",{className:"text-sm text-success mt-2",children:" Completed"})]})]})]},s.id)})}),y.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:y.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.steps.filter(s=>s.completed).length}),y.jsx("p",{className:"text-sm text-gray-600",children:"Steps Completed"})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length}),y.jsx("p",{className:"text-sm text-gray-600",children:"Milestones Achieved"})]}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[r.progress,"%"]}),y.jsx("p",{className:"text-sm text-gray-600",children:"Progress"})]})]})})]})]})}function $U(){return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary to-secondary",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"}),y.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goals Tracker"}),y.jsx("p",{className:"text-white/80",children:"Loading your journey..."})]})})}function HU(){const{isAuthenticated:t,loading:e}=ad();return e?y.jsx($U,{}):t?y.jsx(AU,{children:y.jsxs(LC,{children:[y.jsx(gn,{path:"/",element:y.jsx(Oy,{to:"/projects",replace:!0})}),y.jsx(gn,{path:"/ideas",element:y.jsx(RU,{})}),y.jsx(gn,{path:"/ideas/:ideaId",element:y.jsx(BU,{})}),y.jsx(gn,{path:"/projects",element:y.jsx(kU,{})}),y.jsx(gn,{path:"/projects/:projectId",element:y.jsx(FU,{})}),y.jsx(gn,{path:"/projects/:projectId/journey",element:y.jsx(zU,{})}),y.jsx(gn,{path:"/todos",element:y.jsx(NU,{})}),y.jsx(gn,{path:"/progress",element:y.jsx(OU,{})}),y.jsx(gn,{path:"/settings",element:y.jsx(UU,{})}),y.jsx(gn,{path:"*",element:y.jsx(Oy,{to:"/projects",replace:!0})})]})}):y.jsx(SU,{})}function qU(){return F.useEffect(()=>{on.initialize("9fd27492d402f07c1f654b4640af1c82"),on.trackAppOpened({isFirstSession:!localStorage.getItem("goals_tracker_first_launch")});const e=()=>{on.trackAppClosed()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),y.jsx(HU,{})}function WU(){return y.jsx($C,{children:y.jsx(Z4,{children:y.jsx(dU,{children:y.jsx(qU,{})})})})}bh.createRoot(document.getElementById("root")).render(y.jsx(uE.StrictMode,{children:y.jsx(WU,{})}));
